[
 {
  "background_jobs_queue": null,
  "condition": "doc.status!=\"Closed\"",
  "docstatus": 0,
  "doctype": "Webhook",
  "enable_security": 0,
  "enabled": 1,
  "is_dynamic_url": 0,
  "meets_condition": "Select a document to check if it meets conditions.",
  "modified": "2025-09-08 15:11:35.888732",
  "name": "Ticket Summary",
  "preview_document": null,
  "preview_request_body": "Select a document to preview request data",
  "request_method": "POST",
  "request_structure": "JSON",
  "request_url": "http://n8n:5678/webhook/summary",
  "timeout": 5,
  "webhook_data": [],
  "webhook_docevent": "on_update",
  "webhook_doctype": "Communication",
  "webhook_headers": [
   {
    "key": "Content-Type",
    "parent": "Ticket Summary",
    "parentfield": "webhook_headers",
    "parenttype": "Webhook",
    "value": "application/json"
   }
  ],
  "webhook_json": "{# TR: doc -> Communication veya HD Ticket olabilir; parent bilet adını çıkar #}\r\n{%- set is_comm = (doc.doctype == \"Communication\") -%}\r\n{%- set ticket_name = (\r\n      doc.reference_name if is_comm and doc.reference_doctype == \"HD Ticket\"\r\n      else (doc.name if doc.doctype == \"HD Ticket\" else doc.reference_name)\r\n) -%}\r\n\r\n{# TR: Parent HD Ticket kaydını çek #}\r\n{%- set t = frappe.get_doc(\"HD Ticket\", ticket_name) -%}\r\n\r\n{# TR: Özet payload'u üret #}\r\n{{ {\r\n  \"ticket\": t.name,\r\n  \"subject\": t.subject,\r\n  \"status\": t.status,\r\n  \"description\": t.description\r\n} | tojson }}",
  "webhook_secret": null
 }
]