import{_ as V}from"./Link-2b0a1c2c.js";import{d as N,V as $,u as D,q as K,a as M,A as c,c as v,k as E,g as o,w as d,h as s,l as r,aA as L,aY as T,r as U,e as q,as as H,Q as x}from"./index-62a62e6e.js";import{_ as I}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-c8f73628.js";import{T as O,_ as R}from"./TextEditor.vue_vue_type_script_setup_true_lang-3540b034.js";import{u as j}from"./pageMeta-71b2b81d.js";import{a as z}from"./more-horizontal-44c34a82.js";import"./dayjs-23c9994e.js";import{_ as F}from"./UserAvatar.vue_vue_type_script_setup_true_lang-3c21d3f7.js";import{L as P,e as Q}from"./knowledgeBase-e21cae7f.js";import{g as W}from"./globalStore-353b4b5d.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-8f31c9b1.js";import"./Avatar.vue_vue_type_script_setup_true_lang-d4d1e36b.js";const Y={class:"flex flex-col flex-1"},G={class:"pt-6 mx-auto w-full max-w-4xl px-5"},J={class:"flex flex-col gap-3 rounded-lg border w-full p-4"},X={class:"flex justify-between items-center mb-3"},Z={class:"flex gap-1 items-center flex-1 mr-7 max-w-fit overflow-hidden"},ee={class:"flex gap-2"},ge=N({__name:"NewArticle",props:{id:{type:String,required:!0}},setup(h){const b=$().getUser(),{$dialog:w}=W(),i=D(),_=K(),{updateOnboardingStep:A}=z("helpdesk"),{isManager:y}=M(),l=c(""),n=c(""),u=c(h.id||null),m=v(()=>_.query.title||"");function C(){Q.submit({title:l.value,content:n.value,category:u.value},{onSuccess:t=>{x.success("Article created"),y&&A("first_article"),p(),i.push({name:"Article",params:{articleId:t.name}})},onError:t=>{x.error(t)}})}function B(){if(!l.value&&!n.value){i.push({name:"AgentKnowledgeBase"});return}w({title:"Discard Article",message:"Are you sure you want to discard this article?",actions:[{label:"Confirm",variant:"solid",onClick(t){i.push({name:"AgentKnowledgeBase"}),p(),t()}}]})}function p(){l.value="",n.value=""}const S=v(()=>{const t=[{label:"Knowledge Base",route:{name:"AgentKnowledgeBase"}}];return m.value&&t.push({label:m.value,route:{name:"AgentKnowledgeBase"}}),t.push({label:"New Article"}),t});return j(()=>({title:"New Article"})),(t,e)=>{const k=V,f=U("Button");return q(),E("div",Y,[o(s(P),null,{"left-header":d(()=>[o(s(I),{items:S.value},null,8,["items"])]),"right-header":d(()=>[...e[4]||(e[4]=[])]),_:1}),r("div",G,[r("div",J,[r("div",X,[r("div",Z,[o(s(F),{name:s(b).name,expand:!0},null,8,["name"]),e[5]||(e[5]=r("span",null,"in",-1)),o(k,{class:"form-control",doctype:"HD Article Category",placeholder:"Select Category",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),pageLength:100,"hide-clear-button":!0},null,8,["modelValue"])]),r("div",ee,[o(f,{label:"Discard",onClick:B}),o(f,{label:"Create",variant:"solid",onClick:C})])]),L(r("textarea",{class:"w-full resize-none border-0 text-3xl font-bold placeholder-ink-gray-3 p-0 pb-3 border-b border-gray-200 focus:ring-0 focus:border-gray-200","onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),placeholder:"Title",rows:"1",wrap:"soft",maxlength:"140",autofocus:"",onInput:e[2]||(e[2]=a=>{const g=a.target;g.style.height=`${g.scrollHeight}px`})},null,544),[[T,l.value]]),o(s(R),{content:n.value,onChange:e[3]||(e[3]=a=>n.value=a),placeholder:"Write your article here...","editor-class":"rounded-b-lg max-w-[unset] prose-sm h-[calc(100vh-340px)] sm:h-[calc(100vh-250px)] overflow-auto"},{bottom:d(()=>[o(s(O),{class:"-ml-1 overflow-x-auto w-full",buttons:s(H)},null,8,["buttons"])]),_:1},8,["content"])])])])}}});export{ge as default};
//# sourceMappingURL=NewArticle-0edfe1ab.js.map
