{"version":3,"file":"TicketAgentFields-2425efde.js","sources":["../../../../node_modules/@headlessui/vue/dist/internal/focus-sentinel.js","../../../../node_modules/@headlessui/vue/dist/components/tabs/tabs.js","../../../../node_modules/frappe-ui/src/components/Tabs/TabList.vue","../../../../node_modules/frappe-ui/src/components/Tabs/TabPanel.vue","../../../../node_modules/frappe-ui/src/components/Tabs/Tabs.vue","../../../../desk/src/components/SearchComplete.vue","../../../../desk/src/components/icons/ActivityIcon.vue","../../../../desk/src/components/icons/AttachmentIcon.vue","../../../../desk/src/components/icons/CommentIcon.vue","../../../../desk/src/components/icons/DotIcon.vue","../../../../desk/src/components/icons/ReplyAllIcon.vue","../../../../desk/src/components/icons/ReplyIcon.vue","../../../../desk/src/components/icons/SelectIcon.vue","../../../../desk/src/components/EmailEditor.vue","../../../../desk/src/stores/agent.ts","../../../../desk/src/components/CommentTextEditor.vue","../../../../desk/src/components/MultiSelectInput.vue","../../../../desk/src/components/CommunicationArea.vue","../../../../desk/src/components/ticket/TicketSplitModal.vue","../../../../desk/src/components/EmailArea.vue","../../../../desk/src/components/CommentBox.vue","../../../../desk/src/components/HistoryBox.vue","../../../../desk/src/components/AssignmentModal.vue","../../../../desk/src/components/CannedResponseSelectorModal.vue","../../../../desk/src/components/ticket/TicketAgentContact.vue","../../../../desk/src/components/ticket/ActivityHeader.vue","../../../../desk/src/components/ticket/TicketAgentActivities.vue","../../../../desk/src/components/ticket/TicketAgentDetails.vue","../../../../desk/src/components/UniInput2.vue","../../../../desk/src/components/ticket/TicketAgentFields.vue"],"sourcesContent":["import{defineComponent as i,h as m,ref as f}from\"vue\";import{Features as l,Hidden as F}from'./hidden.js';let d=i({props:{onFocus:{type:Function,required:!0}},setup(t){let n=f(!0);return()=>n.value?m(F,{as:\"button\",type:\"button\",features:l.Focusable,onFocus(o){o.preventDefault();let e,a=50;function r(){var u;if(a--<=0){e&&cancelAnimationFrame(e);return}if((u=t.onFocus)!=null&&u.call(t)){n.value=!1,cancelAnimationFrame(e);return}e=requestAnimationFrame(r)}e=requestAnimationFrame(r)}}):null}});export{d as FocusSentinel};\n","import{computed as v,defineComponent as L,Fragment as z,h as A,inject as j,onMounted as F,onUnmounted as K,provide as N,ref as P,watch as _,watchEffect as J}from\"vue\";import{useId as $}from'../../hooks/use-id.js';import{useResolveButtonType as Q}from'../../hooks/use-resolve-button-type.js';import{FocusSentinel as V}from'../../internal/focus-sentinel.js';import{Hidden as X}from'../../internal/hidden.js';import{Keys as S}from'../../keyboard.js';import{dom as f}from'../../utils/dom.js';import{Focus as g,focusIn as D,FocusResult as B,sortByDomNode as k}from'../../utils/focus-management.js';import{match as H}from'../../utils/match.js';import{microTask as Y}from'../../utils/micro-task.js';import{getOwnerDocument as Z}from'../../utils/owner.js';import{Features as q,omit as ee,render as M}from'../../utils/render.js';var te=(s=>(s[s.Forwards=0]=\"Forwards\",s[s.Backwards=1]=\"Backwards\",s))(te||{}),le=(d=>(d[d.Less=-1]=\"Less\",d[d.Equal=0]=\"Equal\",d[d.Greater=1]=\"Greater\",d))(le||{});let U=Symbol(\"TabsContext\");function C(a){let b=j(U,null);if(b===null){let s=new Error(`<${a} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,C),s}return b}let G=Symbol(\"TabsSSRContext\"),me=L({name:\"TabGroup\",emits:{change:a=>!0},props:{as:{type:[Object,String],default:\"template\"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:b,attrs:s,emit:d}){var E;let i=P((E=a.selectedIndex)!=null?E:a.defaultIndex),l=P([]),r=P([]),p=v(()=>a.selectedIndex!==null),R=v(()=>p.value?a.selectedIndex:i.value);function y(t){var c;let n=k(u.tabs.value,f),o=k(u.panels.value,f),e=n.filter(I=>{var m;return!((m=f(I))!=null&&m.hasAttribute(\"disabled\"))});if(t<0||t>n.length-1){let I=H(i.value===null?0:Math.sign(t-i.value),{[-1]:()=>1,[0]:()=>H(Math.sign(t),{[-1]:()=>0,[0]:()=>0,[1]:()=>1}),[1]:()=>0}),m=H(I,{[0]:()=>n.indexOf(e[0]),[1]:()=>n.indexOf(e[e.length-1])});m!==-1&&(i.value=m),u.tabs.value=n,u.panels.value=o}else{let I=n.slice(0,t),h=[...n.slice(t),...I].find(W=>e.includes(W));if(!h)return;let O=(c=n.indexOf(h))!=null?c:u.selectedIndex.value;O===-1&&(O=u.selectedIndex.value),i.value=O,u.tabs.value=n,u.panels.value=o}}let u={selectedIndex:v(()=>{var t,n;return(n=(t=i.value)!=null?t:a.defaultIndex)!=null?n:null}),orientation:v(()=>a.vertical?\"vertical\":\"horizontal\"),activation:v(()=>a.manual?\"manual\":\"auto\"),tabs:l,panels:r,setSelectedIndex(t){R.value!==t&&d(\"change\",t),p.value||y(t)},registerTab(t){var o;if(l.value.includes(t))return;let n=l.value[i.value];if(l.value.push(t),l.value=k(l.value,f),!p.value){let e=(o=l.value.indexOf(n))!=null?o:i.value;e!==-1&&(i.value=e)}},unregisterTab(t){let n=l.value.indexOf(t);n!==-1&&l.value.splice(n,1)},registerPanel(t){r.value.includes(t)||(r.value.push(t),r.value=k(r.value,f))},unregisterPanel(t){let n=r.value.indexOf(t);n!==-1&&r.value.splice(n,1)}};N(U,u);let T=P({tabs:[],panels:[]}),x=P(!1);F(()=>{x.value=!0}),N(G,v(()=>x.value?null:T.value));let w=v(()=>a.selectedIndex);return F(()=>{_([w],()=>{var t;return y((t=a.selectedIndex)!=null?t:a.defaultIndex)},{immediate:!0})}),J(()=>{if(!p.value||R.value==null||u.tabs.value.length<=0)return;let t=k(u.tabs.value,f);t.some((o,e)=>f(u.tabs.value[e])!==f(o))&&u.setSelectedIndex(t.findIndex(o=>f(o)===f(u.tabs.value[R.value])))}),()=>{let t={selectedIndex:i.value};return A(z,[l.value.length<=0&&A(V,{onFocus:()=>{for(let n of l.value){let o=f(n);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),M({theirProps:{...s,...ee(a,[\"selectedIndex\",\"defaultIndex\",\"manual\",\"vertical\",\"onChange\"])},ourProps:{},slot:t,slots:b,attrs:s,name:\"TabGroup\"})])}}}),pe=L({name:\"TabList\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{attrs:b,slots:s}){let d=C(\"TabList\");return()=>{let i={selectedIndex:d.selectedIndex.value},l={role:\"tablist\",\"aria-orientation\":d.orientation.value};return M({ourProps:l,theirProps:a,slot:i,attrs:b,slots:s,name:\"TabList\"})}}}),xe=L({name:\"Tab\",props:{as:{type:[Object,String],default:\"button\"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(a,{attrs:b,slots:s,expose:d}){var o;let i=(o=a.id)!=null?o:`headlessui-tabs-tab-${$()}`,l=C(\"Tab\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerTab(r)),K(()=>l.unregisterTab(r));let p=j(G),R=v(()=>{if(p.value){let e=p.value.tabs.indexOf(i);return e===-1?p.value.tabs.push(i)-1:e}return-1}),y=v(()=>{let e=l.tabs.value.indexOf(r);return e===-1?R.value:e}),u=v(()=>y.value===l.selectedIndex.value);function T(e){var I;let c=e();if(c===B.Success&&l.activation.value===\"auto\"){let m=(I=Z(r))==null?void 0:I.activeElement,h=l.tabs.value.findIndex(O=>f(O)===m);h!==-1&&l.setSelectedIndex(h)}return c}function x(e){let c=l.tabs.value.map(m=>f(m)).filter(Boolean);if(e.key===S.Space||e.key===S.Enter){e.preventDefault(),e.stopPropagation(),l.setSelectedIndex(y.value);return}switch(e.key){case S.Home:case S.PageUp:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.First));case S.End:case S.PageDown:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.Last))}if(T(()=>H(l.orientation.value,{vertical(){return e.key===S.ArrowUp?D(c,g.Previous|g.WrapAround):e.key===S.ArrowDown?D(c,g.Next|g.WrapAround):B.Error},horizontal(){return e.key===S.ArrowLeft?D(c,g.Previous|g.WrapAround):e.key===S.ArrowRight?D(c,g.Next|g.WrapAround):B.Error}}))===B.Success)return e.preventDefault()}let w=P(!1);function E(){var e;w.value||(w.value=!0,!a.disabled&&((e=f(r))==null||e.focus({preventScroll:!0}),l.setSelectedIndex(y.value),Y(()=>{w.value=!1})))}function t(e){e.preventDefault()}let n=Q(v(()=>({as:a.as,type:b.type})),r);return()=>{var m,h;let e={selected:u.value,disabled:(m=a.disabled)!=null?m:!1},{...c}=a,I={ref:r,onKeydown:x,onMousedown:t,onClick:E,id:i,role:\"tab\",type:n.value,\"aria-controls\":(h=f(l.panels.value[y.value]))==null?void 0:h.id,\"aria-selected\":u.value,tabIndex:u.value?0:-1,disabled:a.disabled?!0:void 0};return M({ourProps:I,theirProps:c,slot:e,attrs:b,slots:s,name:\"Tab\"})}}}),Ie=L({name:\"TabPanels\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{slots:b,attrs:s}){let d=C(\"TabPanels\");return()=>{let i={selectedIndex:d.selectedIndex.value};return M({theirProps:a,ourProps:{},slot:i,attrs:s,slots:b,name:\"TabPanels\"})}}}),ye=L({name:\"TabPanel\",props:{as:{type:[Object,String],default:\"div\"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(a,{attrs:b,slots:s,expose:d}){var T;let i=(T=a.id)!=null?T:`headlessui-tabs-panel-${$()}`,l=C(\"TabPanel\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerPanel(r)),K(()=>l.unregisterPanel(r));let p=j(G),R=v(()=>{if(p.value){let x=p.value.panels.indexOf(i);return x===-1?p.value.panels.push(i)-1:x}return-1}),y=v(()=>{let x=l.panels.value.indexOf(r);return x===-1?R.value:x}),u=v(()=>y.value===l.selectedIndex.value);return()=>{var n;let x={selected:u.value},{tabIndex:w,...E}=a,t={ref:r,id:i,role:\"tabpanel\",\"aria-labelledby\":(n=f(l.tabs.value[y.value]))==null?void 0:n.id,tabIndex:u.value?w:-1};return!u.value&&a.unmount&&!a.static?A(X,{as:\"span\",\"aria-hidden\":!0,...t}):M({ourProps:t,theirProps:E,slot:x,attrs:b,slots:s,features:q.Static|q.RenderStrategy,visible:u.value,name:\"TabPanel\"})}}});export{xe as Tab,me as TabGroup,pe as TabList,ye as TabPanel,Ie as TabPanels};\n","<template>\n  <TabList\n    class=\"relative flex\"\n    :class=\"\n      t.vertical\n        ? 'flex-col border-r overflow-y-auto'\n        : 'gap-7.5 border-b overflow-x-auto items-center px-5'\n    \"\n  >\n    <Tab\n      ref=\"tabRef\"\n      as=\"template\"\n      v-for=\"(tab, i) in t.tabs\"\n      :key=\"i\"\n      v-slot=\"{ selected }\"\n      class=\"focus:outline-none focus:transition-none\"\n    >\n      <slot v-bind=\"{ tab, selected }\">\n        <button\n          class=\"flex items-center gap-1.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:text-ink-gray-9\"\n          :class=\"[\n            selected ? 'text-ink-gray-9' : '',\n            t.vertical\n              ? 'py-2.5 px-4 border-r border-transparent hover:border-outline-gray-3'\n              : 'py-3 border-b border-transparent hover:border-outline-gray-3',\n          ]\"\n        >\n          <component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"size-4\" />\n          {{ tab.label }}\n        </button>\n      </slot>\n    </Tab>\n    <div\n      ref=\"indicator\"\n      class=\"tab-indicator absolute bg-surface-gray-7\"\n      :class=\"[t.vertical ? 'right-0 w-px' : 'bottom-0 h-px', transitionClass]\"\n    />\n  </TabList>\n</template>\n<script setup>\nimport { TabList, Tab } from '@headlessui/vue'\nimport { ref, watch, computed, onMounted, nextTick, inject } from 'vue'\n\nconst t = inject('tab')\n\nconst tabRef = ref([])\nconst indicator = ref(null)\nconst tabsLength = computed(() => t.value.tabs.value?.length)\n\nconst transitionClass = ref('')\n\nfunction moveIndicator(index) {\n  if (index >= tabsLength.value) {\n    index = tabsLength.value - 1\n  }\n  const selectedTab = tabRef.value[index].el\n  if (t.value.vertical.value) {\n    indicator.value.style.height = `${selectedTab.offsetHeight}px`\n    indicator.value.style.top = `${selectedTab.offsetTop}px`\n  } else {\n    indicator.value.style.width = `${selectedTab.offsetWidth}px`\n    indicator.value.style.left = `${selectedTab.offsetLeft}px`\n  }\n}\n\nwatch(\n  () => t.value.tabIndex.value,\n  (index) => {\n    if (index >= tabsLength.value) {\n      t.value.tabIndex.value = tabsLength.value - 1\n    }\n    transitionClass.value = 'transition-all duration-300 ease-in-out'\n    nextTick(() => moveIndicator(index))\n  },\n)\n\nonMounted(() => {\n  nextTick(() => moveIndicator(t.value.tabIndex.value))\n  // Fix for indicator not moving on initial load\n  setTimeout(() => moveIndicator(t.value.tabIndex.value), 100)\n})\n</script>\n","<template>\n  <TabPanels class=\"flex flex-1 overflow-hidden\">\n    <TabPanel\n      class=\"flex flex-1 flex-col overflow-y-auto focus:outline-none\"\n      v-for=\"(tab, i) in t.tabs\"\n      :key=\"i\"\n    >\n      <slot v-bind=\"{ tab }\" />\n    </TabPanel>\n  </TabPanels>\n</template>\n<script setup>\nimport { TabPanels, TabPanel } from '@headlessui/vue'\nimport { inject } from 'vue'\n\nconst t = inject('tab')\n</script>\n","<template>\n  <TabGroup\n    v-bind=\"\n      as !== 'template'\n        ? {\n            as,\n            class: ['flex flex-1 overflow-hidden', vertical ? '' : 'flex-col '],\n          }\n        : {}\n    \"\n    :defaultIndex=\"tabIndex\"\n    :selectedIndex=\"tabIndex\"\n    @change=\"(idx) => (tabIndex = idx)\"\n  >\n    <slot>\n      <TabList v-slot=\"{ tab, selected }\">\n        <slot name=\"tab-item\" v-bind=\"{ tab, selected }\" />\n      </TabList>\n      <TabPanel v-slot=\"{ tab }\">\n        <slot name=\"tab-panel\" v-bind=\"{ tab }\" />\n      </TabPanel>\n    </slot>\n  </TabGroup>\n</template>\n\n<script setup>\nimport TabList from './TabList.vue'\nimport TabPanel from './TabPanel.vue'\nimport { TabGroup } from '@headlessui/vue'\nimport { computed, provide } from 'vue'\n\nconst props = defineProps({\n  as: {\n    type: String,\n    default: 'template',\n  },\n  tabs: {\n    type: Array,\n    required: true,\n  },\n  vertical: {\n    type: Boolean,\n    default: false,\n  },\n})\n\nconst tabIndex = defineModel()\n\nprovide(\n  'tab',\n  computed(() => ({\n    tabIndex,\n    tabs: props.tabs,\n    vertical: props.vertical,\n  })),\n)\n</script>\n","<template>\n  <Autocomplete\n    placeholder=\"Select an option\"\n    :options=\"options\"\n    :value=\"selection\"\n    @update:query=\"(q) => onUpdateQuery(q)\"\n    @change=\"\n      (v) => {\n        if (!resetInput) {\n          selection = v;\n        }\n        emit('change', v);\n      }\n    \"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { Autocomplete } from \"@/components\";\nimport { createListResource } from \"frappe-ui\";\nimport { computed, ref } from \"vue\";\n\nconst emit = defineEmits([\"change\"]);\n\nconst props = defineProps({\n  value: {\n    type: String,\n    required: false,\n    default: \"\",\n  },\n  doctype: {\n    type: String,\n    required: true,\n  },\n  searchField: {\n    type: String,\n    required: false,\n    default: \"name\",\n  },\n  labelField: {\n    type: String,\n    required: false,\n    default: \"name\",\n  },\n  valueField: {\n    type: String,\n    required: false,\n    default: \"name\",\n  },\n  pageLength: {\n    type: Number,\n    required: false,\n    default: 100,\n  },\n  resetInput: {\n    type: Boolean,\n    required: false,\n    default: false,\n  },\n  customFilters: {\n    type: Object,\n    required: false,\n    default: {},\n  },\n});\n\nconst r = createListResource({\n  doctype: props.doctype,\n  pageLength: props.pageLength,\n  auto: true,\n  fields: [props.labelField, props.searchField, props.valueField],\n  filters: {\n    [props.searchField]: [\"like\", `%${props.value}%`],\n    ...props.customFilters,\n  },\n  onSuccess: () => {\n    selection.value = props.value\n      ? options.value.find((o) => o.value === props.value)\n      : null;\n  },\n});\nconst options = computed(\n  () =>\n    r.data?.map((result) => ({\n      label: result[props.labelField],\n      value: result[props.valueField],\n    })) || []\n);\nconst selection = ref(null);\n\nfunction onUpdateQuery(query: string) {\n  r.update({\n    filters: {\n      [props.searchField]: [\"like\", `%${query}%`],\n      ...props.customFilters,\n    },\n  });\n\n  r.reload();\n}\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M6.29021 2.64272C6.68375 0.785763 9.33429 0.785757 9.72783 2.64272L10.3657 5.65238L13.3753 6.29021C15.2323 6.68375 15.2323 9.33429 13.3753 9.72783L10.3657 10.3657L9.72783 13.3753C9.33429 15.2323 6.68375 15.2323 6.29021 13.3753L5.65238 10.3657L2.64272 9.72783C0.785763 9.33429 0.785757 6.68375 2.64272 6.29021L5.65238 5.65238L6.29021 2.64272ZM8.74956 2.85004C8.58 2.04999 7.43804 2.04998 7.26848 2.85004L6.56324 6.17777L6.49584 6.49583L6.17777 6.56324L2.85004 7.26848C2.04999 7.43804 2.04998 8.58 2.85004 8.74956L6.17777 9.4548L6.49584 9.5222L6.56324 9.84027L7.26848 13.168C7.43804 13.9681 8.58 13.9681 8.74956 13.168L9.4548 9.84027L9.5222 9.5222L9.84027 9.4548L13.168 8.74956C13.9681 8.58 13.9681 7.43804 13.168 7.26848L9.84027 6.56324L9.5222 6.49583L9.4548 6.17777L8.74956 2.85004Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M12.5684 2.50774C11.5403 1.49742 9.95026 1.49742 8.92215 2.50774L3.62404 7.71417C2.12532 9.18695 2.12532 11.669 3.62404 13.1418C5.12762 14.6194 7.66861 14.6194 9.17219 13.1418L12.1609 10.2049C12.3578 10.0113 12.6744 10.0141 12.8679 10.211C13.0615 10.408 13.0587 10.7246 12.8618 10.9181L9.8731 13.8551C7.98045 15.715 4.81578 15.715 2.92313 13.8551C1.02562 11.9904 1.02562 8.86558 2.92313 7.00091L8.22124 1.79449C9.63842 0.401838 11.8521 0.401838 13.2693 1.79449C14.6914 3.19191 14.6914 5.38225 13.2693 6.77968L13.2668 6.78213L13.2668 6.78212L8.37876 11.5189C8.37834 11.5193 8.37793 11.5197 8.37752 11.5201C7.51767 12.3638 6.11144 12.3939 5.29119 11.5097C4.43611 10.6596 4.40778 9.26893 5.30922 8.46081L7.33823 6.46692C7.53518 6.27337 7.85175 6.27613 8.04531 6.47309C8.23886 6.67005 8.23609 6.98662 8.03913 7.18017L6.0014 9.18264L5.99203 9.19185L5.98219 9.20055C5.5391 9.59243 5.5104 10.3231 6.0014 10.8056L6.01078 10.8148L6.01967 10.8245C6.42299 11.2649 7.18224 11.2926 7.67785 10.8056L7.68034 10.8032L7.68035 10.8032L12.5684 6.06643C12.5688 6.06604 12.5692 6.06565 12.5696 6.06526C13.5917 5.05969 13.5913 3.51289 12.5684 2.50774Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M8 2.5C4.2911 2.5 1.5 4.84419 1.5 7.5C1.5 9.14452 2.54729 10.6518 4.25112 11.5816C4.50048 11.7177 4.758 12.0041 4.7326 12.4082C4.71107 12.7508 4.61659 13.2533 4.47175 13.6657C4.44071 13.7541 4.40789 13.8389 4.37434 13.9195C4.62005 13.8524 4.91964 13.7411 5.26646 13.5579C5.48882 13.4404 5.69385 13.2901 5.9102 13.1207C5.95058 13.089 5.9922 13.056 6.03481 13.0222C6.20816 12.8848 6.39803 12.7342 6.58835 12.6102C6.7875 12.4803 7.01146 12.4447 7.20831 12.4631C7.46767 12.4875 7.73186 12.5 8 12.5C11.7089 12.5 14.5 10.1558 14.5 7.5C14.5 4.84419 11.7089 2.5 8 2.5ZM0.5 7.5C0.5 4.08068 3.97691 1.5 8 1.5C12.0231 1.5 15.5 4.08068 15.5 7.5C15.5 10.9193 12.0231 13.5 8 13.5C7.70158 13.5 7.40709 13.4861 7.11751 13.459C6.97583 13.5528 6.83777 13.6621 6.67569 13.7905C6.62832 13.828 6.5789 13.8671 6.52674 13.908C6.30071 14.085 6.03818 14.2812 5.73354 14.4421C4.73389 14.9702 3.9948 15.0302 3.62977 15.0147C3.39759 15.0048 3.20936 14.8646 3.12194 14.6754C3.03801 14.4938 3.05143 14.2816 3.15736 14.1099C3.24804 13.963 3.40655 13.6808 3.52825 13.3343C3.62961 13.0457 3.70134 12.6878 3.72712 12.4347C1.81521 11.3748 0.5 9.58517 0.5 7.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <circle cx=\"8\" cy=\"8\" :r=\"radius\" fill=\"currentColor\" />\n  </svg>\n</template>\n<script setup>\nconst props = defineProps({\n  radius: {\n    type: Number,\n    default: 3.5,\n  },\n});\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M5.85355 3.14645C5.65829 2.95118 5.34171 2.95118 5.14645 3.14645L1.14645 7.14645C0.951184 7.34171 0.951184 7.65829 1.14645 7.85355L5.14645 11.8536C5.34171 12.0488 5.65829 12.0488 5.85355 11.8536C6.04882 11.6583 6.04882 11.3417 5.85355 11.1464L2.20711 7.5L5.85355 3.85355C6.04882 3.65829 6.04882 3.34171 5.85355 3.14645ZM10 8C11.933 8 13.5 9.567 13.5 11.5V12C13.5 12.2761 13.7239 12.5 14 12.5C14.2761 12.5 14.5 12.2761 14.5 12V11.5C14.5 9.01472 12.4853 7 10 7H6.6728L9.81924 3.85355C10.0145 3.65829 10.0145 3.34171 9.81924 3.14645C9.62398 2.95118 9.3074 2.95118 9.11214 3.14645L5.11214 7.14645C4.91688 7.34171 4.91688 7.65829 5.11214 7.85355L9.11214 11.8536C9.3074 12.0488 9.62398 12.0488 9.81924 11.8536C10.0145 11.6583 10.0145 11.3417 9.81924 11.1464L6.6728 8H10Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M5.64645 3.14645C5.84171 2.95118 6.15829 2.95118 6.35355 3.14645C6.54882 3.34171 6.54882 3.65829 6.35355 3.85355L3.20711 7H10C12.4853 7 14.5 9.01472 14.5 11.5V12C14.5 12.2761 14.2761 12.5 14 12.5C13.7239 12.5 13.5 12.2761 13.5 12V11.5C13.5 9.567 11.933 8 10 8H3.20711L6.35355 11.1464C6.54882 11.3417 6.54882 11.6583 6.35355 11.8536C6.15829 12.0488 5.84171 12.0488 5.64645 11.8536L1.64645 7.85355C1.45118 7.65829 1.45118 7.34171 1.64645 7.14645L5.64645 3.14645Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M5.85355 9.64645C5.65829 9.45118 5.34171 9.45118 5.14645 9.64645C4.95118 9.84171 4.95118 10.1583 5.14645 10.3536L7.64645 12.8536C7.84171 13.0488 8.15829 13.0488 8.35355 12.8536L10.8536 10.3536C11.0488 10.1583 11.0488 9.84171 10.8536 9.64645C10.6583 9.45118 10.3417 9.45118 10.1464 9.64645L8 11.7929L5.85355 9.64645ZM5.85355 6.35355C5.65829 6.54882 5.34171 6.54882 5.14645 6.35355C4.95118 6.15829 4.95118 5.84171 5.14645 5.64645L7.64645 3.14645C7.84171 2.95118 8.15829 2.95118 8.35355 3.14645L10.8536 5.64645C11.0488 5.84171 11.0488 6.15829 10.8536 6.35355C10.6583 6.54882 10.3417 6.54882 10.1464 6.35355L8 4.20711L5.85355 6.35355Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <TextEditor\n    ref=\"editorRef\"\n    :editor-class=\"[\n      'prose-sm max-w-full mx-6 md:mx-10 max-h-[50vh] py-3',\n      'min-h-[7rem]',\n      getFontFamily(newEmail),\n      editable && '!max-h-[35vh] overflow-y-auto',\n    ]\"\n    :content=\"newEmail\"\n    :starterkit-options=\"{ heading: { levels: [2, 3, 4, 5, 6] } }\"\n    :placeholder=\"placeholder\"\n    :editable=\"editable\"\n    @change=\"editable ? (newEmail = $event) : null\"\n    :extensions=\"[PreserveVideoControls]\"\n    :uploadFunction=\"(file:any)=>uploadFunction(file, doctype, modelValue?.name)\"\n  >\n    <template #top>\n      <div class=\"mx-6 md:mx-10 flex items-center gap-2 border-y py-2.5\">\n        <span class=\"text-xs text-gray-500\">TO:</span>\n        <MultiSelectInput\n          v-model=\"toEmailsClone\"\n          class=\"flex-1\"\n          :validate=\"validateEmail\"\n          :error-message=\"(value) => `${value} is an invalid email address`\"\n        />\n        <Button\n          :label=\"'CC'\"\n          :class=\"[cc ? 'bg-gray-300 hover:bg-gray-200' : '']\"\n          @click=\"toggleCC()\"\n        />\n        <Button\n          :label=\"'BCC'\"\n          :class=\"[bcc ? 'bg-gray-300 hover:bg-gray-200' : '']\"\n          @click=\"toggleBCC()\"\n        />\n      </div>\n      <div\n        v-if=\"showCC || cc\"\n        class=\"mx-10 flex items-center gap-2 py-2.5\"\n        :class=\"cc || showCC ? 'border-b' : ''\"\n      >\n        <span class=\"text-xs text-gray-500\">CC:</span>\n        <MultiSelectInput\n          ref=\"ccInput\"\n          v-model=\"ccEmailsClone\"\n          class=\"flex-1\"\n          :validate=\"validateEmail\"\n          :error-message=\"(value) => `${value} is an invalid email address`\"\n        />\n      </div>\n      <div\n        v-if=\"showBCC || bcc\"\n        class=\"mx-10 flex items-center gap-2 py-2.5\"\n        :class=\"bcc || showBCC ? 'border-b' : ''\"\n      >\n        <span class=\"text-xs text-gray-500\">BCC:</span>\n        <MultiSelectInput\n          ref=\"bccInput\"\n          v-model=\"bccEmailsClone\"\n          class=\"flex-1\"\n          :validate=\"validateEmail\"\n          :error-message=\"(value) => `${value} is an invalid email address`\"\n        />\n      </div>\n    </template>\n    <!-- <template v-slot:editor=\"{ _editor }\">\n      <EditorContent\n        :class=\"[editable && 'max-h-[35vh] overflow-y-auto']\"\n        :editor=\"_editor\"\n      />\n    </template> -->\n    <template #bottom>\n      <!-- Attachments -->\n      <div class=\"flex flex-wrap gap-2 px-10\">\n        <AttachmentItem\n          v-for=\"a in attachments\"\n          :key=\"a.file_url\"\n          :label=\"a.file_name\"\n          :url=\"!['MOV', 'MP4'].includes(a.file_type) ? a.file_url : null\"\n        >\n          <template #suffix>\n            <FeatherIcon\n              class=\"h-3.5\"\n              name=\"x\"\n              @click.self.stop=\"removeAttachment(a)\"\n            />\n          </template>\n        </AttachmentItem>\n      </div>\n      <!-- TextEditor Fixed Menu -->\n      <div\n        class=\"flex justify-between overflow-scroll pl-10 py-2.5 items-center\"\n      >\n        <div class=\"flex items-center overflow-x-auto w-[60%]\">\n          <div class=\"flex gap-1\">\n            <FileUploader\n              :upload-args=\"{\n                doctype: doctype,\n                docname: modelValue?.name,\n                private: true,\n              }\"\n              @success=\"\n                (f) => {\n                  attachments.push(f);\n                }\n              \"\n            >\n              <template #default=\"{ openFileSelector }\">\n                <Button variant=\"ghost\" @click=\"openFileSelector()\">\n                  <template #icon>\n                    <AttachmentIcon\n                      class=\"h-4\"\n                      style=\"color: #000000; stroke-width: 1.5 !important\"\n                    />\n                  </template>\n                </Button>\n              </template>\n            </FileUploader>\n            <Button\n              variant=\"ghost\"\n              @click=\"showCannedResponseSelectorModal = true\"\n            >\n              <template #icon>\n                <EmailIcon\n                  class=\"h-4\"\n                  style=\"color: #000000; stroke-width: 1.2\"\n                />\n              </template>\n            </Button>\n          </div>\n          <TextEditorFixedMenu class=\"ml-1\" :buttons=\"textEditorMenuButtons\" />\n        </div>\n        <div\n          class=\"flex items-center justify-end space-x-2 sm:mt-0 w-[40%] mr-9\"\n        >\n          <Button label=\"Discard\" @click=\"handleDiscard\" />\n          <Button\n            variant=\"solid\"\n            :disabled=\"emailEmpty\"\n            :loading=\"sendMail.loading\"\n            :label=\"label\"\n            @click=\"\n              () => {\n                submitMail();\n              }\n            \"\n          />\n        </div>\n      </div>\n    </template>\n  </TextEditor>\n  <CannedResponseSelectorModal\n    v-model=\"showCannedResponseSelectorModal\"\n    :doctype=\"doctype\"\n    @apply=\"applyCannedResponse\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  AttachmentItem,\n  CannedResponseSelectorModal,\n  MultiSelectInput,\n} from \"@/components\";\nimport { AttachmentIcon, EmailIcon } from \"@/components/icons\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { PreserveVideoControls } from \"@/tiptap-extensions\";\nimport {\n  getFontFamily,\n  isContentEmpty,\n  removeAttachmentFromServer,\n  textEditorMenuButtons,\n  uploadFunction,\n  validateEmail,\n} from \"@/utils\";\n// import { EditorContent } from \"@tiptap/vue-3\";\nimport { useStorage } from \"@vueuse/core\";\nimport {\n  FileUploader,\n  TextEditor,\n  TextEditorFixedMenu,\n  createResource,\n  toast,\n} from \"frappe-ui\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { computed, nextTick, ref } from \"vue\";\n\nconst editorRef = ref(null);\nconst showCannedResponseSelectorModal = ref(false);\n\nconst props = defineProps({\n  placeholder: {\n    type: String,\n    default: null,\n  },\n  label: {\n    type: String,\n    default: \"Send\",\n  },\n  editable: {\n    type: Boolean,\n    default: true,\n  },\n  doctype: {\n    type: String,\n    default: \"HD Ticket\",\n  },\n  toEmails: {\n    type: Array,\n    default: () => [],\n  },\n  ccEmails: {\n    type: Array,\n    default: () => [],\n  },\n  bccEmails: {\n    type: Array,\n    default: () => [],\n  },\n});\n\nconst label = computed(() => {\n  return sendMail.loading ? \"Sending...\" : props.label;\n});\n\nconst emit = defineEmits([\"submit\", \"discard\"]);\nconst doc = defineModel();\n\nconst newEmail = useStorage(\"emailBoxContent\" + doc.value.name, null);\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\nconst { isManager } = useAuthStore();\n\nconst attachments = ref([]);\nconst emailEmpty = computed(() => {\n  return isContentEmpty(newEmail.value);\n});\n\nconst toEmailsClone = ref([...props.toEmails]);\nconst ccEmailsClone = ref([...props.ccEmails]);\nconst bccEmailsClone = ref([...props.bccEmails]);\nconst showCC = ref(false);\nconst showBCC = ref(false);\nconst cc = computed(() => (ccEmailsClone.value?.length ? true : false));\nconst bcc = computed(() => (bccEmailsClone.value?.length ? true : false));\nconst ccInput = ref(null);\nconst bccInput = ref(null);\n\nfunction applyCannedResponse(template) {\n  newEmail.value = template.message;\n  showCannedResponseSelectorModal.value = false;\n}\n\nconst sendMail = createResource({\n  url: \"run_doc_method\",\n  makeParams: () => ({\n    dt: props.doctype,\n    dn: doc.value.name,\n    method: \"reply_via_agent\",\n    args: {\n      attachments: attachments.value.map((x) => x.name),\n      to: toEmailsClone.value.join(\",\"),\n      cc: ccEmailsClone.value?.join(\",\"),\n      bcc: bccEmailsClone.value?.join(\",\"),\n      message: newEmail.value,\n    },\n  }),\n  onSuccess: () => {\n    resetState();\n    emit(\"submit\");\n\n    if (isManager) {\n      updateOnboardingStep(\"reply_on_ticket\");\n    }\n  },\n  debounce: 300,\n});\n\nfunction submitMail() {\n  if (isContentEmpty(newEmail.value)) {\n    return false;\n  }\n  if (!toEmailsClone.value.length) {\n    toast.warning(\n      \"Email has no recipients. Please add at least one email address in the 'TO' field.\"\n    );\n    return false;\n  }\n\n  sendMail.submit();\n}\n\nfunction toggleCC() {\n  showCC.value = !showCC.value;\n\n  showCC.value &&\n    nextTick(() => {\n      ccInput.value.setFocus();\n    });\n}\n\nfunction toggleBCC() {\n  showBCC.value = !showBCC.value;\n  showBCC.value &&\n    nextTick(() => {\n      bccInput.value.setFocus();\n    });\n}\n\nasync function removeAttachment(attachment) {\n  attachments.value = attachments.value.filter((a) => a !== attachment);\n  await removeAttachmentFromServer(attachment.name);\n}\n\nfunction addToReply(\n  body: string,\n  toEmails: string[],\n  ccEmails: string[],\n  bccEmails: string[]\n) {\n  toEmailsClone.value = toEmails;\n  ccEmailsClone.value = ccEmails;\n  bccEmailsClone.value = bccEmails;\n  editorRef.value.editor\n    .chain()\n    .clearContent()\n    .insertContent(body)\n    .focus(\"all\")\n    .setBlockquote()\n    .insertContentAt(0, { type: \"paragraph\" })\n    .focus(\"start\")\n    .run();\n}\n\nfunction resetState() {\n  newEmail.value = null;\n  attachments.value = [];\n}\n\nfunction handleDiscard() {\n  attachments.value = [];\n  newEmail.value = null;\n\n  ccEmailsClone.value = [];\n  bccEmailsClone.value = [];\n  ccEmailsClone.value = [];\n  showCC.value = false;\n  showBCC.value = false;\n\n  emit(\"discard\");\n}\n\nconst editor = computed(() => {\n  return editorRef.value.editor;\n});\n\ndefineExpose({\n  addToReply,\n  editor,\n  submitMail,\n});\n</script>\n","import { computed } from \"vue\";\nimport { defineStore } from \"pinia\";\nimport { createListResource } from \"frappe-ui\";\n\nexport const useAgentStore = defineStore(\"agent\", () => {\n  const agents = createListResource({\n    doctype: \"HD Agent\",\n    fields: [\"name\", \"agent_name\", \"user\", \"user.user_image\"],\n    filters: { is_active: 1 },\n    pageLength: 99999,\n  });\n\n  const dropdown = computed(() =>\n    agents.data?.map((o) => ({\n      label: o.agent_name,\n      value: o.name,\n    }))\n  );\n\n  function searchAgents(query: string) {\n    return agents.data.filter((a) =>\n      a.user?.toLowerCase().includes(query.toLowerCase())\n    );\n  }\n\n  return {\n    dropdown,\n    agents,\n    searchAgents,\n  };\n});\n","<template>\n  <TextEditor\n    v-if=\"agentsList.data\"\n    ref=\"editorRef\"\n    :editor-class=\"[\n      'prose-sm max-w-none',\n      editable &&\n        'min-h-[7rem] mx-6 md:ml-10 md:mr-9 max-h-[50vh] overflow-y-auto border-t py-3',\n      getFontFamily(newComment),\n    ]\"\n    :content=\"newComment\"\n    :starterkit-options=\"{ heading: { levels: [2, 3, 4, 5, 6] } }\"\n    :placeholder=\"placeholder\"\n    :editable=\"editable\"\n    :mentions=\"agents\"\n    @change=\"editable ? (newComment = $event) : null\"\n    :extensions=\"[PreserveVideoControls]\"\n    :uploadFunction=\"(file:any)=>uploadFunction(file, doctype, modelValue?.name)\"\n  >\n    <template #bottom>\n      <div v-if=\"editable\" class=\"flex flex-col gap-2 px-6 md:pl-10 md:pr-9\">\n        <!-- Attachments -->\n        <div class=\"flex flex-wrap gap-2\">\n          <AttachmentItem\n            v-for=\"a in attachments\"\n            :key=\"a.file_url\"\n            :label=\"a.file_name\"\n            :url=\"!['MOV', 'MP4'].includes(a.file_type) ? a.file_url : null\"\n          >\n            <template #suffix>\n              <FeatherIcon\n                class=\"h-3.5\"\n                name=\"x\"\n                @click.stop=\"removeAttachment(a)\"\n              />\n            </template>\n          </AttachmentItem>\n        </div>\n        <!-- Fixed Menu -->\n        <div class=\"flex justify-between overflow-hidden border-t py-2.5\">\n          <div class=\"flex items-center overflow-x-auto w-[60%]\">\n            <TextEditorFixedMenu\n              class=\"-ml-1\"\n              :buttons=\"textEditorMenuButtons\"\n            />\n            <FileUploader\n              :upload-args=\"{\n                doctype: doctype,\n                docname: modelValue.name,\n                private: true,\n              }\"\n              @success=\"(f) => attachments.push(f)\"\n            >\n              <template #default=\"{ openFileSelector }\">\n                <Button\n                  theme=\"gray\"\n                  variant=\"ghost\"\n                  @click=\"openFileSelector()\"\n                >\n                  <template #icon>\n                    <AttachmentIcon\n                      class=\"h-4\"\n                      style=\"color: #000000; stroke-width: 1.5 !important\"\n                    />\n                  </template>\n                </Button>\n              </template>\n            </FileUploader>\n          </div>\n          <div class=\"flex items-center justify-end space-x-2 w-[40%]\">\n            <Button\n              label=\"Discard\"\n              @click=\"\n                () => {\n                  newComment = '';\n                  attachments = [];\n                  emit('discard');\n                }\n              \"\n            />\n            <Button\n              variant=\"solid\"\n              :label=\"label\"\n              :disabled=\"commentEmpty\"\n              :loading=\"loading\"\n              @click=\"\n                () => {\n                  loading = true;\n                  submitComment();\n                  newComment = '';\n                }\n              \"\n            />\n          </div>\n        </div>\n      </div>\n    </template>\n  </TextEditor>\n</template>\n<script setup lang=\"ts\">\nimport {\n  FileUploader,\n  TextEditor,\n  TextEditorFixedMenu,\n  createResource,\n} from \"frappe-ui\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { computed, onMounted, ref } from \"vue\";\n\nimport { AttachmentItem } from \"@/components/\";\nimport { AttachmentIcon } from \"@/components/icons/\";\nimport { useAgentStore } from \"@/stores/agent\";\n\nimport { useAuthStore } from \"@/stores/auth\";\nimport { PreserveVideoControls } from \"@/tiptap-extensions\";\nimport {\n  getFontFamily,\n  isContentEmpty,\n  removeAttachmentFromServer,\n  textEditorMenuButtons,\n  uploadFunction,\n} from \"@/utils\";\nimport { useStorage } from \"@vueuse/core\";\n\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\nconst { agents: agentsList } = useAgentStore();\nconst { isManager } = useAuthStore();\n\nonMounted(() => {\n  if (\n    agentsList.loading ||\n    agentsList.data?.length ||\n    agentsList.list.promise\n  ) {\n    return;\n  }\n  agentsList.fetch();\n});\n\nconst props = defineProps({\n  placeholder: {\n    type: String,\n    default: null,\n  },\n  label: {\n    type: String,\n    default: \"Comment\",\n  },\n  editable: {\n    type: Boolean,\n    default: true,\n  },\n  doctype: {\n    type: String,\n    default: \"HD Ticket\",\n  },\n});\n\nconst emit = defineEmits([\"submit\", \"discard\"]);\nconst doc = defineModel();\nconst newComment = useStorage(\"commentBoxContent\" + doc.value.name, null);\nconst attachments = ref([]);\nconst commentEmpty = computed(() => {\n  return isContentEmpty(newComment.value);\n});\nconst loading = ref(false);\n\nconst label = computed(() => {\n  return loading.value ? \"Sending...\" : props.label;\n});\n\nconst agents = computed(() => {\n  return (\n    agentsList.data?.map((agent) => ({\n      label: agent.agent_name.trimEnd(),\n      value: agent.name,\n    })) || []\n  );\n});\n\nfunction removeAttachment(attachment) {\n  attachments.value = attachments.value.filter((a) => a !== attachment);\n  removeAttachmentFromServer(attachment.name);\n}\n\nasync function submitComment() {\n  if (isContentEmpty(newComment.value)) {\n    return false;\n  }\n  const comment = createResource({\n    url: \"run_doc_method\",\n    makeParams: () => ({\n      dt: props.doctype,\n      dn: doc.value.name,\n      method: \"new_comment\",\n      args: {\n        content: newComment.value,\n        attachments: attachments.value,\n      },\n    }),\n    onSuccess: () => {\n      if (isManager) {\n        updateOnboardingStep(\"comment_on_ticket\");\n      }\n      emit(\"submit\");\n      loading.value = false;\n      attachments.value = [];\n      newComment.value = null;\n    },\n    onError: () => {\n      loading.value = false;\n    },\n  });\n\n  comment.submit();\n}\n\nconst editorRef = ref(null);\nconst editor = computed(() => editorRef.value?.editor);\n\ndefineExpose({\n  submitComment,\n  editor,\n});\n</script>\n","<template>\n  <div>\n    <div class=\"flex flex-wrap gap-1\">\n      <Button\n        v-for=\"value in values\"\n        ref=\"emails\"\n        :key=\"value\"\n        :label=\"value\"\n        theme=\"gray\"\n        variant=\"subtle\"\n        class=\"rounded-full\"\n        @keydown.delete.capture.stop=\"removeLastValue\"\n      >\n        <template #suffix>\n          <FeatherIcon\n            class=\"h-3.5\"\n            name=\"x\"\n            @click.stop=\"removeValue(value)\"\n          />\n        </template>\n      </Button>\n      <div class=\"flex-1\">\n        <Combobox v-model=\"selectedValue\" nullable>\n          <Popover v-model:show=\"showOptions\" class=\"w-full\">\n            <template #target=\"{ togglePopover }\">\n              <ComboboxInput\n                ref=\"search\"\n                class=\"search-input form-input w-full border-none bg-white hover:bg-white focus:border-none focus:!shadow-none focus-visible:!ring-0\"\n                type=\"text\"\n                :value=\"query\"\n                autocomplete=\"off\"\n                @change=\"\n                  (e) => {\n                    query = e.target.value;\n                    showOptions = true;\n                  }\n                \"\n                @focus=\"() => togglePopover()\"\n                @keydown.delete.capture.stop=\"removeLastValue\"\n              />\n            </template>\n            <template #body=\"{ isOpen }\">\n              <div v-show=\"isOpen\">\n                <div class=\"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl\">\n                  <ComboboxOptions\n                    class=\"my-1 max-h-[12rem] overflow-y-auto px-1.5\"\n                    static\n                  >\n                    <ComboboxOption\n                      v-for=\"option in options\"\n                      :key=\"option.value\"\n                      v-slot=\"{ active }\"\n                      :value=\"option\"\n                    >\n                      <li\n                        :class=\"[\n                          'flex cursor-pointer items-center rounded px-2 py-1 text-base',\n                          { 'bg-gray-100': active },\n                        ]\"\n                      >\n                        <UserAvatar\n                          class=\"mr-2\"\n                          :name=\"option.value\"\n                          size=\"lg\"\n                        />\n                        <div class=\"flex flex-col gap-1 p-1 text-gray-800\">\n                          <div class=\"text-base font-medium\">\n                            {{ option.label }}\n                          </div>\n                          <div class=\"text-sm text-gray-600\">\n                            {{ option.value }}\n                          </div>\n                        </div>\n                      </li>\n                    </ComboboxOption>\n                  </ComboboxOptions>\n                </div>\n              </div>\n            </template>\n          </Popover>\n        </Combobox>\n      </div>\n    </div>\n    <ErrorMessage v-if=\"error\" class=\"mt-2 pl-2\" :message=\"error\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Combobox,\n  ComboboxInput,\n  ComboboxOptions,\n  ComboboxOption,\n} from \"@headlessui/vue\";\nimport { UserAvatar } from \"@/components/\";\nimport { Popover, createResource } from \"frappe-ui\";\nimport { ref, computed, nextTick } from \"vue\";\nimport { watchDebounced } from \"@vueuse/core\";\n\nconst props = defineProps({\n  validate: {\n    type: Function,\n    default: null,\n  },\n  errorMessage: {\n    type: Function,\n    default: (value) => `${value} is an Invalid value`,\n  },\n});\n\nconst values = defineModel();\n\nconst emails = ref([]);\nconst search = ref(null);\nconst error = ref(null);\nconst query = ref(\"\");\nconst text = ref(\"\");\nconst showOptions = ref(false);\n\nconst selectedValue = computed({\n  get: () => query.value || \"\",\n  set: (val) => {\n    query.value = \"\";\n    if (val) {\n      showOptions.value = false;\n    }\n    val?.value && addValue(val.value);\n  },\n});\n\nwatchDebounced(\n  query,\n  (val) => {\n    val = val || \"\";\n    if (text.value === val) return;\n    text.value = val;\n    reload(val);\n  },\n  { debounce: 300, immediate: true }\n);\n\nconst filterOptions = createResource({\n  url: \"helpdesk.api.contact.search_contacts\",\n  method: \"GET\",\n  cache: [\"Contact\", text.value],\n  params: {\n    txt: text.value,\n  },\n  transform: (data: Record<\"full_name\" | \"name\" | \"email_id\", string>[]) => {\n    return data.map(({ full_name, email_id, name }) => ({\n      label: full_name || name || email_id,\n      value: email_id,\n    }));\n  },\n});\n\nconst options = computed(() => {\n  let searchedContacts = filterOptions.data || [];\n  if (!searchedContacts.length && query.value) {\n    searchedContacts.push({\n      label: query.value,\n      value: query.value,\n    });\n  }\n  return searchedContacts;\n});\n\nfunction reload(val) {\n  filterOptions.update({\n    params: {\n      txt: val,\n    },\n  });\n  filterOptions.reload();\n}\n\nconst addValue = (value) => {\n  error.value = null;\n  if (value) {\n    const splitValues = value.split(\",\");\n    splitValues.forEach((value) => {\n      value = value.trim();\n      if (value) {\n        // check if value is not already in the values array\n        if (!values.value?.includes(value)) {\n          // check if value is valid\n          if (value && props.validate && !props.validate(value)) {\n            error.value = props.errorMessage(value);\n            return;\n          }\n          // add value to values array\n          if (!values.value) {\n            values.value = [value];\n          } else {\n            values.value.push(value);\n          }\n          value = value.replace(value, \"\");\n        }\n      }\n    });\n    !error.value && (value = \"\");\n  }\n};\n\nconst removeValue = (value) => {\n  values.value = values.value.filter((v) => v !== value);\n};\n\nconst removeLastValue = () => {\n  if (query.value) return;\n\n  let emailRef = emails.value[emails.value.length - 1]?.$el;\n  if (document.activeElement === emailRef) {\n    values.value.pop();\n    nextTick(() => {\n      if (values.value.length) {\n        emailRef = emails.value[emails.value.length - 1].$el;\n        emailRef?.focus();\n      } else {\n        setFocus();\n      }\n    });\n  } else {\n    emailRef?.focus();\n  }\n};\n\nfunction setFocus() {\n  search.value.$el.focus();\n}\n\ndefineExpose({ setFocus });\n</script>\n","<template>\n  <div class=\"flex flex-col comm-area\">\n    <div\n      class=\"flex justify-between gap-3 border-t px-6 md:px-10 py-4 md:py-2.5\"\n    >\n      <div class=\"flex gap-1.5\">\n        <Button\n          ref=\"sendEmailRef\"\n          variant=\"ghost\"\n          label=\"Reply\"\n          :class=\"[showEmailBox ? '!bg-gray-300 hover:!bg-gray-200' : '']\"\n          @click=\"toggleEmailBox()\"\n        >\n          <template #prefix>\n            <EmailIcon class=\"h-4\" />\n          </template>\n        </Button>\n        <Button\n          variant=\"ghost\"\n          label=\"Comment\"\n          :class=\"[showCommentBox ? '!bg-gray-300 hover:!bg-gray-200' : '']\"\n          @click=\"toggleCommentBox()\"\n        >\n          <template #prefix>\n            <CommentIcon class=\"h-4\" />\n          </template>\n        </Button>\n      </div>\n    </div>\n    <div\n      v-show=\"showEmailBox\"\n      class=\"flex gap-1.5 flex-1\"\n      @keydown.ctrl.enter.capture.stop=\"submitEmail\"\n      @keydown.meta.enter.capture.stop=\"submitEmail\"\n    >\n      <EmailEditor\n        ref=\"emailEditorRef\"\n        :label=\"\n          isMobileView ? 'Send' : isMac ? 'Send (⌘ + ⏎)' : 'Send (Ctrl + ⏎)'\n        \"\n        v-model=\"doc\"\n        v-model:content=\"content\"\n        placeholder=\"Hi John, we are looking into this issue.\"\n        :to-emails=\"toEmails\"\n        :cc-emails=\"ccEmails\"\n        :bcc-emails=\"bccEmails\"\n        @submit=\"\n          () => {\n            showEmailBox = false;\n            emit('update');\n          }\n        \"\n        @discard=\"\n          () => {\n            showEmailBox = false;\n          }\n        \"\n      />\n    </div>\n    <div\n      v-show=\"showCommentBox\"\n      @keydown.ctrl.enter.capture.stop=\"submitComment\"\n      @keydown.meta.enter.capture.stop=\"submitComment\"\n    >\n      <CommentTextEditor\n        ref=\"commentTextEditorRef\"\n        :label=\"\n          isMobileView\n            ? 'Comment'\n            : isMac\n            ? 'Comment (⌘ + ⏎)'\n            : 'Comment (Ctrl + ⏎)'\n        \"\n        v-model=\"doc\"\n        :editable=\"showCommentBox\"\n        :doctype=\"doctype\"\n        placeholder=\"@John could you please look into this?\"\n        @submit=\"\n          () => {\n            showCommentBox = false;\n            emit('update');\n          }\n        \"\n        @discard=\"\n          () => {\n            showCommentBox = false;\n          }\n        \"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { CommentTextEditor, EmailEditor } from \"@/components\";\nimport { CommentIcon, EmailIcon } from \"@/components/icons/\";\nimport { useDevice } from \"@/composables\";\nimport { useScreenSize } from \"@/composables/screen\";\nimport { showCommentBox, showEmailBox } from \"@/pages/ticket/modalStates\";\nimport { ref, watch } from \"vue\";\n\nconst emit = defineEmits([\"update\"]);\nconst content = defineModel(\"content\");\nconst doc = defineModel();\nconst { isMac } = useDevice();\nconst { isMobileView } = useScreenSize();\n\nconst emailEditorRef = ref(null);\nconst commentTextEditorRef = ref(null);\n\nfunction toggleEmailBox() {\n  if (showCommentBox.value) {\n    showCommentBox.value = false;\n  }\n  showEmailBox.value = !showEmailBox.value;\n}\n\nfunction toggleCommentBox() {\n  if (showEmailBox.value) {\n    showEmailBox.value = false;\n  }\n  showCommentBox.value = !showCommentBox.value;\n}\n\nfunction submitEmail() {\n  if (emailEditorRef.value.submitMail()) {\n    emit(\"update\");\n  }\n}\n\nfunction submitComment() {\n  if (commentTextEditorRef.value.submitComment()) {\n    emit(\"update\");\n  }\n}\n\nfunction replyToEmail(data: object) {\n  showEmailBox.value = true;\n  emailEditorRef.value.addToReply(\n    data.content,\n    data.to?.split(\",\"),\n    data.cc?.split(\",\"),\n    data.bcc?.split(\",\")\n  );\n}\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    default: \"HD Ticket\",\n  },\n  toEmails: {\n    type: Array,\n    default: () => [],\n  },\n  ccEmails: {\n    type: Array,\n    default: () => [],\n  },\n  bccEmails: {\n    type: Array,\n    default: () => [],\n  },\n});\n\nwatch(\n  () => showEmailBox.value,\n  (value) => {\n    if (value) {\n      emailEditorRef.value?.editor?.commands?.focus();\n    }\n  }\n);\n\nwatch(\n  () => showCommentBox.value,\n  (value) => {\n    if (value) {\n      commentTextEditorRef.value?.editor?.commands?.focus();\n    }\n  }\n);\n\ndefineExpose({\n  replyToEmail,\n  toggleEmailBox,\n  toggleCommentBox,\n  editor: emailEditorRef,\n});\n</script>\n\n<style>\n@media screen and (max-width: 640px) {\n  .comm-area {\n    width: 100vw;\n  }\n}\n.comm-area {\n  width: 100%;\n}\n</style>\n","<template>\n  <Dialog :options=\"{ title: `Split ticket` }\" v-model=\"showDialog\">\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <p class=\"text-p-base text-ink-gray-8\">\n          All\n          <span class=\"underline\">emails/ comments</span>\n          from this email onwards will be moved to new ticket.\n        </p>\n        <FormControl\n          label=\"New Ticket Subject\"\n          type=\"text\"\n          v-model=\"subject\"\n          placeholder=\"Add a subject for the new ticket\"\n        />\n        <div\n          class=\"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200\"\n        >\n          <TriangleAlert\n            class=\"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-yellow-500\"\n          />\n\n          <div class=\"text-wrap text-sm text-gray-700\">\n            This action is irreversible.\n          </div>\n        </div>\n      </div>\n    </template>\n    <template #actions>\n      <Button\n        class=\"w-full\"\n        variant=\"solid\"\n        label=\"Split into new ticket\"\n        :loading=\"splitTicket.loading\"\n        :icon-left=\"LucideSplit\"\n        @click=\"handleTicketSplit\"\n      />\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { Dialog, createResource, toast } from \"frappe-ui\";\nimport { ref } from \"vue\";\nimport LucideSplit from \"~icons/lucide/split\";\nimport TriangleAlert from \"~icons/lucide/triangle-alert\";\n\ninterface Props {\n  ticket_id: string;\n  communication_id: string;\n}\n\ninterface E {\n  (event: \"update\"): void;\n  //   (event: \"rowClick\", row: any): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<E>();\nconst showDialog = defineModel<boolean>();\n\nconst subject = ref(null);\n\nconst splitTicket = createResource({\n  url: \"helpdesk.helpdesk.doctype.hd_ticket.api.split_ticket\",\n  makeParams({ subject, communication_id }) {\n    return {\n      subject,\n      communication_id,\n    };\n  },\n  validate({ subject, communication_id }) {\n    if (!subject) throw { message: \"Subject is required\" };\n    if (!communication_id) throw { message: \"Communication ID is required\" };\n  },\n  onSuccess: (newTicket: string) => {\n    toast.success(\"Ticket split successfully\");\n    showDialog.value = false;\n    window.open(\n      window.location.origin + \"/helpdesk/tickets/\" + newTicket,\n      \"_blank\"\n    );\n    window.location.reload();\n  },\n});\n\nfunction handleTicketSplit() {\n  splitTicket.submit({\n    subject: subject.value,\n    communication_id: props.communication_id,\n  });\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    v-bind=\"$attrs\"\n    class=\"grow cursor-pointer border-transparent bg-white rounded-md shadow text-base leading-6 transition-all duration-300 ease-in-out\"\n  >\n    <div\n      class=\"flex items-center justify-between gap-2\"\n      :class=\"isMobileView && 'items-start'\"\n    >\n      <!-- email design for mobile -->\n      <div v-if=\"isMobileView\" class=\"flex items-center gap-2 text-sm\">\n        <div class=\"leading-tight\">\n          <p>{{ sender.full_name || \"No name found\" }}</p>\n          <Tooltip :text=\"dateFormat(creation, dateTooltipFormat)\">\n            <p class=\"text-xs md:text-sm text-gray-600\">\n              {{ timeAgo(creation) }}\n            </p>\n          </Tooltip>\n          <p class=\"sm:flex hidden text-sm text-gray-600\" v-if=\"sender.name\">\n            {{ \"<\" + sender.name + \">\" }}\n          </p>\n        </div>\n      </div>\n      <!-- email design for desktop -->\n      <div v-else class=\"flex items-center gap-1\">\n        <span>{{ sender.full_name || \"No name found\" }}</span>\n        <span class=\"sm:flex hidden text-sm text-gray-600\" v-if=\"sender.name\">{{\n          \"<\" + sender.name + \">\"\n        }}</span>\n      </div>\n\n      <div class=\"flex gap-0.5 items-center\">\n        <Badge\n          v-if=\"status.label\"\n          :label=\"__(status.label)\"\n          variant=\"subtle\"\n          :theme=\"status.color\"\n          class=\"mr-1.5\"\n        />\n        <Tooltip\n          :text=\"dateFormat(creation, dateTooltipFormat)\"\n          v-if=\"!isMobileView\"\n        >\n          <p class=\"text-xs md:text-sm text-gray-600\">\n            {{ timeAgo(creation) }}\n          </p>\n        </Tooltip>\n        <Button\n          variant=\"ghost\"\n          class=\"text-gray-700\"\n          @click=\"\n            emit('reply', {\n              content: content,\n              to: sender?.name ?? to,\n            })\n          \"\n        >\n          <ReplyIcon class=\"h-4 w-4\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          class=\"text-gray-700\"\n          @click=\"\n            emit('reply', {\n              content: content,\n              to: to ?? sender.name,\n              cc: cc,\n              bcc: bcc,\n            })\n          \"\n        >\n          <ReplyAllIcon class=\"h-4 w-4\" />\n        </Button>\n        <Dropdown\n          v-if=\"showSplitOption\"\n          :placement=\"'right'\"\n          :options=\"[\n            {\n              label: 'Split Ticket',\n              icon: LucideSplit,\n              onClick: () => (showSplitModal = true),\n            },\n          ]\"\n        >\n          <Button\n            icon=\"more-horizontal\"\n            class=\"text-gray-600\"\n            variant=\"ghost\"\n          />\n        </Dropdown>\n      </div>\n    </div>\n    <!-- <div class=\"text-sm leading-5 text-gray-600\">\n      {{ subject }}\n    </div> -->\n    <div class=\"text-sm leading-5 text-gray-600\">\n      <span v-if=\"to\" class=\"text-2xs mr-1 font-bold text-gray-500\">TO:</span>\n      <span v-if=\"to\"> {{ to }} </span>\n      <span v-if=\"cc\">, </span>\n      <span v-if=\"cc\" class=\"text-2xs mr-1 font-bold text-gray-500\"> CC: </span>\n      <span v-if=\"cc\">{{ cc }}</span>\n      <span v-if=\"bcc\">, </span>\n      <span v-if=\"bcc\" class=\"text-2xs mr-1 font-bold text-gray-500\">\n        BCC:\n      </span>\n      <span v-if=\"bcc\">{{ bcc }}</span>\n    </div>\n    <div class=\"border-0 border-t my-3 border-outline-gray-modals\" />\n    <EmailContent :content=\"content\" />\n    <div class=\"flex flex-wrap gap-2\">\n      <AttachmentItem\n        v-for=\"a in attachments\"\n        :key=\"a.file_url\"\n        :label=\"a.file_name\"\n        :url=\"a.file_url\"\n      />\n    </div>\n  </div>\n  <TicketSplitModal\n    v-model=\"showSplitModal\"\n    :ticket_id=\"name\"\n    :communication_id=\"name\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { AttachmentItem } from \"@/components\";\nimport { useScreenSize } from \"@/composables/screen\";\nimport { dateFormat, dateTooltipFormat, timeAgo } from \"@/utils\";\nimport { Dropdown } from \"frappe-ui\";\nimport { computed, ref } from \"vue\";\nimport LucideSplit from \"~icons/lucide/split\";\nimport { ReplyAllIcon, ReplyIcon } from \"./icons\";\nimport TicketSplitModal from \"./ticket/TicketSplitModal.vue\";\nconst props = defineProps({\n  activity: {\n    type: Object,\n    required: true,\n  },\n  showSplitOption: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst {\n  sender,\n  to,\n  cc,\n  bcc,\n  creation,\n  subject,\n  attachments,\n  content,\n  name,\n  deliveryStatus,\n} = props.activity;\nconsole.log(deliveryStatus);\nconst emit = defineEmits([\"reply\"]);\n\nconst { isMobileView } = useScreenSize();\n\nconst showSplitModal = ref(false);\n\nconst status = computed(() => {\n  let _status = deliveryStatus;\n  let indicator_color = \"red\";\n  if ([\"Sent\", \"Clicked\"].includes(_status)) {\n    indicator_color = \"green\";\n  } else if ([\"Sending\", \"Scheduled\"].includes(_status)) {\n    indicator_color = \"orange\";\n  } else if ([\"Opened\", \"Read\"].includes(_status)) {\n    indicator_color = \"blue\";\n  } else if (_status == \"Error\") {\n    indicator_color = \"red\";\n  }\n  return { label: _status, color: indicator_color };\n});\n\n// TODO: Implement reply functionality using this way instead of emit drillup\n// function reply(email, reply_all = false) {\n//   emailBox.toggleEmailBox();\n//   let editor = emailBox.editor;\n//   let message = email.content;\n//   let recipients = sender.name;\n//   editor.toEmails = [email.sender];\n//   editor.cc = editor.bcc = false;\n//   editor.ccEmails = [];\n//   editor.bccEmails = [];\n//   console.log(recipients);\n\n//   if (!email.subject.startsWith(\"Re:\")) {\n//     editor.subject = `Re: ${email.subject}`;\n//   } else {\n//     editor.subject = email.subject;\n//   }\n\n//   if (reply_all) {\n//     let cc = email.cc?.split(\",\").map((r) => r.trim());\n//     let bcc = email.bcc?.split(\",\").map((r) => r.trim());\n\n//     if (cc?.length) {\n//       recipients = recipients.filter((r) => !cc?.includes(r));\n//       cc.push(...recipients);\n//     } else {\n//       cc = recipients;\n//     }\n\n//     editor.cc = cc ? true : false;\n//     editor.bcc = bcc ? true : false;\n\n//     editor.ccEmails = cc;\n//     editor.bccEmails = bcc;\n//   }\n\n//   let repliedMessage = `<blockquote>${message}</blockquote>`;\n\n//   editor.editor\n//     .chain()\n//     .clearContent()\n//     .insertContent(\"<p>.</p>\")\n//     .updateAttributes(\"paragraph\", { class: \"reply-to-content\" })\n//     .insertContent(repliedMessage)\n//     .focus(\"all\")\n//     .insertContentAt(0, { type: \"paragraph\" })\n//     .focus(\"start\")\n//     .run();\n// }\n</script>\n\n<style>\n.email-content {\n  max-width: 100%;\n}\n.email-content > * {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n</style>\n","<template>\n  <div class=\"flex-col text-base flex-1\" ref=\"commentBoxRef\">\n    <div class=\"mb-1 ml-0.5 flex items-center justify-between\">\n      <div class=\"text-gray-600 flex items-center gap-2\">\n        <Avatar\n          size=\"md\"\n          :label=\"commenter\"\n          :image=\"getUser(commentedBy).user_image\"\n        />\n        <p>\n          <span class=\"font-medium text-gray-800\">\n            {{ commenter }}\n          </span>\n          <span> added a</span>\n          <span class=\"max-w-xs truncate font-medium text-gray-800\">\n            comment\n          </span>\n        </p>\n      </div>\n      <div class=\"flex items-center gap-1\">\n        <Tooltip :text=\"dateFormat(creation, dateTooltipFormat)\">\n          <span class=\"pl-0.5 text-sm text-gray-600\">\n            {{ timeAgo(creation) }}\n          </span>\n        </Tooltip>\n        <div v-if=\"authStore.userId === commentedBy && !editable\">\n          <Dropdown\n            :placement=\"'right'\"\n            :options=\"[\n              {\n                label: 'Edit',\n                onClick: () => handleEditMode(),\n                icon: 'edit-2',\n                condition: () => !isTicketMergedComment,\n              },\n              {\n                label: 'Delete',\n                onClick: () => (showDialog = true),\n                icon: 'trash-2',\n              },\n            ]\"\n          >\n            <Button\n              icon=\"more-horizontal\"\n              class=\"text-gray-600\"\n              variant=\"ghost\"\n            />\n          </Dropdown>\n        </div>\n      </div>\n    </div>\n    <div class=\"rounded bg-gray-50 px-4 py-3\">\n      <TextEditor\n        ref=\"editorRef\"\n        :editor-class=\"[\n          'prose-f shrink text-p-sm transition-all duration-300 ease-in-out block w-full content',\n          getFontFamily(_content),\n        ]\"\n        :content=\"_content\"\n        :editable=\"editable\"\n        :bubble-menu=\"textEditorMenuButtons\"\n        @change=\"(event:string) => {_content = event}\"\n      >\n        <template #bottom v-if=\"editable\">\n          <div class=\"flex flex-row-reverse gap-2\">\n            <Button label=\"Save\" @click=\"handleSaveComment\" variant=\"solid\" />\n            <Button label=\"Discard\" @click=\"handleDiscard\" />\n          </div>\n        </template>\n      </TextEditor>\n      <div class=\"flex flex-wrap gap-2\" v-if=\"!editable\">\n        <AttachmentItem\n          v-for=\"a in attachments\"\n          :key=\"a.file_url\"\n          :label=\"a.file_name\"\n          :url=\"a.file_url\"\n        />\n      </div>\n    </div>\n  </div>\n  <Dialog\n    v-model=\"showDialog\"\n    :options=\"{\n      title: 'Delete Comment',\n      message: 'Are you sure you want to confirm this action?',\n      actions: [\n        { label: 'Cancel', onClick: () => (showDialog = false) },\n        {\n          label: 'Delete',\n          onClick: () => deleteComment.submit(),\n          variant: 'solid',\n        },\n      ],\n    }\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { AttachmentItem } from \"@/components\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { updateRes as updateComment } from \"@/stores/knowledgeBase\";\nimport { useUserStore } from \"@/stores/user\";\nimport { CommentActivity } from \"@/types\";\nimport {\n  dateFormat,\n  dateTooltipFormat,\n  getFontFamily,\n  isContentEmpty,\n  textEditorMenuButtons,\n  timeAgo,\n} from \"@/utils\";\nimport {\n  Avatar,\n  Dialog,\n  Dropdown,\n  TextEditor,\n  createResource,\n  toast,\n} from \"frappe-ui\";\nimport { PropType, computed, onMounted, ref } from \"vue\";\nconst authStore = useAuthStore();\nconst props = defineProps({\n  activity: {\n    type: Object as PropType<CommentActivity>,\n    required: true,\n  },\n});\nconst { getUser } = useUserStore();\n\nconst { name, creation, content, commenter, commentedBy, attachments } =\n  props.activity;\n\nconst isTicketMergedComment = computed(() => {\n  const regex = /has been merged with ticket #\\d+/;\n  return regex.test(content);\n});\n\nconst emit = defineEmits([\"update\"]);\nconst showDialog = ref(false);\nconst editable = ref(false);\nconst _content = ref(content);\n\n// HTML refs\nconst commentBoxRef = ref(null);\nconst editorRef = ref(null);\n\nfunction handleEditMode() {\n  editable.value = true;\n  editorRef.value.editor.chain().focus(\"start\");\n}\n\nfunction handleDiscard() {\n  _content.value = content;\n  editable.value = false;\n}\n\nconst deleteComment = createResource({\n  url: \"frappe.client.delete\",\n  makeParams: () => ({\n    doctype: \"HD Ticket Comment\",\n    name: name,\n  }),\n  onSuccess() {\n    emit(\"update\");\n    toast.success(\"Comment deleted\");\n  },\n});\n\nfunction handleSaveComment() {\n  if (content === _content.value) {\n    editable.value = false;\n    return;\n  }\n  if (isContentEmpty(_content.value)) {\n    toast.error(\"Comment cannot be empty\");\n    return;\n  }\n\n  updateComment.submit(\n    {\n      doctype: \"HD Ticket Comment\",\n      name: name,\n      fieldname: \"content\",\n      value: _content.value,\n    },\n    {\n      onSuccess: () => {\n        editable.value = false;\n        emit(\"update\");\n        toast.success(\"Comment updated\");\n      },\n    }\n  );\n}\n\nonMounted(() => {\n  commentBoxRef.value.style.width = \"0px\";\n});\n</script>\n","<template>\n  <div class=\"flex-1\">\n    <div\n      class=\"mt-1.5 flex justify-between text-base items-start md:items-center\"\n    >\n      <div\n        v-if=\"relatedActivities.length > 1\"\n        class=\"inline-flex flex-wrap gap-1.5 text-ink-gray-8 font-medium w-4/5\"\n      >\n        <span>{{ `${show_others ? \"Hide \" : \"Show \"}` }}</span>\n        <span>+{{ relatedActivities.length }} </span>\n        <span>changes from </span>\n        <span>{{ user }}</span>\n\n        <Button\n          class=\"!size-4\"\n          variant=\"ghost\"\n          @click=\"show_others = !show_others\"\n        >\n          <template #icon>\n            <SelectIcon />\n          </template>\n        </Button>\n      </div>\n      <div class=\"text-gray-600 w-4/6\" v-else>\n        <span class=\"font-medium text-gray-800\">\n          {{ user }}\n        </span>\n        <span> {{ content }}</span>\n      </div>\n\n      <Tooltip :text=\"dateFormat(creation, dateTooltipFormat)\">\n        <div class=\"text-gray-600 text-sm w-2/6 flex justify-end\">\n          {{ timeAgo(creation) }}\n        </div>\n      </Tooltip>\n    </div>\n    <div v-if=\"show_others\">\n      <div\n        v-for=\"relatedActivity in relatedActivities\"\n        :key=\"relatedActivity.creation\"\n        class=\"mt-2 flex justify-between text-base\"\n      >\n        <div class=\"text-gray-600 w-4/6\">\n          <span class=\"font-medium text-gray-800\">\n            {{ relatedActivity.user }}\n          </span>\n          <span> {{ relatedActivity.content }}</span>\n        </div>\n        <Tooltip\n          :text=\"dateFormat(relatedActivity.creation, dateTooltipFormat)\"\n        >\n          <div class=\"text-gray-600 text-sm w-2/6 flex justify-end\">\n            {{ timeAgo(relatedActivity.creation) }}\n          </div>\n        </Tooltip>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { SelectIcon } from \"@/components/icons\";\nimport { dateFormat, dateTooltipFormat, timeAgo } from \"@/utils\";\nimport { ref } from \"vue\";\nconst props = defineProps({\n  activity: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst { user, content, creation, relatedActivities } = props.activity;\n\nlet show_others = ref(false);\n</script>\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: 'Assign To',\n      size: 'xl',\n    }\"\n  >\n    <template #body-content>\n      <AutocompleteNew\n        v-if=\"showRestrictedMembers\"\n        placeholder=\"Search agents\"\n        :model-value=\"search\"\n        :options=\"members\"\n        @update:model-value=\"\n          ({ _, value }) => {\n            addAssignee(value);\n          }\n        \"\n      >\n        <template #item-prefix=\"{ option }\">\n          <UserAvatar class=\"mr-2\" :name=\"option.value\" size=\"sm\" />\n        </template>\n        <template #item-label=\"{ option }\">\n          <Tooltip :text=\"option.value\">\n            {{ getUser(option.value).full_name }}\n          </Tooltip>\n        </template>\n      </AutocompleteNew>\n\n      <SearchComplete\n        v-else\n        class=\"form-control\"\n        doctype=\"HD Agent\"\n        :custom-filters=\"customFilters\"\n        :reset-input=\"true\"\n        @change=\"\n          (option) => {\n            addAssignee(option.value);\n          }\n        \"\n      >\n        <template #item-prefix=\"{ option }\">\n          <UserAvatar class=\"mr-2\" :name=\"option.value\" size=\"sm\" />\n        </template>\n        <template #item-label=\"{ option }\">\n          <Tooltip :text=\"option.value\">\n            {{ getUser(option.value).full_name }}\n          </Tooltip>\n        </template>\n      </SearchComplete>\n\n      <div class=\"mt-3 flex flex-wrap items-center gap-2\">\n        <Tooltip\n          v-for=\"currentAssignee in assignees\"\n          :key=\"currentAssignee.name\"\n          :text=\"currentAssignee.name\"\n        >\n          <Button\n            :label=\"getUser(currentAssignee.name).full_name\"\n            theme=\"gray\"\n            variant=\"outline\"\n          >\n            <template #prefix>\n              <UserAvatar :name=\"currentAssignee.name\" size=\"sm\" />\n            </template>\n            <template #suffix>\n              <FeatherIcon\n                class=\"h-3.5\"\n                name=\"x\"\n                @click.stop=\"removeCurrentAssignee(currentAssignee.name)\"\n              />\n            </template>\n          </Button>\n        </Tooltip>\n      </div>\n      <ErrorMessage v-if=\"error\" class=\"mt-2\" :message=\"error\" />\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { AutocompleteNew, SearchComplete, UserAvatar } from \"@/components\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { useConfigStore } from \"@/stores/config\";\nimport { useUserStore } from \"@/stores/user\";\nimport { call, createResource } from \"frappe-ui\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { computed, onMounted, ref, watch } from \"vue\";\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    required: true,\n  },\n  docname: {\n    type: String,\n    required: true,\n  },\n  assignees: {\n    type: Array,\n    required: true,\n  },\n  team: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst show = defineModel();\n\nconst emit = defineEmits([\"update\"]);\n\nconst { getUser } = useUserStore();\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\nconst { isManager } = useAuthStore();\nconst { teamRestrictionApplied, assignWithinTeam } = useConfigStore();\n\nconst error = ref(\"\");\n\nconst addAssignee = (value) => {\n  error.value = \"\";\n  createResource({\n    url: \"frappe.desk.form.assign_to.add\",\n    auto: true,\n    params: {\n      doctype: props.doctype,\n      name: props.docname,\n      assign_to: [value],\n    },\n    onSuccess: () => {\n      emit(\"update\");\n      if (isManager) {\n        updateOnboardingStep(\"assign_to_agent\");\n      }\n      members.value = members.value.filter((m) => m.value !== value);\n    },\n  });\n  emit(\"update\");\n};\n\nconst removeCurrentAssignee = (value) => {\n  createResource({\n    url: \"frappe.desk.form.assign_to.remove\",\n    auto: true,\n    params: {\n      doctype: props.doctype,\n      name: props.docname,\n      assign_to: value,\n    },\n    onSuccess: () => {\n      emit(\"update\");\n      members.value.push({\n        label: value,\n        value: value,\n      });\n    },\n  });\n};\n\nconst customFilters = computed(() => {\n  const filters = {};\n  filters[\"is_active\"] = [\"=\", 1];\n  if (Boolean(props.assignees?.length)) {\n    filters[\"name\"] = [\"not in\", [...props.assignees.map((a) => a.name)]];\n  }\n  return filters;\n});\n\nconst search = ref(\"\");\nconst members = ref([]);\nasync function getMembers() {\n  let teamMembers = await call(\n    \"helpdesk.helpdesk.doctype.hd_team.hd_team.get_team_members\",\n    {\n      team: props.team,\n    }\n  );\n  let assignedMembers = props.assignees.map((a) => a.name);\n  teamMembers = teamMembers.filter((member: string) => {\n    return !assignedMembers.includes(member);\n  });\n\n  members.value = teamMembers.map((member: string) => {\n    return {\n      label: member,\n      value: member,\n    };\n  });\n}\n\nconst showRestrictedMembers = computed(() => {\n  return teamRestrictionApplied && assignWithinTeam && props.team;\n});\n\nonMounted(() => {\n  if (showRestrictedMembers.value) {\n    getMembers();\n  }\n});\n</script>\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: 'Canned Responses',\n      size: '4xl',\n    }\"\n  >\n    <template #body-content>\n      <TextInput\n        ref=\"searchInput\"\n        v-model=\"search\"\n        type=\"text\"\n        :placeholder=\"'Site Down'\"\n      >\n        <template #prefix>\n          <FeatherIcon name=\"search\" class=\"h-4 w-4 text-gray-500\" />\n        </template>\n      </TextInput>\n      <div\n        v-if=\"filteredTemplates.length\"\n        class=\"mt-2 grid max-h-[560px] grid-cols-1 md:grid-cols-3 gap-2 overflow-y-auto\"\n      >\n        <div\n          v-for=\"template in filteredTemplates\"\n          :key=\"template.name\"\n          class=\"flex h-56 cursor-pointer flex-col gap-2 rounded-lg border p-3 hover:bg-gray-100\"\n          @click=\"emit('apply', template)\"\n        >\n          <div class=\"border-b pb-2 text-base font-semibold\">\n            {{ template.title }}\n          </div>\n          <TextEditor\n            v-if=\"template.message\"\n            :content=\"template.message\"\n            :editable=\"false\"\n            editor-class=\"!prose-sm max-w-none !text-sm text-gray-600 focus:outline-none\"\n            class=\"flex-1 overflow-hidden\"\n          />\n        </div>\n      </div>\n      <div v-else class=\"mt-2\">\n        <div class=\"flex h-56 flex-col items-center justify-center\">\n          <div class=\"text-lg text-gray-500\">\n            {{ \"No templates found\" }}\n          </div>\n        </div>\n      </div>\n      <div class=\"flex justify-end mt-4\">\n        <Button\n          label=\"New Canned Response\"\n          @click=\"\n            () => {\n              $router.push('/canned-responses#new');\n              templates.data = null;\n            }\n          \"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport { TextEditor, createListResource } from \"frappe-ui\";\nimport { ref, computed, nextTick, watch, onMounted } from \"vue\";\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst show = defineModel();\nconst searchInput = ref(\"\");\n\nconst emit = defineEmits([\"apply\"]);\n\nconst search = ref(\"\");\n\nconst templates = createListResource({\n  type: \"list\",\n  doctype: \"HD Canned Response\",\n  cache: [\"cannedResponses\", props.doctype],\n  fields: [\"title\", \"message\", \"modified\"],\n  orderBy: \"modified desc\",\n  pageLength: 99999,\n});\n\nonMounted(() => {\n  if (templates.data == null) {\n    templates.fetch();\n  }\n});\n\nconst filteredTemplates = computed(() => {\n  return (\n    templates.data?.filter((template) => {\n      return template.title.toLowerCase().includes(search.value.toLowerCase());\n    }) ?? []\n  );\n});\n\nwatch(show, (value) => value && nextTick(() => searchInput.value?.el?.focus()));\n</script>\n","<template>\n  <div class=\"flex items-center justify-start gap-5 border-b p-5\">\n    <Avatar size=\"3xl\" :image=\"contact.image\" :label=\"contact.name\" />\n    <div class=\"flex items-center justify-between flex-1\">\n      <Tooltip :text=\"contact.name\">\n        <div class=\"w-[242px] truncate text-2xl font-medium\">\n          {{ contact.name }}\n        </div>\n      </Tooltip>\n      <div class=\"flex gap-1.5\">\n        <Tooltip :text=\"contact.email_id\">\n          <Button class=\"h-7 w-7\">\n            <template #icon>\n              <EmailIcon class=\"h-4 w-4\" @click=\"openEmailBox()\" />\n            </template>\n          </Button>\n        </Tooltip>\n        <!-- <RouterLink\n          class=\"group cursor-pointer space-x-1 hover:text-gray-900\"\n          :to=\"{\n            name: 'TicketsAgent',\n          }\"\n          target=\"_blank\"\n        >\n          <Button\n            class=\"h-7 w-7\"\n            @click=\"\n              () => {\n                console.log('Show Contact Tickets');\n              }\n            \"\n          >\n            <Tooltip text=\"Show Contact Tickets\">\n              <TicketIcon class=\"h-4 w-4\" />\n            </Tooltip>\n          </Button>\n        </RouterLink> -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { EmailIcon } from \"@/components/icons/\";\nimport { Avatar, Tooltip } from \"frappe-ui\";\n\nconst props = defineProps({\n  contact: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst emit = defineEmits([\"email:open\"]);\n\nfunction openEmailBox() {\n  emit(\"email:open\", props.contact.email_id);\n}\n</script>\n","<template>\n  <div\n    class=\"md:mx-10 md:my-4 flex items-center justify-between text-lg font-medium mx-6 mb-4 !mt-8\"\n  >\n    <div class=\"flex h-8 items-center text-xl font-semibold text-gray-800\">\n      {{ title }}\n    </div>\n    <Button\n      v-if=\"title == 'Emails'\"\n      variant=\"solid\"\n      @click=\"communicationAreaRef.toggleEmailBox()\"\n    >\n      <template #prefix>\n        <FeatherIcon name=\"plus\" class=\"h-4 w-4\" />\n      </template>\n      <span>{{ \"New Email\" }}</span>\n    </Button>\n    <Button\n      v-else-if=\"title == 'Comments'\"\n      variant=\"solid\"\n      @click=\"communicationAreaRef.toggleCommentBox()\"\n    >\n      <template #prefix>\n        <FeatherIcon name=\"plus\" class=\"h-4 w-4\" />\n      </template>\n      <span>{{ \"New Comment\" }}</span>\n    </Button>\n    <Dropdown v-else :options=\"defaultActions\" @click.stop>\n      <template v-slot=\"{ open }\">\n        <Button variant=\"solid\" class=\"flex items-center gap-1\">\n          <template #prefix>\n            <FeatherIcon name=\"plus\" class=\"h-4 w-4\" />\n          </template>\n          <span>{{ \"New\" }}</span>\n          <template #suffix>\n            <FeatherIcon\n              :name=\"open ? 'chevron-up' : 'chevron-down'\"\n              class=\"h-4 w-4\"\n            />\n          </template>\n        </Button>\n      </template>\n    </Dropdown>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { CommentIcon, EmailIcon } from \"@/components/icons\";\nimport { Dropdown } from \"frappe-ui\";\nimport { computed, h, inject, Ref } from \"vue\";\ndefineProps({\n  title: {\n    type: String,\n    required: true,\n  },\n});\n\nconst communicationAreaRef: Ref = inject(\"communicationArea\");\n\nconst defaultActions = computed(() => {\n  let actions = [\n    {\n      icon: h(EmailIcon, { class: \"h-4 w-4\" }),\n      label: \"Email\",\n      onClick: () => communicationAreaRef.value.toggleEmailBox(),\n    },\n    {\n      icon: h(CommentIcon, { class: \"h-4 w-4\" }),\n      label: \"Comment\",\n      onClick: () => communicationAreaRef.value.toggleCommentBox(),\n    },\n  ];\n  return actions;\n});\n</script>\n\n<style scoped></style>\n","<template>\n  <ActivityHeader :title=\"title\" />\n  <FadedScrollableDiv class=\"flex flex-col flex-1 overflow-y-scroll\">\n    <div v-if=\"activities.length\" class=\"activities flex-1 h-full mt-1\">\n      <div\n        v-for=\"(activity, i) in activities\"\n        :key=\"activity.key\"\n        class=\"activity\"\n      >\n        <!-- single activity -->\n        <div\n          class=\"w-full px-6 md:px-10 grid grid-cols-[30px_minmax(auto,_1fr)] gap-2 sm:gap-4\"\n        >\n          <div\n            class=\"relative flex justify-center after:absolute after:left-[50%] after:top-2 after:-z-10 after:border-l after:border-gray-200\"\n            :class=\"[i != activities.length - 1 ? 'after:h-full' : 'after:h-4']\"\n          >\n            <div\n              class=\"z-10 flex h-7 w-7 items-center justify-center rounded-full bg-white\"\n              :class=\"[activity.type === 'email' && 'mt-2']\"\n            >\n              <Avatar\n                v-if=\"activity.type === 'email'\"\n                size=\"lg\"\n                :label=\"activity.sender?.full_name\"\n                :image=\"getUser(activity.sender?.name).user_image\"\n                class=\"bg-white absolute left-[1px]\"\n              />\n              <CommentIcon\n                v-else-if=\"activity.type === 'comment'\"\n                class=\"text-gray-600 absolute left-[7.5px]\"\n              />\n              <DotIcon v-else class=\"text-gray-600 absolute left-[7.5px]\" />\n            </div>\n          </div>\n          <div\n            class=\"mb-4 flex flex-1\"\n            :class=\"[i == activities.length - 1 && 'mb-5']\"\n          >\n            <EmailArea\n              v-if=\"activity.type === 'email'\"\n              :activity=\"activity\"\n              :show-split-option=\"\n                !activity.isFirstEmail && ticketStatus !== 'Closed'\n              \"\n              class=\"py-2 px-3\"\n              @reply=\"(e) => emit('email:reply', e)\"\n            />\n            <CommentBox\n              v-else-if=\"activity.type === 'comment'\"\n              :activity=\"activity\"\n              @update=\"() => emit('update')\"\n            />\n            <HistoryBox v-else :activity=\"activity\" />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      v-else\n      class=\"h-full flex flex-col items-center justify-center gap-3 text-xl font-medium text-gray-500\"\n    >\n      <component :is=\"emptyTextIcon\" class=\"h-10 w-10\" />\n      <span>{{ emptyText }}</span>\n      <Button\n        v-if=\"title == 'Emails'\"\n        label=\"New Email\"\n        @click=\"communicationAreaRef.toggleEmailBox()\"\n      />\n      <Button\n        v-else-if=\"title == 'Comments'\"\n        label=\"New Comment\"\n        @click=\"communicationAreaRef.toggleCommentBox()\"\n      />\n    </div>\n  </FadedScrollableDiv>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  CommentBox,\n  EmailArea,\n  FadedScrollableDiv,\n  HistoryBox,\n} from \"@/components\";\nimport {\n  ActivityIcon,\n  CommentIcon,\n  DotIcon,\n  EmailIcon,\n} from \"@/components/icons\";\nimport { useUserStore } from \"@/stores/user\";\nimport { TicketActivity } from \"@/types\";\nimport { useElementVisibility } from \"@vueuse/core\";\nimport { Avatar } from \"frappe-ui\";\nimport { PropType, Ref, computed, h, inject, onMounted, watch } from \"vue\";\nconst props = defineProps({\n  activities: {\n    type: Array as PropType<TicketActivity[]>,\n    required: true,\n  },\n  title: {\n    type: String,\n    required: true,\n  },\n  ticketStatus: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst emit = defineEmits([\"email:reply\", \"update\"]);\n\nconst { getUser } = useUserStore();\nconst communicationAreaRef: Ref = inject(\"communicationArea\");\n\nconst emptyText = computed(() => {\n  let text = \"No Activities\";\n  if (props.title == \"Emails\") {\n    text = \"No Email Communications\";\n  } else if (props.title == \"Comments\") {\n    text = \"No Comments\";\n    return text;\n  }\n});\n\nconst emptyTextIcon = computed(() => {\n  let icon = ActivityIcon;\n  if (props.title == \"Emails\") {\n    icon = EmailIcon;\n  } else if (props.title == \"Comments\") {\n    icon = CommentIcon;\n  }\n  return h(icon, { class: \"text-gray-500\" });\n});\n\nfunction scrollToLatestActivity() {\n  setTimeout(() => {\n    let el;\n    let e = document.getElementsByClassName(\"activity\");\n    el = e[e.length - 1];\n    if (el && !useElementVisibility(el).value) {\n      el.scrollIntoView();\n      el.focus();\n    }\n  }, 500);\n}\n\ndefineExpose({\n  scrollToLatestActivity,\n});\n\nonMounted(() => {\n  scrollToLatestActivity();\n});\n\nwatch(\n  () => props.title,\n  () => {\n    scrollToLatestActivity();\n  }\n);\n</script>\n","<template>\n  <div class=\"flex flex-col gap-3 border-b px-6 py-3\">\n    <div\n      v-for=\"s in sections\"\n      :key=\"s.label\"\n      class=\"flex items-center text-base leading-5\"\n    >\n      <Tooltip :text=\"s.label\">\n        <div class=\"w-[126px] text-sm text-gray-600\">{{ s.label }}</div>\n      </Tooltip>\n      <div class=\"flex items-center justify-between\">\n        <div v-if=\"s.value\">{{ s.value }}</div>\n        <Tooltip :text=\"s.tooltipValue\">\n          <Badge\n            v-if=\"s.badgeText\"\n            class=\"-ml-1\"\n            :label=\"s.badgeText\"\n            variant=\"subtle\"\n            :theme=\"s.badgeColor\"\n          />\n        </Tooltip>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { dayjs } from \"@/dayjs\";\nimport {\n  dateFormat,\n  dateTooltipFormat,\n  formatTime,\n  getTimeInSeconds,\n} from \"@/utils\";\nimport { Badge, Tooltip } from \"frappe-ui\";\nimport { computed, onUnmounted, ref, watch } from \"vue\";\n\nconst props = defineProps({\n  ticket: {\n    type: Object,\n    required: true,\n  },\n});\n\nlet firstResponseInterval = null;\nlet resolutionInterval = null;\n\nconst firstResponseSeconds = ref(0);\nconst resolutionSeconds = ref(0);\n\nconst firstResponseBadge = computed(() => {\n  let firstResponse = null;\n  if (\n    !props.ticket.first_responded_on &&\n    dayjs().isBefore(dayjs(props.ticket.response_by))\n  ) {\n    let responseBy = formatTime(\n      dayjs(props.ticket.response_by).diff(dayjs(), \"s\")\n    );\n    if (firstResponseInterval) {\n      clearInterval(firstResponseInterval);\n      firstResponseInterval = null;\n    }\n    handleFirstResponseInterval(responseBy);\n    firstResponse = {\n      label: `Due in ${formatTime(firstResponseSeconds.value)}`,\n      color: \"orange\",\n    };\n  } else if (\n    dayjs(props.ticket.first_responded_on).isBefore(\n      dayjs(props.ticket.response_by)\n    )\n  ) {\n    firstResponse = {\n      label: `Fulfilled in ${formatTime(\n        dayjs(props.ticket.first_responded_on).diff(\n          dayjs(props.ticket.creation),\n          \"s\"\n        )\n      )}`,\n      color: \"green\",\n    };\n  } else {\n    firstResponse = {\n      label: \"Failed\",\n      color: \"red\",\n    };\n  }\n  return firstResponse;\n});\n\nconst resolutionBadge = computed(() => {\n  let resolution = null;\n  if (resolutionInterval) {\n    clearInterval(resolutionInterval);\n  }\n  if (\n    props.ticket.status === \"Replied\" &&\n    props.ticket.on_hold_since &&\n    dayjs(props.ticket.resolution_by).isAfter(dayjs(props.ticket.on_hold_since))\n  ) {\n    let timeLeft = dayjs(props.ticket.resolution_by).diff(dayjs(), \"s\");\n    resolution = {\n      label: `${formatTime(timeLeft)} left (On Hold)`,\n      color: \"blue\",\n    };\n  } else if (\n    !props.ticket.resolution_date &&\n    dayjs().isBefore(props.ticket.resolution_by)\n  ) {\n    let resolutionBy = formatTime(\n      dayjs(props.ticket.resolution_by).diff(dayjs(), \"s\")\n    );\n    handleResolutionInterval(resolutionBy);\n\n    resolution = {\n      label: `Due in ${formatTime(resolutionSeconds.value)}`,\n      color: \"orange\",\n    };\n  } else if (\n    dayjs(props.ticket.resolution_date).isBefore(props.ticket.resolution_by)\n  ) {\n    resolution = {\n      label: `Fulfilled in ${formatTime(\n        dayjs(props.ticket.resolution_date).diff(\n          dayjs(props.ticket.creation),\n          \"s\"\n        )\n      )}`,\n      color: \"green\",\n    };\n  } else {\n    resolution = {\n      label: \"Failed\",\n      color: \"red\",\n    };\n  }\n  return resolution;\n});\n\nfunction getCalculatedResolution() {\n  let resolution = dayjs(props.ticket.resolution_by).add(\n    props.ticket.total_hold_time,\n    \"s\"\n  );\n  // let now = new Date()\n  resolution = dayjs(resolution).diff(dayjs(), \"s\");\n  return formatTime(resolution);\n}\n\nconst sections = computed(() => [\n  {\n    label: \"First Response\",\n    tooltipValue: dateFormat(\n      props.ticket.first_responded_on || props.ticket.response_by,\n      dateTooltipFormat\n    ),\n    badgeText: firstResponseBadge.value.label,\n    badgeColor: firstResponseBadge.value.color,\n  },\n  {\n    label: \"Resolution\",\n    tooltipValue: dateFormat(\n      props.ticket.resolution_date || props.ticket.resolution_by,\n      dateTooltipFormat\n    ),\n    badgeText: resolutionBadge.value.label,\n    badgeColor: resolutionBadge.value.color,\n  },\n  {\n    label: \"Source\",\n    value: props.ticket.via_customer_portal ? \"Portal\" : \"Mail\",\n  },\n]);\n\n// Watch for status changes and clear intervals\nwatch(\n  () => props.ticket.status,\n  (newStatus: string) => {\n    if (newStatus !== \"Open\") {\n      if (firstResponseInterval) {\n        clearInterval(firstResponseInterval);\n        firstResponseInterval = null;\n      }\n      if (resolutionInterval) {\n        clearInterval(resolutionInterval);\n        resolutionInterval = null;\n      }\n    }\n  },\n  { deep: true, immediate: true }\n);\n\nfunction handleFirstResponseInterval(time: string) {\n  if (!time) return;\n  if (props.ticket.status !== \"Open\") {\n    return;\n  }\n  firstResponseSeconds.value = getTimeInSeconds(time);\n  firstResponseInterval = setInterval(() => {\n    if (firstResponseSeconds.value <= 0) {\n      clearInterval(firstResponseInterval);\n      return;\n    }\n    firstResponseSeconds.value--;\n  }, 1000);\n}\n\nfunction handleResolutionInterval(time: string) {\n  if (!time) return;\n  if (props.ticket.status !== \"Open\") {\n    return;\n  }\n\n  resolutionSeconds.value = getTimeInSeconds(time);\n  resolutionInterval = setInterval(() => {\n    if (resolutionSeconds.value <= 0) {\n      clearInterval(resolutionInterval);\n      return;\n    }\n    resolutionSeconds.value--;\n  }, 1000);\n}\n\nonUnmounted(() => {\n  if (firstResponseInterval) {\n    clearInterval(firstResponseInterval);\n  }\n  if (resolutionInterval) {\n    clearInterval(resolutionInterval);\n  }\n  firstResponseInterval = null;\n  resolutionInterval = null;\n});\n</script>\n","<template>\n  <div class=\"flex gap-2 px-6 pb-1 leading-5 first:mt-3 items-baseline\">\n    <Tooltip :text=\"field.label\">\n      <div class=\"w-[106px] shrink-0 truncate text-sm text-gray-600\">\n        {{ field.label }}\n        <span v-if=\"field.required\" class=\"text-red-500\"> * </span>\n      </div>\n    </Tooltip>\n    <div\n      class=\"-m-0.5 min-h-[28px] flex-1 items-center overflow-hidden p-0.5 text-base\"\n    >\n      <component\n        :is=\"component\"\n        :key=\"field.fieldname\"\n        class=\"form-control\"\n        :placeholder=\"`Add ${field.label}`\"\n        :model-value=\"transValue\"\n        autocomplete=\"off\"\n        v-on=\"\n          textFields.includes(field.fieldtype)\n            ? {\n                blur: (event) => {\n                  emitUpdate(field.fieldname, event.target.value);\n                },\n              }\n            : {\n                'update:model-value': (event) => {\n                  emitUpdate(\n                    field.fieldname,\n                    event?.value || event?.target?.value || event\n                  );\n                },\n              }\n        \"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Autocomplete, Link } from \"@/components\";\nimport { Field, FieldValue } from \"@/types\";\nimport { createResource, FormControl, Tooltip } from \"frappe-ui\";\nimport { computed, h } from \"vue\";\n\ninterface P {\n  field: Field;\n  value: FieldValue;\n}\n\ninterface R {\n  fieldname: Field[\"fieldname\"];\n  value: FieldValue;\n}\n\ninterface E {\n  (event: \"change\", value: R);\n}\n\nconst props = defineProps<P>();\nconst emit = defineEmits<E>();\n\nconst textFields = [\"Long Text\", \"Small Text\", \"Text\", \"Text Editor\", \"Data\"];\n\nconst component = computed(() => {\n  if (props.field.url_method) {\n    return h(Autocomplete, {\n      options: apiOptions.data,\n    });\n  } else if (props.field.fieldtype === \"Link\" && props.field.options) {\n    return h(Link, {\n      doctype: props.field.options,\n      hideMe: true,\n    });\n  } else if (props.field.fieldtype === \"Select\") {\n    return h(Autocomplete, {\n      options: props.field.options\n        .split(\"\\n\")\n        .map((o) => ({ label: o, value: o })),\n    });\n  } else if (props.field.fieldtype === \"Check\") {\n    return h(Autocomplete, {\n      options: [\n        {\n          label: \"Yes\",\n          value: 1,\n        },\n        {\n          label: \"No\",\n          value: 0,\n        },\n      ],\n    });\n  } else if (textFields.includes(props.field.fieldtype)) {\n    return h(FormControl, {\n      type: \"textarea\",\n    });\n  } else {\n    return h(FormControl);\n  }\n});\n\nconst apiOptions = createResource({\n  url: props.field.url_method,\n  auto: !!props.field.url_method,\n  transform: (data) => {\n    if (!data?.length) return [];\n    return (\n      data?.map((o) => ({\n        label: o,\n        value: o,\n      })) || []\n    );\n  },\n});\n\nconst transValue = computed(() => {\n  if (props.field.fieldtype === \"Check\") {\n    return props.value ? \"Yes\" : \"No\";\n  }\n  return props.value;\n});\n\nfunction emitUpdate(fieldname: Field[\"fieldname\"], value: FieldValue) {\n  emit(\"change\", { fieldname, value });\n}\n</script>\n<style scoped>\n:deep(.form-control input:not([type=\"checkbox\"])),\n:deep(.form-control select),\n:deep(.form-control textarea),\n:deep(.form-control button) {\n  border-color: transparent;\n  background: white;\n}\n\n:deep(.form-control button) {\n  gap: 0;\n}\n:deep(.form-control [type=\"checkbox\"]) {\n  margin-left: 9px;\n  cursor: pointer;\n}\n\n:deep(.form-control button > div) {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n:deep(.form-control button svg) {\n  color: white;\n  width: 0;\n}\n</style>\n","<template>\n  <div class=\"flex flex-1 flex-col overflow-hidden overflow-y-auto border-b\">\n    <UniInput2\n      v-for=\"field in fields\"\n      :key=\"field.fieldname\"\n      :field=\"field\"\n      :value=\"ticket[field.fieldname]\"\n      @change=\"(data) => update(data.fieldname, data.value)\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Field, FieldValue } from \"@/types\";\nimport { toast } from \"frappe-ui\";\nimport { computed } from \"vue\";\nimport UniInput2 from \"../UniInput2.vue\";\nconst emit = defineEmits([\"update\"]);\n\nconst props = defineProps({\n  ticket: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst fields = computed(() => {\n  return props.ticket.fields;\n});\n\nfunction update(field: Field[\"fieldname\"], value: FieldValue, event = null) {\n  if (field === \"subject\" && value === \"\") {\n    toast.error(\"Subject is required\");\n    event.target.value = props.ticket.subject;\n    return;\n  }\n  emit(\"update\", { field, value });\n}\n</script>\n<style scoped>\n:deep(.form-control input:not([type=\"checkbox\"])),\n:deep(.form-control select),\n:deep(.form-control textarea),\n:deep(.form-control button) {\n  border-color: transparent;\n  background: white;\n}\n:deep(.form-control textarea) {\n  field-sizing: content;\n}\n\n:deep(.form-control button) {\n  gap: 0;\n}\n:deep(.form-control [type=\"checkbox\"]) {\n  margin-left: 9px;\n  cursor: pointer;\n}\n\n:deep(.form-control button > div) {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n:deep(.form-control button svg) {\n  color: white;\n  width: 0;\n}\n</style>\n"],"names":["d","i","f","m","F","l","o","e","a","r","u","te","s","le","U","C","b","j","G","me","L","E","P","p","v","R","y","t","c","n","k","I","H","h","W","O","N","T","x","w","_","J","A","z","V","M","ee","pe","xe","$","K","B","Z","S","D","g","Y","Q","Ie","ye","X","q","inject","tabRef","ref","indicator","tabsLength","computed","_a","transitionClass","moveIndicator","index","selectedTab","watch","nextTick","onMounted","_createBlock","_unref","TabList","_openBlock","_createElementBlock","_Fragment","tab","Tab","_withCtx","selected","_renderSlot","_ctx","_mergeProps","_createElementVNode","_resolveDynamicComponent","_toDisplayString","TabPanels","TabPanel","props","__props","tabIndex","_useModel","provide","_cache","idx","_createVNode","_normalizeProps","_guardReactiveProps","emit","__emit","createListResource","selection","options","result","onUpdateQuery","query","Autocomplete","_hoisted_1","_sfc_render","editorRef","showCannedResponseSelectorModal","label","sendMail","doc","newEmail","useStorage","updateOnboardingStep","useOnboarding","isManager","useAuthStore","attachments","emailEmpty","isContentEmpty","toEmailsClone","ccEmailsClone","bccEmailsClone","showCC","showBCC","cc","bcc","ccInput","bccInput","applyCannedResponse","template","createResource","_b","resetState","submitMail","toast","toggleCC","toggleBCC","removeAttachment","attachment","removeAttachmentFromServer","addToReply","body","toEmails","ccEmails","bccEmails","handleDiscard","editor","__expose","TextEditor","getFontFamily","$event","PreserveVideoControls","file","uploadFunction","MultiSelectInput","validateEmail","value","_component_Button","_normalizeClass","_hoisted_2","_renderList","AttachmentItem","_component_FeatherIcon","_withModifiers","_hoisted_3","_hoisted_4","_hoisted_5","FileUploader","openFileSelector","AttachmentIcon","EmailIcon","TextEditorFixedMenu","textEditorMenuButtons","_hoisted_6","CannedResponseSelectorModal","useAgentStore","defineStore","agents","dropdown","searchAgents","agentsList","newComment","commentEmpty","loading","agent","submitComment","values","emails","search","error","text","showOptions","selectedValue","val","addValue","watchDebounced","reload","filterOptions","data","full_name","email_id","name","searchedContacts","removeValue","removeLastValue","emailRef","setFocus","Combobox","Popover","togglePopover","ComboboxInput","isOpen","ComboboxOptions","option","ComboboxOption","active","UserAvatar","_component_ErrorMessage","content","isMac","useDevice","isMobileView","useScreenSize","emailEditorRef","commentTextEditorRef","toggleEmailBox","showCommentBox","showEmailBox","toggleCommentBox","submitEmail","replyToEmail","_c","CommentIcon","EmailEditor","CommentTextEditor","showDialog","subject","splitTicket","communication_id","newTicket","handleTicketSplit","Dialog","_component_FormControl","TriangleAlert","LucideSplit","sender","to","creation","deliveryStatus","showSplitModal","status","_status","indicator_color","_component_Tooltip","dateFormat","dateTooltipFormat","timeAgo","_hoisted_7","_component_Badge","__","_hoisted_8","ReplyIcon","ReplyAllIcon","Dropdown","_hoisted_9","_hoisted_10","_hoisted_13","_hoisted_16","_component_EmailContent","_hoisted_18","TicketSplitModal","authStore","getUser","useUserStore","commenter","commentedBy","isTicketMergedComment","editable","_content","commentBoxRef","handleEditMode","deleteComment","handleSaveComment","updateComment","Avatar","event","user","relatedActivities","show_others","_isRef","SelectIcon","relatedActivity","show","teamRestrictionApplied","assignWithinTeam","useConfigStore","addAssignee","members","removeCurrentAssignee","customFilters","filters","getMembers","teamMembers","call","assignedMembers","member","showRestrictedMembers","_component_Dialog","AutocompleteNew","_createTextVNode","SearchComplete","currentAssignee","searchInput","templates","filteredTemplates","_component_TextInput","$router","openEmailBox","Tooltip","communicationAreaRef","defaultActions","open","emptyText","emptyTextIcon","icon","ActivityIcon","scrollToLatestActivity","el","useElementVisibility","_component_ActivityHeader","FadedScrollableDiv","activity","DotIcon","EmailArea","CommentBox","HistoryBox","firstResponseInterval","resolutionInterval","firstResponseSeconds","resolutionSeconds","firstResponseBadge","firstResponse","dayjs","responseBy","formatTime","handleFirstResponseInterval","resolutionBadge","resolution","timeLeft","resolutionBy","handleResolutionInterval","sections","newStatus","time","getTimeInSeconds","onUnmounted","Badge","textFields","component","apiOptions","Link","FormControl","transValue","emitUpdate","fieldname","field","_toHandlers","fields","update","UniInput2"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}