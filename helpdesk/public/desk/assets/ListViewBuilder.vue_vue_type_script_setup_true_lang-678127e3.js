import{ae as Q,e as t,k as w,C as T,l as m,t as J,h as e,f as k,a1 as me,aP as je,y as N,A as te,c as M,b6 as Xe,D as ve,E as ye,x as ce,z as he,b7 as Be,F as le,G as ie,b8 as Ee,v as de,g as v,w as _,L as et,j as pe,s as tt,b9 as kt,aT as xt,p as Ae,a3 as qe,Z as Ie,r as fe,ba as Ct,aA as $t,aE as Vt,ao as lt,bb as St,U as Oe,b as st,aJ as $e,$ as ue,I as X,bc as ze,bd as Lt,be as Rt,bf as At,N as jt,bg as qt,bh as Ft,bi as Dt,d as Nt,q as Mt,u as It,a as zt,aR as Bt,Y as Et,Q as Ot,W as Le,ap as Tt,M as Ht,O as Ut,R as Pt,bj as Wt,bk as Kt}from"./index-62a62e6e.js";import{_ as ot}from"./Dropdown.vue_vue_type_script_setup_true_lang-8f31c9b1.js";import{T as Zt,G as Gt,j as Jt,y as Qt,_ as nt,a as at,D as it}from"./NestedPopover-3f769b77.js";import{S as Yt,D as Xt,i as el,u as tl,v as Me,c as Re}from"./more-horizontal-44c34a82.js";import"./dayjs-23c9994e.js";import{_ as rt}from"./StarRating.vue_vue_type_script_setup_true_lang-af2bc1e1.js";import"./knowledgeBase-e21cae7f.js";import{a as ll,_ as sl}from"./FadedScrollableDiv.vue_vue_type_script_setup_true_lang-009f88f9.js";import{_ as ol}from"./DateRangePicker.vue_vue_type_script_setup_true_lang-4c092d39.js";import{a as we,_ as ut}from"./Link-2b0a1c2c.js";import{g as nl}from"./globalStore-353b4b5d.js";import{_ as al}from"./EmptyState.vue_vue_type_script_setup_true_lang-93e50375.js";const il={class:"flex h-full w-full flex-col items-center justify-center text-base"},rl={class:"text-xl font-medium"},ul={class:"mt-1 text-base text-ink-gray-5"},cl={__name:"ListEmptyState",setup(o){const s=Q("list");return(l,a)=>(t(),w("div",il,[T(l.$slots,"default",{},()=>[m("div",rl,J(e(s).options.emptyState.title),1),m("div",ul,J(e(s).options.emptyState.description),1),e(s).options.emptyState.button?(t(),k(e(je),me({key:0},e(s).options.emptyState.button,{class:"mt-4"}),null,16)):N("",!0)])]))}};function ct(o,s=!0){let l=s?"14px ":"",a=o.map(h=>{let i=h.width||1;return typeof i=="number"?i+"fr":i}).join(" ");return l+a}const Te={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},dl={class:"truncate"},dt={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(o,{emit:s}){const l=o,a=s,h=te(null),i=te(null),u=M(()=>{if(typeof l.item.width=="string"){const d=parseInt(l.item.width);if(l.item.width.includes("rem"))return d*16;if(l.item.width.includes("px"))return d}return i.value.offsetWidth}),c=d=>{const b=d.clientX,p=u.value,S=f=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),h.value.style.backgroundColor="rgb(199 199 199)";let I=p+(f.clientX-b);l.item.width=`${I<50?50:I}px`,y(l.item.width)},C=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),h.value.style.backgroundColor="",window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",C)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",C)},y=Xe(d=>{l.item.width=d,a("columnWidthUpdated")},l.debounce),R=Q("list");return(d,b)=>(t(),w("div",{ref_key:"columnRef",ref:i,class:ce(["group relative flex items-center",o.item.align?e(Te)[o.item.align]:"justify-between"])},[m("div",{class:ce(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",d.$attrs.class])},[T(d.$slots,"prefix",ve(ye({item:o.item}))),T(d.$slots,"default",{},()=>[m("div",dl,J(o.item.label),1)]),T(d.$slots,"suffix",ve(ye({item:o.item})))],2),e(R).options.resizeColumn?T(d.$slots,"resizer",ve(me({key:0},{item:o.item})),()=>[m("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:c},[m("div",{ref_key:"resizer",ref:h,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):N("",!0)],2))}},ft={__name:"ListHeader",emits:["columnWidthUpdated"],setup(o,{emit:s}){const l=s,a=Q("list");return(h,i)=>(t(),w("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Ee({gridTemplateColumns:e(ct)(e(a).columns,e(a).options.selectable)})},[e(a).options.selectable?(t(),k(Be,{key:0,class:"cursor-pointer duration-300",modelValue:e(a).allRowsSelected,onClick:he(e(a).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):N("",!0),T(h.$slots,"default",{},()=>[(t(!0),w(le,null,ie(e(a).columns,u=>(t(),k(dt,{key:u.key,item:u,onColumnWidthUpdated:c=>l("columnWidthUpdated",u)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},fl={class:"truncate text-base"},pt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(o){const s=o,l=M(()=>{var u,c;return(u=s.column)!=null&&u.getLabel?(c=s.column)==null?void 0:c.getLabel({row:s.row}):h(s.item).label||""}),a=M(()=>i.value.options.showTooltip?s.column.getTooltip?s.column.getTooltip(s.row):h(s.item).label:"");function h(u){return u&&typeof u=="object"?u:{label:u}}const i=Q("list");return(u,c)=>(t(),w("div",{class:ce(["flex items-center space-x-2",e(Te)[o.align]])},[T(u.$slots,"prefix",{},()=>[o.column.prefix?(t(),k(de(typeof o.column.prefix=="function"?o.column.prefix({row:o.row}):o.column.prefix),{key:0})):N("",!0)]),v(e(et),ve(ye(e(i).options.showTooltip?{text:a.value}:{text:""})),{default:_(()=>[T(u.$slots,"default",ve(ye({label:l.value})),()=>[m("div",fl,J(l.value),1)])]),_:3},16),T(u.$slots,"suffix")],2))}},Fe={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(o){const s=o,l=Q("list"),a=M(()=>{var d;return(d=l.value.rows)!=null&&d.length?l.value.rows[l.value.rows.length-1][l.value.rowKey]===s.row[l.value.rowKey]:!1}),h=M(()=>l.value.selections.has(s.row[l.value.rowKey])),i=M(()=>l.value.options.enableActive&&l.value.activeRow.value===s.row.name),u=M(()=>l.value.options.getRowRoute||l.value.options.onRowClick),c=M(()=>typeof l.value.options.rowHeight=="number"?`${l.value.options.rowHeight}px`:l.value.options.rowHeight),y=M(()=>{var p,S,C;if(!h.value)return"rounded";const d=[...l.value.selections];let b=(p=l.value.rows[0])!=null&&p.group?l.value.rows.map(f=>f.rows):[l.value.rows];for(let f of b){let I=f.findIndex(q=>q==s.row);if(I===-1)continue;let j=!d.includes((S=f[I+1])==null?void 0:S.name),$=!d.includes((C=f[I-1])==null?void 0:C.name);return(j?"rounded-b ":"")+($?"rounded-t":"")}}),R=(d,b)=>{l.value.options.onRowClick&&l.value.options.onRowClick(d,b),l.value.activeRow.value===d.name?l.value.activeRow.value=null:l.value.activeRow.value=d.name};return(d,b)=>(t(),k(de(e(l).options.getRowRoute?"router-link":"div"),me({class:[[y.value,h.value||i.value?"bg-surface-gray-2":"",u.value?"cursor-pointer":"",u.value?h.value||i.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:e(l).options.getRowRoute?e(l).options.getRowRoute(o.row):void 0,onClick:p=>R(o.row,p)}),{default:_(()=>[(t(),k(de(e(l).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:_(()=>{var p,S;return[m("div",{class:"grid items-center space-x-4 px-2",style:Ee({height:c.value,gridTemplateColumns:e(ct)(e(l).columns,e(l).options.selectable)})},[e(l).options.selectable?(t(),w("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:b[1]||(b[1]=he(()=>{},["stop","prevent"])),onDblclick:b[2]||(b[2]=he(()=>{},["stop"]))},[v(Be,{modelValue:h.value,class:"cursor-pointer duration-300",onClick:b[0]||(b[0]=he(C=>e(l).toggleRow(o.row[e(l).rowKey]),["stop"]))},null,8,["modelValue"])],32)):N("",!0),(t(!0),w(le,null,ie(e(l).columns,(C,f)=>(t(),w("div",{key:C.key,class:ce([e(Te)[C.align],f==0?"text-ink-gray-9":"text-ink-gray-7"])},[T(d.$slots,"default",me({ref_for:!0},{idx:f,column:C,item:o.row[C.key],isActive:i.value}),()=>[e(l).slots.cell?(t(),k(de(e(l).slots.cell),me({key:0,ref_for:!0},{column:C,row:o.row,item:o.row[C.key],align:C.align}),null,16)):(t(),k(pt,{key:1,column:C,row:o.row,item:o.row[C.key],align:C.align},null,8,["column","row","item","align"]))])],2))),128))],4),a.value?N("",!0):(t(),w("div",{key:0,class:ce(["h-px border-t",y.value==="rounded"||(S=(p=y.value)==null?void 0:p.includes)!=null&&S.call(p,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},pl={class:"h-full overflow-y-auto"},mt={__name:"ListRows",setup(o){const s=Q("list");return(l,a)=>(t(),w("div",pl,[T(l.$slots,"default",{},()=>[(t(!0),w(le,null,ie(e(s).rows,h=>(t(),k(Fe,{key:h[e(s).rowKey],row:h},null,8,["row"]))),128))])]))}},ml={},vl={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function hl(o,s){return t(),w("svg",vl,[...s[0]||(s[0]=[m("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)])])}const wl=pe(ml,[["render",hl]]),yl={class:"flex items-center"},gl={class:"w-full py-1.5 pr-2"},_l={key:1,class:"text-base font-medium leading-6"},vt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(o){const s=o,l=Q("list");function a(){s.group.collapsed==null&&(s.group.collapsed=!1),s.group.collapsed=!s.group.collapsed}return(h,i)=>(t(),w(le,null,[m("div",yl,[m("button",{onClick:a,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[v(wl,{class:ce(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[o.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),T(h.$slots,"default",{},()=>[m("div",gl,[e(l).slots["group-header"]?(t(),k(de(e(l).slots["group-header"]),ve(me({key:0},{group:o.group})),null,16)):(t(),w("span",_l,J(o.group.group),1))])])]),i[0]||(i[0]=m("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},bl={key:0,class:"mb-5 mt-2"},ht={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(o){const s=Q("list");return(l,a)=>o.group.collapsed?N("",!0):(t(),w("div",bl,[T(l.$slots,"default",{},()=>[(t(!0),w(le,null,ie(o.group.rows,h=>(t(),k(Fe,{key:h[e(s).rowKey],row:h},null,8,["row"]))),128))])]))}},kl={class:"h-full overflow-y-auto"},xl={__name:"ListGroups",setup(o){const s=Q("list");return(l,a)=>(t(),w("div",kl,[(t(!0),w(le,null,ie(e(s).rows,h=>(t(),w("div",{key:h.group},[T(l.$slots,"default",{},()=>[v(vt,{group:h},{default:_(()=>[l.$slots["group-header"]?T(l.$slots,"group-header",me({key:0,ref_for:!0},{group:h})):N("",!0)]),_:2},1032,["group"]),v(ht,{group:h},null,8,["group"])])]))),128))]))}},Cl={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},$l={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Vl={class:"flex items-center space-x-3"},Sl={class:"mr-3"},Ll={class:"flex items-center space-x-1"},wt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(o){const s=Q("list");let l=M(()=>s.value.options.selectionText(s.value.selections.size));return(a,h)=>(t(),k(kt,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:_(()=>[e(s).selections.size?(t(),w("div",Cl,[m("div",{class:ce(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",a.$attrs.class])},[T(a.$slots,"default",ve(ye({selections:e(s).selections,allRowsSelected:e(s).allRowsSelected,selectAll:()=>e(s).toggleAllRows(!0),unselectAll:()=>e(s).toggleAllRows(!1)})),()=>[m("div",$l,[m("div",Vl,[v(Be,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),m("div",null,J(e(l)),1)]),m("div",Sl,[T(a.$slots,"actions",ve(ye({selections:e(s).selections,allRowsSelected:e(s).allRowsSelected,selectAll:()=>e(s).toggleAllRows(!0),unselectAll:()=>e(s).toggleAllRows(!1)})))])]),m("div",Ll,[v(e(je),{class:ce(["w- text-ink-gray-7",e(s).allRowsSelected?"cursor-not-allowed":""]),disabled:e(s).allRowsSelected,variant:"ghost",onClick:h[0]||(h[0]=i=>e(s).toggleAllRows(!0))},{default:_(()=>[...h[2]||(h[2]=[tt(" Select all ",-1)])]),_:1},8,["disabled","class"]),v(e(je),{icon:"x",variant:"ghost",onClick:h[1]||(h[1]=i=>e(s).toggleAllRows(!1))})])])],2)])):N("",!0)]),_:3}))}}),Rl={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Al=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(o,{expose:s,emit:l}){const a=o,h=xt();let i=Ae(new Set),u=te(null);const c=l;qe(i,C=>{i.size&&(u.value=null),c("update:selections",C)}),qe(u,C=>{c("update:active-row",C)});let y=M(()=>{function C(I){return I===void 0?!0:I}function f(I){return I===void 0?!1:I}return{getRowRoute:a.options.getRowRoute||null,onRowClick:a.options.onRowClick||null,showTooltip:C(a.options.showTooltip),selectionText:a.options.selectionText||(I=>I===1?"1 row selected":`${I} rows selected`),enableActive:f(a.options.enableActive),selectable:C(a.options.selectable),resizeColumn:f(a.options.resizeColumn),rowHeight:a.options.rowHeight||40,emptyState:a.options.emptyState}});const R=M(()=>a.rows.length?b.value?i.size===a.rows.reduce((C,f)=>C+f.rows.length,0):i.size===a.rows.length:!1),d=M(()=>y.value.selectable);let b=M(()=>a.rows.every(C=>C.group&&C.rows&&Array.isArray(C.rows)));function p(C){i.delete(C)||i.add(C)}function S(C){if(!C||R.value){i.clear();return}if(b.value){a.rows.forEach(f=>{f.rows.forEach(I=>i.add(I[a.rowKey]))});return}a.rows.forEach(f=>i.add(f[a.rowKey]))}return Ie("list",M(()=>({rowKey:a.rowKey,rows:a.rows,columns:a.columns,options:y.value,selections:i,activeRow:u,allRowsSelected:R.value,slots:h,toggleRow:p,toggleAllRows:S}))),s({selections:i,allRowsSelected:R,toggleRow:p,toggleAllRows:S}),(C,f)=>(t(),w("div",Rl,[m("div",{class:ce(["flex w-max min-w-full flex-col overflow-y-hidden",C.$attrs.class]),style:Ee(C.$attrs.style)},[T(C.$slots,"default",ve(ye({showGroupedRows:e(b),selectable:d.value})),()=>[v(ft),a.rows.length?(t(),w(le,{key:0},[e(b)?(t(),k(xl,{key:0})):(t(),k(mt,{key:1}))],64)):(t(),k(cl,{key:1})),d.value?(t(),k(wt,{key:2})):N("",!0)])],6)]))}}),jl={class:"flex justify-between gap-2"},ql={class:"flex items-center"},Fl={key:1,class:"mx-3 h-[80%] border-l"},Dl={class:"flex items-center gap-1 text-base text-ink-gray-5"},Nl={__name:"ListFooter",props:{modelValue:{type:Number,default:20},options:{type:Object,default:()=>({rowCount:0,totalCount:0,pageLengthOptions:[20,50,100]})}},emits:["update:modelValue","loadMore"],setup(o,{emit:s}){const l=o,a=s,h=M({get:()=>l.modelValue,set:c=>a("update:modelValue",c)}),i=te(l.options.pageLengthOptions||[20,50,100]),u=M(()=>l.options.rowCount&&l.options.totalCount&&l.options.rowCount<l.options.totalCount);return(c,y)=>{const R=fe("Button");return t(),w("div",jl,[T(c.$slots,"default",{},()=>[T(c.$slots,"left",{},()=>[v(Zt,{modelValue:h.value,"onUpdate:modelValue":y[0]||(y[0]=d=>h.value=d),buttons:i.value.map(d=>({label:d,value:d}))},null,8,["modelValue","buttons"])]),T(c.$slots,"right",{},()=>[m("div",ql,[u.value?(t(),k(R,{key:0,label:"Load More",onClick:y[1]||(y[1]=d=>a("loadMore"))})):N("",!0),u.value?(t(),w("div",Fl)):N("",!0),m("div",Dl,[m("div",null,J(o.options.rowCount||"0"),1),y[2]||(y[2]=m("div",null,"of",-1)),m("div",null,J(o.options.totalCount||"0"),1)])])])])])}}},Ml={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(o){const s=o,l=te(null),a=te(null);let h=te(null);function i(){h.value?h.value.update():h.value=St(l.value.el,a.value.el,{placement:s.placement})}function u(){lt(()=>i())}return Ct(()=>{var c;(c=h.value)==null||c.destroy()}),(c,y)=>(t(),k(e(Qt),null,{default:_(({open:R})=>[v(e(Gt),{ref_key:"reference",ref:l,as:"div",onClick:u,onFocusin:u,onKeydown:u},{default:_(({open:d})=>[T(c.$slots,"target",{open:d})]),_:3},512),$t(m("div",null,[v(e(Jt),{ref_key:"popover",ref:a,static:"",class:"z-[100]"},{default:_(({open:d,close:b})=>[T(c.$slots,"body",{open:d,close:b})]),_:3},512)],512),[[Vt,R]])]),_:3}))}},Il={},zl={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-down-a-z"};function Bl(o,s){return t(),w("svg",zl,[...s[0]||(s[0]=[Oe('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)])])}const Ke=pe(Il,[["render",Bl]]),El={},Ol={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Tl(o,s){return t(),w("svg",Ol,[...s[0]||(s[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07548 1.50005C8.05087 1.49632 8.02566 1.49438 8 1.49438C7.97434 1.49438 7.94914 1.49632 7.92452 1.50005H3C1.89543 1.50005 1 2.39548 1 3.50005V12.5C1 13.6046 1.89543 14.5 3 14.5H7.92511C7.94954 14.5037 7.97455 14.5056 8 14.5056C8.02545 14.5056 8.05046 14.5037 8.07489 14.5H13C14.1046 14.5 15 13.6046 15 12.5V3.50005C15 2.39548 14.1046 1.50005 13 1.50005H8.07548ZM7.5 2.50005H3C2.44772 2.50005 2 2.94776 2 3.50005V12.5C2 13.0523 2.44772 13.5 3 13.5H7.5L7.5 2.50005ZM8.5 13.5L8.5 2.50005H13C13.5523 2.50005 14 2.94776 14 3.50005V12.5C14 13.0523 13.5523 13.5 13 13.5H8.5Z",fill:"currentColor"},null,-1)])])}const Ze=pe(El,[["render",Tl]]),Hl={},Ul={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-up-z-a"};function Pl(o,s){return t(),w("svg",Ul,[...s[0]||(s[0]=[Oe('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)])])}const Ge=pe(Hl,[["render",Pl]]),Wl={},Kl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Zl(o,s){return t(),w("svg",Kl,[...s[0]||(s[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 6.75C12.3096 6.75 11.75 6.19036 11.75 5.5C11.75 4.80964 12.3096 4.25 13 4.25C13.6904 4.25 14.25 4.80964 14.25 5.5C14.25 6.19036 13.6904 6.75 13 6.75ZM3 6.75C2.30964 6.75 1.75 6.19036 1.75 5.5C1.75 4.80964 2.30964 4.25 3 4.25C3.69036 4.25 4.25 4.80964 4.25 5.5C4.25 6.19036 3.69036 6.75 3 6.75ZM6.75 5.5C6.75 6.19036 7.30964 6.75 8 6.75C8.69036 6.75 9.25 6.19036 9.25 5.5C9.25 4.80964 8.69036 4.25 8 4.25C7.30964 4.25 6.75 4.80964 6.75 5.5ZM13 11.75C12.3096 11.75 11.75 11.1904 11.75 10.5C11.75 9.80964 12.3096 9.25 13 9.25C13.6904 9.25 14.25 9.80964 14.25 10.5C14.25 11.1904 13.6904 11.75 13 11.75ZM1.75 10.5C1.75 11.1904 2.30964 11.75 3 11.75C3.69036 11.75 4.25 11.1904 4.25 10.5C4.25 9.80964 3.69036 9.25 3 9.25C2.30964 9.25 1.75 9.80964 1.75 10.5ZM8 11.75C7.30964 11.75 6.75 11.1904 6.75 10.5C6.75 9.80964 7.30964 9.25 8 9.25C8.69036 9.25 9.25 9.80964 9.25 10.5C9.25 11.1904 8.69036 11.75 8 11.75Z",fill:"currentColor"},null,-1)])])}const yt=pe(Wl,[["render",Zl]]),Gl={},Jl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ql(o,s){return t(),w("svg",Jl,[...s[0]||(s[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 4.5C2.5 3.39543 3.39543 2.5 4.5 2.5H8.5C8.77614 2.5 9 2.27614 9 2C9 1.72386 8.77614 1.5 8.5 1.5H4.5C2.84315 1.5 1.5 2.84315 1.5 4.5V11.5C1.5 13.1569 2.84315 14.5 4.5 14.5H11.5C13.1569 14.5 14.5 13.1569 14.5 11.5V7.5C14.5 7.22386 14.2761 7 14 7C13.7239 7 13.5 7.22386 13.5 7.5V11.5C13.5 12.6046 12.6046 13.5 11.5 13.5H4.5C3.39543 13.5 2.5 12.6046 2.5 11.5V4.5ZM14.1255 2.58446C14.3207 2.3892 14.3207 2.07261 14.1255 1.87735C13.9302 1.68209 13.6136 1.68209 13.4184 1.87735L6.68616 8.60954C6.4909 8.8048 6.4909 9.12139 6.68616 9.31665C6.88143 9.51191 7.19801 9.51191 7.39327 9.31665L14.1255 2.58446Z",fill:"currentColor"},null,-1)])])}const Yl=pe(Gl,[["render",Ql]]),Xl={},es={width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"};function ts(o,s){return t(),w("svg",es,[...s[0]||(s[0]=[m("g",{class:"es-line-reload","clip-path":"url(#a)"},[m("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.743 2.189a6 6 0 0 0-6.558 2.596.5.5 0 0 0 .844.535 5 5 0 0 1 9.12 1.683l-1.187-.686a.5.5 0 0 0-.5.866l2.165 1.25a.5.5 0 0 0 .683-.183l1.25-2.165a.5.5 0 0 0-.866-.5l-.603 1.044a6 6 0 0 0-4.348-4.44ZM3.356 9.024l1.189.687a.5.5 0 0 0 .5-.866L2.88 7.595a.5.5 0 0 0-.683.183L.947 9.943a.5.5 0 1 0 .866.5l.603-1.044a6 6 0 0 0 10.9 1.816.5.5 0 0 0-.844-.536 5 5 0 0 1-9.116-1.655Z",class:"Union","clip-rule":"evenodd"})],-1),m("defs",null,[m("clipPath",{id:"a",class:"a"},[m("path",{fill:"currentColor",d:"M.25 0h16v16h-16z"})])],-1)])])}const ls=pe(Xl,[["render",ts]]),ss={},os={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ns(o,s){return t(),w("svg",os,[...s[0]||(s[0]=[m("path",{d:"M2.35619 8.42909C2.35644 9.77009 2.84031 11.066 3.719 12.079C4.5977 13.092 5.81226 13.7542 7.13977 13.9439C8.46729 14.1336 9.8187 13.8382 10.946 13.1119C12.0732 12.3856 12.9008 11.2771 13.2766 9.98982C13.6525 8.70258 13.5515 7.32295 12.9922 6.10414C12.4329 4.88534 11.4528 3.90914 10.2318 3.35469C9.0108 2.80025 7.63079 2.70476 6.34504 3.08576C5.0593 3.46675 3.95409 4.29867 3.23226 5.42883",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),m("path",{d:"M3.21297 2V5.42886H6.64183",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const as=pe(ss,[["render",ns]]),is={},rs={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function us(o,s){return t(),w("svg",rs,[...s[0]||(s[0]=[Oe('<path d="M1.75 3.75H10.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 7.75H7.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 11.75H5.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.25 8.25L12.25 6.25L10.25 8.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.25 12.25L12.25 6.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>',5)])])}const Ce=pe(is,[["render",us]]),cs={},ds={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function fs(o,s){return t(),w("svg",ds,[...s[0]||(s[0]=[m("path",{d:"M2 4.5H14",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),m("path",{d:"M4 8.5H12",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),m("path",{d:"M6.5 12.5H9.5",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const ps=pe(cs,[["render",fs]]),ms={class:"flex items-center w-fit"},vs={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},hs={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},ws={class:"min-w-72 p-2 sm:min-w-[400px]"},ys={key:0,class:"flex flex-col gap-2"},gs={class:"-mb-2 flex w-full items-center justify-between"},_s={class:"text-base text-gray-600"},bs={id:"fieldname",class:"w-full"},ks={id:"operator"},xs={id:"value",class:"w-full"},Cs={key:1,class:"flex items-center justify-between gap-2"},$s={class:"flex items-center gap-2 flex-1"},Vs={class:"w-13 pl-2 text-end text-base text-gray-600"},Ss={id:"fieldname",class:"!min-w-[140px]"},Ls={id:"operator"},Rs={id:"value",class:"!min-w-[140px] flex-1"},As={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},js={class:"flex items-center justify-between gap-2"},Je={__name:"Filter",props:{default_filters:{type:Object,required:!1,default:{}}},setup(o){const{isMobileView:s}=st(),l=["Check"],a=["Link","Dynamic Link"],h=["Float","Int","Currency","Percent"],i=["Select"],u=["Data","Long Text","Small Text","Text Editor","Text"],c=["Date","Datetime"],y=["Rating"],R=Q("listViewData"),d=Q("listViewActions"),{list:b,filterableFields:p}=R,S=M(()=>{var L,V,E;if(!b)return new Set;let r=((L=b==null?void 0:b.params)==null?void 0:L.filters)||((E=(V=b.data)==null?void 0:V.params)==null?void 0:E.filters);return!r||!p.data?new Set:C(p.data,r)});function C(r,L){let V=[];for(let[E,P]of Object.entries(L)){let G=r.find(oe=>oe.fieldname===E);(typeof P!="object"||!P)&&(P=["=",P],(G==null?void 0:G.fieldtype)==="Check"&&(P=["equals",P[1]?"Yes":"No"])),typeof P[1]=="number"&&(P[1]=P[1].toString()),G&&V.push({field:G,fieldname:E,operator:De[P[0]],value:P[1]})}return new Set(V)}function f(r,L){let V=[];return u.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),L==="_assign"&&(V=[{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"Is",value:"is"}]),h.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="}),i.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),a.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),l.includes(r)&&V.push({label:"Equals",value:"equals"}),["Duration"].includes(r)&&V.push({label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),c.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="},{label:"Between",value:"between"},{label:"Timespan",value:"timespan"}),y.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="}),V}function I(r){const{field:L,operator:V}=r,{fieldtype:E,options:P}=L;if(V=="is")return X(ue,{type:"select",options:[{label:"Set",value:"set"},{label:"Not Set",value:"not set"}]});if(V=="timespan")return X(ue,{type:"select",options:Ne});if(["like","not like","in","not in"].includes(V))return X(ue,{type:"text"});if(i.includes(E)||l.includes(E)){const G=E=="Check"?["Yes","No"]:q(P);return X(ue,{type:"select",options:G.map(oe=>({label:oe,value:oe}))})}else return a.includes(E)?E=="Dynamic Link"?X(ue,{type:"text"}):X(ut,{class:"form-control",doctype:P,value:r.value}):h.includes(E)?X(ue,{type:"number"}):c.includes(E)&&V=="between"?X(ol,{value:r.value,iconLeft:""}):c.includes(E)?X(E=="Date"?at:it,{value:r.value,iconLeft:""}):y.includes(E)?X(rt,{rating:r.value||0,static:!1,class:"truncate","onUpdate:modelValue":G=>ee(G,r)}):X(ue,{type:"text"})}function j(r){return i.includes(r.fieldtype)?q(r.options)[0]:l.includes(r.fieldtype)?"Yes":c.includes(r.fieldtype)?null:y.includes(r.fieldtype)?0:""}function $(r,L=null){return L==="_assign"?"like":i.includes(r)||l.includes(r)||h.includes(r)?"equals":c.includes(r)?"between":a.includes(r)||y.includes(r)?"equals":"like"}function q(r){return r.split(`
`)}function g(r){r&&(S.value.add({field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options},fieldname:r.value,operator:$(r.fieldtype,r.fieldname),value:j(r)}),Y())}function A(r,L){S.value.delete(Array.from(S.value)[L]),S.value.add({fieldname:r.value,operator:$(r.fieldtype),value:j(r),field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options}}),Y()}function F(r){S.value.delete(Array.from(S.value)[r]),Y()}function K(r){S.value.clear(),Y(),r&&r()}function ee(r,L){r=r.target?r.target.value:r,L.operator==="between"?L.value=[r.split(",")[0],r.split(",")[1]]:L.value=r,Y()}function W(r,L){let V=r.target._value,E=r.target.value;L.operator=r.target.value,U(V,E)||(L.value=j(L.field)),(E==="is"||E==="is not")&&(L.value="set"),Y()}function U(r,L){let V=["equals","not equals","in","not in",">","<",">=","<="];return!!(V.includes(r)&&V.includes(L))}function Y(){const r=[];S.value.forEach(L=>{r.push({fieldname:L.fieldname,operator:L.operator,value:L.value,toBoolean:L.field.fieldtype==="Check"})}),d.applyFilters(ge(r))}function ge(r){return r.map(xe).reduce((L,V)=>(["equals","="].includes(V.operator)?V.toBoolean?L[V.fieldname]=V.value==="Yes"?!0:V.value==="No"?!1:V.value:L[V.fieldname]=V.value:L[V.fieldname]=[Ve[V.operator.toLowerCase()],V.value],L),{})}function xe(r){return r.operator.includes("like")&&!r.value.includes("%")&&(r.value=`%${r.value}%`),r}const Ve={is:"is","is not":"is not",in:"in","not in":"not in",equals:"=","not equals":"!=",yes:!0,no:!1,like:"LIKE","not like":"NOT LIKE",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},De={is:"is","=":"equals","!=":"not equals",equals:"equals","is not":"is not",true:"yes",false:"no",LIKE:"like","NOT LIKE":"not like",in:"in","not in":"not in",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},Ne=[{label:"Last Week",value:"last week"},{label:"Last Month",value:"last month"},{label:"Last Quarter",value:"last quarter"},{label:"Last 6 Months",value:"last 6 months"},{label:"Last Year",value:"last year"},{label:"Yesterday",value:"yesterday"},{label:"Today",value:"today"},{label:"Tomorrow",value:"tomorrow"},{label:"This Week",value:"this week"},{label:"This Month",value:"this month"},{label:"This Quarter",value:"this quarter"},{label:"This Year",value:"this year"},{label:"Next Week",value:"next week"},{label:"Next Month",value:"next month"},{label:"Next Quarter",value:"next quarter"},{label:"Next 6 Months",value:"next 6 months"},{label:"Next Year",value:"next year"}];return(r,L)=>{const V=fe("Button"),E=fe("FeatherIcon");return t(),k(e(nt),null,{target:_(()=>{var P,G,oe;return[m("div",ms,[v(V,{label:"Filter",class:ce((P=S.value)!=null&&P.size?"rounded-r-none":"")},$e({prefix:_(()=>[v(ps,{class:"h-4"})]),_:2},[(G=S.value)!=null&&G.size?{name:"suffix",fn:_(()=>[m("span",vs,J(S.value.size),1)]),key:"0"}:void 0]),1032,["class"]),(oe=S.value)!=null&&oe.size?(t(),k(e(et),{key:0,text:"Clear all Filter"},{default:_(()=>[m("div",null,[v(V,{class:"rounded-l-none border-l",icon:"x",onClick:L[0]||(L[0]=he(z=>K(!1),["stop"]))})])]),_:1})):N("",!0)])]}),body:_(({close:P})=>{var G,oe;return[m("div",hs,[m("div",ws,[(G=S.value)!=null&&G.size?(t(!0),w(le,{key:0},ie(S.value,(z,ne)=>(t(),w("div",{key:ne,id:"filter-list",class:"mb-4 sm:mb-3"},[e(s)?(t(),w("div",ys,[m("div",gs,[m("div",_s,J(ne==0?"Where":"And"),1),v(V,{class:"flex",variant:"ghost",icon:"x",onClick:H=>F(ne)},null,8,["onClick"])]),m("div",bs,[v(e(we),{value:z.field.fieldname,options:e(p).data,onChange:H=>A(H,ne),placeholder:"First Name"},null,8,["value","options","onChange"])]),m("div",ks,[v(e(ue),{type:"select",modelValue:z.operator,"onUpdate:modelValue":H=>z.operator=H,onChange:H=>W(H,z),options:f(z.field.fieldtype,z.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),m("div",xs,[(t(),k(de(I(z)),{modelValue:z.value,"onUpdate:modelValue":H=>z.value=H,onChange:H=>ee(H,z),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])])):(t(),w("div",Cs,[m("div",$s,[m("div",Vs,J(ne==0?"Where":"And"),1),m("div",Ss,[v(e(we),{value:z.field.fieldname,options:e(p).data,onChange:H=>A(H,ne),placeholder:"First Name"},null,8,["value","options","onChange"])]),m("div",Ls,[v(e(ue),{type:"select",modelValue:z.operator,"onUpdate:modelValue":H=>z.operator=H,onChange:H=>W(H,z),options:f(z.field.fieldtype,z.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),m("div",Rs,[(t(),k(de(I(z)),{modelValue:z.value,"onUpdate:modelValue":H=>z.value=H,onChange:H=>ee(H,z),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])]),v(V,{class:"flex",variant:"ghost",icon:"x",onClick:H=>F(ne)},null,8,["onClick"])]))]))),128)):(t(),w("div",As,J("Empty - Choose a field to filter by"))),m("div",js,[v(e(we),{value:"",options:e(p).data,onChange:L[1]||(L[1]=z=>g(z)),placeholder:"First name"},{target:_(({togglePopover:z})=>[v(V,{class:"!text-gray-600",variant:"ghost",onClick:ne=>z(),label:"Add Filter"},{prefix:_(()=>[v(E,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),(oe=S.value)!=null&&oe.size?(t(),k(V,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear all Filter",onClick:z=>K(P)},null,8,["onClick"])):N("",!0)])])])]}),_:1})}}},qs=Lt?window.document:void 0;function Fs(o){var s;const l=ze(o);return(s=l==null?void 0:l.$el)!=null?s:l}function Ds(o,s,l={}){let a;const{document:h=qs,...i}=l,u={onUpdate:d=>{Is(s,d.oldIndex,d.newIndex,d)}},c=()=>{const d=typeof o=="string"?h==null?void 0:h.querySelector(o):Fs(o);!d||a!==void 0||(a=new Yt(d,{...u,...i}))},y=()=>{a==null||a.destroy(),a=void 0},R=(d,b)=>{if(b!==void 0)a==null||a.option(d,b);else return a==null?void 0:a.option(d)};return Rt(c),At(y),{stop:y,start:c,option:R}}function Ns(o,s,l){const a=o.children[l];o.insertBefore(s,a)}function Ms(o){o.parentNode&&o.parentNode.removeChild(o)}function Is(o,s,l,a=null){a!=null&&(Ms(a.item),Ns(a.from,a.item,s));const h=jt(o),i=h?[...ze(o)]:ze(o);if(l>=0&&l<i.length){const u=i.splice(s,1)[0];lt(()=>{i.splice(l,0,u),h&&(o.value=i)})}}const zs={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},Bs={key:1,class:"flex items-center justify-center"},Es={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},Os={class:"min-w-60 p-2"},Ts={key:0,id:"sort-list",class:"mb-3 flex flex-col gap-2"},Hs={class:"handle flex h-7 w-7 items-center justify-center"},Us={class:"flex"},Ps={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},Ws={class:"flex items-center justify-between gap-2"},Qe={__name:"SortBy",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(o,{emit:s}){const l=Q("listViewData"),a=Q("listViewActions"),{list:h,sortableFields:i}=l,u=M({get:()=>{var $;if(!h)return new Set;let j=($=h.params)==null?void 0:$.order_by;return!j||!i.data?new Set:(j=j.split(", ").map(q=>{const[g,A]=q.split(" ");return{fieldname:g,direction:A}}),new Set(j))},set:j=>{h.params.order_by=f(j)}}),c=M(()=>{if(!i.data)return[];if(!u.value.size)return i.data;const j=[...u.value].map($=>$.fieldname);return I(),i.data.filter($=>!j.includes($.value))}),y=Ds("#sort-list",u,{handle:".handle",animation:200,onEnd:()=>C()});function R(){var q,g;if(!u.value.size)return"Sort";let j=Array.from(u.value);return((g=(q=i.data)==null?void 0:q.find(A=>A.value===j[0].fieldname))==null?void 0:g.label)||sort.fieldname}function d(j){u.value.add({fieldname:j.value,direction:"asc"}),I(),C()}function b(j,$){let q=Array.from(u.value)[$];u.value.delete(q),u.value.add({fieldname:j.value,direction:q.direction}),C()}function p(j){u.value.delete(Array.from(u.value)[j]),C()}function S(j){u.value.clear(),C(),j()}function C(){a.applySort(f(u.value))}function f(j){let $="";return j.forEach(q=>{$+=`${q.fieldname} ${q.direction}, `}),$=$.slice(0,-2),$}function I(){y.stop(),y.start()}return(j,$)=>{var A;const q=fe("Button"),g=fe("FeatherIcon");return(A=u.value)!=null&&A.size?(t(),k(e(nt),{key:1},{target:_(({open:F})=>{var K,ee,W;return[u.value.size>1?(t(),k(q,{key:0,label:"Sort"},$e({default:_(()=>[o.hideLabel?(t(),k(e(Ce),{key:0,class:"h-4"})):N("",!0)]),_:2},[o.hideLabel?void 0:{name:"prefix",fn:_(()=>[v(e(Ce),{class:"h-4"})]),key:"0"},(K=u.value)!=null&&K.size?{name:"suffix",fn:_(()=>[m("div",zs,J(u.value.size),1)]),key:"1"}:void 0]),1024)):(t(),w("div",Bs,[u.value.size?(t(),k(q,{key:0,class:"rounded-r-none border-r",onClick:$[1]||($[1]=he(()=>{Array.from(u.value)[0].direction=Array.from(u.value)[0].direction=="asc"?"desc":"asc",C()},["stop"]))},{default:_(()=>[Array.from(u.value)[0].direction=="asc"?(t(),k(e(Ke),{key:0,class:"h-4"})):(t(),k(e(Ge),{key:1,class:"h-4"}))]),_:1})):N("",!0),v(q,{label:R(),class:ce(u.value.size?"rounded-l-none":"")},$e({_:2},[!o.hideLabel&&!((ee=u.value)!=null&&ee.size)?{name:"prefix",fn:_(()=>[v(e(Ce),{class:"h-4"})]),key:"0"}:void 0,(W=u.value)!=null&&W.size?{name:"suffix",fn:_(()=>[v(g,{name:F?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),key:"1"}:void 0]),1032,["label","class"])]))]}),body:_(({close:F})=>{var K,ee;return[m("div",Es,[m("div",Os,[(K=u.value)!=null&&K.size?(t(),w("div",Ts,[(t(!0),w(le,null,ie(u.value,(W,U)=>(t(),w("div",{key:W.fieldname,class:"flex items-center gap-1"},[m("div",Hs,[v(e(yt),{class:"h-4 w-4 cursor-grab text-gray-600"})]),m("div",Us,[v(q,{size:"md",class:"rounded-r-none border-r",onClick:()=>{W.direction=W.direction=="asc"?"desc":"asc",C()}},{default:_(()=>[W.direction=="asc"?(t(),k(e(Ke),{key:0,class:"h-4"})):(t(),k(e(Ge),{key:1,class:"h-4"}))]),_:2},1032,["onClick"]),v(we,{class:"!w-32",value:W.fieldname,options:e(i).data,onChange:Y=>b(Y,U),placeholder:"First Name"},{target:_(({togglePopover:Y,selectedValue:ge,displayValue:xe})=>[v(q,{class:"flex w-full items-center justify-between rounded-l-none !text-gray-600 text-xs",size:"md",onClick:Ve=>Y()},{suffix:_(()=>[v(g,{name:"chevron-down",class:"h-4 text-gray-600"})]),default:_(()=>[tt(J(xe(ge))+" ",1)]),_:2},1032,["onClick"])]),_:2},1032,["value","options","onChange"])]),v(q,{variant:"ghost",icon:"x",onClick:Y=>p(U)},null,8,["onClick"])]))),128))])):(t(),w("div",Ps,J("Empty - Choose a field to sort by"))),m("div",Ws,[v(we,{options:c.value,value:"",placeholder:"First Name",onChange:$[2]||($[2]=W=>d(W))},{target:_(({togglePopover:W})=>[v(q,{class:"!text-gray-600",variant:"ghost",onClick:U=>W(),label:"Add Sort"},{prefix:_(()=>[v(g,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),(ee=u.value)!=null&&ee.size?(t(),k(q,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear Sort",onClick:W=>S(F)},null,8,["onClick"])):N("",!0)])])])]}),_:1})):(t(),k(we,{key:0,options:c.value,value:"",placeholder:"First Name",onChange:$[0]||($[0]=F=>d(F))},{target:_(({togglePopover:F})=>{var K;return[v(q,{label:"Sort",onClick:ee=>F()},$e({default:_(()=>[o.hideLabel?(t(),k(e(Ce),{key:0,class:"h-4"})):N("",!0)]),_:2},[!o.hideLabel&&!((K=u.value)!=null&&K.size)?{name:"prefix",fn:_(()=>[v(e(Ce),{class:"h-4"})]),key:"0"}:void 0]),1032,["onClick"])]}),_:1},8,["options"]))}}},Ks={__name:"QuickFilterField",props:{filter:{type:Object,required:!0},value:{type:[String,Boolean],required:!0}},emits:["applyQuickFilter"],setup(o,{emit:s}){const l=o,a=s,h=Xe((u,c)=>{a("applyQuickFilter",u,c)},500);function i(u,c){a("applyQuickFilter",u,c)}return(u,c)=>o.filter.type=="Check"?(t(),k(e(ue),{key:0,label:o.filter.label,type:"checkbox",checked:l.value,onChange:c[0]||(c[0]=he(y=>i(o.filter,y.target.checked),["stop"])),class:"w-44"},null,8,["label","checked"])):o.filter.type==="Select"?(t(),k(e(ue),{key:1,class:"form-control cursor-pointer [&_select]:cursor-pointer w-44",type:"select",value:l.value,options:o.filter.options,placeholder:o.filter.label,onChange:c[1]||(c[1]=he(y=>i(o.filter,y.target.value),["stop"]))},null,8,["value","options","placeholder"])):o.filter.type==="Link"?(t(),k(e(ut),{key:2,value:l.value,doctype:o.filter.options,placeholder:o.filter.label,onChange:c[2]||(c[2]=y=>i(o.filter,y)),class:"w-44"},null,8,["value","doctype","placeholder"])):["Date","Datetime"].includes(o.filter.type)?(t(),k(de(o.filter.type==="Date"?e(at):e(it)),{key:3,class:"border-none w-44",value:l.value,onChange:c[3]||(c[3]=y=>i(o.filter,y)),placeholder:o.filter.label},null,40,["value","placeholder"])):(t(),k(e(qt),{key:4,value:l.value,type:"text",placeholder:o.filter.label,onInput:c[4]||(c[4]=he(y=>e(h)(o.filter,y.target.value),["stop"]))},null,8,["value","placeholder"]))}},Zs={key:0},Gs={__name:"QuickFilters",setup(o){const s=Q("listViewData"),l=Q("listViewActions"),{list:a,quickFilters:h}=s,i=["Check","Select","Link","Date","Datetime"];function u(R,d){var S;let b={...(S=a.params)==null?void 0:S.filters},p=R.name;d?i.includes(R.type)?b[p]=d:b[p]=["LIKE",`%${d}%`]:delete b[p],l.applyFilters(b)}function c(R){return R.type==="Check"?!1:""}function y(R,d){const b=d[R.name];if(b===void 0)return c(R);if(i.includes(R.type))return b;if(!Array.isArray(b)||b.length!==2||b[0].toLowerCase()!=="like")return c(R);let p=b[1];return p.startsWith("%")&&(p=p.substring(1)),p.endsWith("%")&&(p=p.substring(0,p.length-1)),p}return(R,d)=>e(h).loading?N("",!0):(t(),w("div",Zs,[v(e(ll),{class:"flex flex-1 items-center -ml-1 flex-wrap gap-2",orientation:"horizontal"},{default:_(()=>[(t(!0),w(le,null,ie(e(h).data,b=>(t(),w("div",{key:b.name,class:"min-w-36"},[v(Ks,{filter:b,value:y(b,e(a).params.filters),onApplyQuickFilter:d[0]||(d[0]=(p,S)=>u(p,S))},null,8,["filter","value"])]))),128))]),_:1})]))}},Ye={__name:"Reload",props:{loading:{type:Boolean,default:!1}},setup(o){return(s,l)=>{const a=ls,h=fe("Button");return t(),k(h,{label:"Refresh",loading:o.loading},{icon:_(()=>[v(a,{class:"h-4 w-4"})]),_:1},8,["loading"])}}},Js={class:"my-2 p-1.5 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},Qs={key:0},Ys={class:"flex cursor-grab items-center justify-between gap-6 rounded px-2 py-1.5 text-base text-ink-gray-8 hover:bg-surface-gray-2"},Xs={class:"flex items-center gap-2"},eo={class:"flex cursor-pointer items-center gap-1"},to={class:"mt-1.5 flex flex-col gap-1 border-t border-outline-gray-modals pt-1.5"},lo={key:1},so={class:"flex flex-col items-center justify-between gap-2 rounded px-2 py-1.5 text-base text-ink-gray-8"},oo={class:"flex flex-col items-center gap-3"},no={class:"flex w-full gap-2 border-t pt-2"},ao={__name:"ColumnSettings",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(o,{emit:s}){const l=te(!1),a=te({columns:[],rows:[],isDefault:!1}),h=Q("listViewData"),{list:i}=h,u=Q("listViewActions"),c=te(!1),y=te({old:{},label:"",key:"",width:"10rem"}),R=M({get:()=>{var g;return(g=i.data)==null?void 0:g.is_default},set:g=>{i.data.is_default=g}}),d=M({get:()=>{var g;return(g=i.data)==null?void 0:g.columns},set:g=>{i.data.columns=g}}),b=M({get:()=>{var g;return(g=i.data)==null?void 0:g.rows},set:g=>{i.data.rows=g}}),p=M(()=>{var A;let g=(A=i.data)==null?void 0:A.fields;return g?d.value===""?g:g.filter(F=>!d.value.find(K=>K.key===F.value)):[]});function S(g){let A=["Float","Int","Percent","Currency"].includes(g.type)?"right":"left",F={label:g.label,type:g.type,key:g.value,width:"10rem",align:A};d.value.push(F),b.value.push(g.value),q(!0)}function C(g){d.value.length!==1&&(d.value=d.value.filter(A=>A.key!==g.key),g.key!=="name"&&(b.value=b.value.filter(A=>A!==g.key)),q())}function f(g){c.value=!0,y.value=g,y.value.old={...g}}function I(g){c.value=!1;let A=d.value.findIndex(F=>F.key===g.key);d.value[A].label=g.label,d.value[A].width=g.width,d.value[A].old&&delete d.value[A].old,q()}function j(){c.value=!1,y.value.label=y.value.old.label,y.value.width=y.value.old.width,delete y.value.old}function $(g){q(!0,!0,!0),g()}function q(g=!1,A=!1,F=!1){R.value=A,l.value=!0;let K={columns:F?a.value.columns:d.value,rows:F?a.value.rows:b.value,isDefault:F?a.value.isDefault:A,reload:g,reset:F};u.updateColumns(K),l.value=!F}return Ft(()=>i.data,g=>{g&&(a.value.columns=JSON.parse(JSON.stringify(g.columns)),a.value.rows=JSON.parse(JSON.stringify(g.rows)),a.value.isDefault=g.is_default)}),(g,A)=>{const F=fe("Button"),K=fe("FeatherIcon"),ee=fe("FormControl");return t(),k(Ml,null,{target:_(()=>[v(F,{label:"Columns"},$e({default:_(()=>[o.hideLabel?(t(),k(e(Ze),{key:0,class:"h-4"})):N("",!0)]),_:2},[o.hideLabel?void 0:{name:"prefix",fn:_(()=>[v(e(Ze),{class:"h-4"})]),key:"0"}]),1024)]),body:_(({close:W})=>[m("div",Js,[c.value?(t(),w("div",lo,[m("div",so,[m("div",oo,[v(ee,{type:"text",size:"md",label:"Label",modelValue:y.value.label,"onUpdate:modelValue":A[1]||(A[1]=U=>y.value.label=U),class:"sm:w-full w-52",placeholder:"First Name"},null,8,["modelValue"]),v(ee,{type:"text",size:"md",label:"Width",class:"sm:w-full w-52",modelValue:y.value.width,"onUpdate:modelValue":A[2]||(A[2]=U=>y.value.width=U),placeholder:"10rem",description:"Width can be in number, pixel or rem (eg. 3, 30px, 10rem)",debounce:500},null,8,["modelValue"])]),m("div",no,[v(F,{variant:"subtle",label:"Cancel",class:"w-full flex-1",onClick:j}),v(F,{variant:"solid",label:"Update",class:"w-full flex-1",onClick:A[3]||(A[3]=U=>I(y.value))})])])])):(t(),w("div",Qs,[v(e(Xt),{list:d.value,onEnd:q,delay:e(Dt)()?200:0,"item-key":"key",class:"list-group"},{item:_(({element:U})=>[m("div",Ys,[m("div",Xs,[v(e(yt),{class:"h-3.5"}),m("div",null,J(U.label),1)]),m("div",eo,[v(F,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:Y=>f(U)},{default:_(()=>[v(e(Yl),{class:"h-3.5"})]),_:2},1032,["onClick"]),v(F,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:Y=>C(U)},{default:_(()=>[v(K,{name:"x",class:"h-3.5"})]),_:2},1032,["onClick"])])])]),_:1},8,["list","delay"]),m("div",to,[v(we,{value:"",options:p.value,onChange:A[0]||(A[0]=U=>S(U))},{target:_(({togglePopover:U})=>[v(F,{class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:Y=>U(),label:"Add Column"},{prefix:_(()=>[v(K,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),R.value?N("",!0):(t(),k(F,{key:0,class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:U=>$(W),label:"Reset to Default"},{prefix:_(()=>[v(e(as),{class:"h-4"})]),_:2},1032,["onClick"]))])]))])]),_:1})}}},io={key:0,class:"mx-3 h-full overflow-y-auto sm:mx-5"},ro={class:"my-2 flex items-center gap-2 text-base font-medium text-ink-gray-8 justify-between w-full mr-1"},uo={class:"flex items-center gap-2 w-full"},co={key:1,class:"flex items-end gap-1 w-full"},fo={class:"text-xs text-ink-gray-5"},po={__name:"ListRows",props:{rows:{type:Array,required:!0},groupByActions:{type:Array,default:()=>[]}},setup(o){const s=o,l=te(s.rows),a=i=>{let u=s.groupByActions.map(c=>({...c,onClick:()=>c.onClick(i)}));return i.group.label=="General"&&(u=u.filter(c=>c.label==="Add New Article")),u};qe(()=>s.rows,i=>l.value=i);let h=M(()=>s.rows.every(i=>i.group&&i.rows&&Array.isArray(i.rows)));return(i,u)=>e(h)?(t(),w("div",io,[(t(!0),w(le,null,ie(l.value,c=>(t(),w("div",{key:c.group},[v(e(vt),{group:c},{default:_(()=>[m("div",ro,[m("div",uo,[c.icon?(t(),k(de(c.icon),{key:0})):N("",!0),c.group.label!=""?(t(),w("div",co,[m("span",null,J(c.group.label),1),m("span",fo,J(c.rows.length+" Article"+(c.rows.length>1?"s":"")),1)])):N("",!0)]),o.groupByActions.length>0?(t(),k(e(ot),{key:0,options:a(c)},{default:_(()=>[v(e(je),{variant:"ghost"},{icon:_(()=>[v(e(el),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["options"])):N("",!0)])]),_:2},1032,["group"]),v(e(ht),{group:c,id:"list-rows",class:"!mt-0"},{default:_(()=>[(t(!0),w(le,null,ie(c.rows,y=>(t(),k(e(Fe),{key:y.name,row:y,class:"truncate text-base row"},{default:_(({idx:R,column:d,item:b})=>[T(i.$slots,"default",me({ref_for:!0},{idx:R,column:d,item:b,row:y}))]),_:2},1032,["row"]))),128))]),_:2},1032,["group"])]))),128))])):(t(),k(e(mt),{key:1,class:"mx-3 sm:mx-5",id:"list-rows"},{default:_(()=>[(t(!0),w(le,null,ie(l.value,c=>(t(),k(e(Fe),{key:c.name,row:c,class:"truncate text-base"},{default:_(({idx:y,column:R,item:d})=>[T(i.$slots,"default",me({ref_for:!0},{idx:y,column:R,item:d,row:c}))]),_:2},1032,["row"]))),128))]),_:3}))}},mo={key:0,class:"flex items-center justify-between gap-2 px-5 pb-4 pt-3 pl-6"},vo={key:1,class:"flex items-start gap-2 justify-end h-full"},ho={key:2,class:"flex justify-between items-center w-full"},wo={class:"flex items-center gap-2"},yo={key:2,class:"p-20 border-t sm:px-5 px-3 py-2"},go={key:3,class:"w-full h-full flex items-center justify-center -mt-48"},qo=Nt({__name:"ListViewBuilder",props:{options:{}},emits:["emptyStateAction","rowClick"],setup(o,{expose:s,emit:l}){const a=o,h=l,i=Mt(),u=It(),{isManager:c}=zt(),{$dialog:y}=nl();te(new Set);const R=Ae({doctype:"",hideViewControls:!1,selectable:!1,view:{view_type:"list",group_by_field:"owner",name:i.query.view},groupByActions:[],default_page_length:20,isCustomerPortal:!1,hideColumnSetting:!0,rowRoute:{name:"",prop:""},selectBannerActions:[{label:"Delete",icon:"trash-2",onClick:n=>{y({title:"Delete",message:`Are you sure you want to delete ${n.size} item(s)?`,actions:[{label:"Confirm",variant:"solid",onClick({close:x}){d(x,n)}}]})},condition:()=>!p.value.isCustomerPortal&&c}]});function d(n,x){Bt("bulk_delete"+a.options.doctype),Et("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from(x)),doctype:a.options.doctype}).then(()=>{Ot.success("Item(s) deleted successfully"),n(),b()})}function b(){q.reload(),q.unselectAll()}const p=M(()=>({...R,...a.options})),{isMobileView:S}=st(),C={icon:"",title:"No Data Found"},f=Ae({doctype:p.value.doctype,filters:{},default_filters:p.value.defaultFilters,order_by:"modified desc",page_length:p.value.default_page_length,page_length_count:p.value.default_page_length,view:p.value.view,columns:[],rows:[],show_customer_portal_fields:p.value.isCustomerPortal,is_default:!1}),I=M(()=>{var n;return((n=p.value)==null?void 0:n.emptyState)||C}),j=te(!1),$=Le({url:"helpdesk.api.doc.get_list_data",params:f,transform:n=>(n.columns.forEach(x=>{ee(x),W(x)}),p.value.doctype==="HD Ticket"&&n.data.forEach(x=>{f.show_customer_portal_fields&&x.status==="Replied"&&(x.status="Awaiting Response")}),n),onSuccess:n=>{$.params=f,F.value=n.columns}}),q={list:$,reload:E,unselectAll:()=>{}};function g(n,x=()=>{}){q.unselectAll=x;const D=p.value.selectBannerActions.map(O=>({...O,onClick:()=>{var Z;return(Z=O.onClick)==null?void 0:Z.call(O,n)}})),B=R.selectBannerActions.filter(O=>!D.some(Z=>Z.label===O.label)).map(O=>({...O,onClick:()=>{var Z;return(Z=O.onClick)==null?void 0:Z.call(O,n)}}));return[...D,...B]}const A=M(()=>{var n,x,D,B;return(n=$.data)!=null&&n.data?$.data.view_type==="group_by"?(D=(x=$.data)==null?void 0:x.group_by_field)!=null&&D.name?K($.data.data,$.data.group_by_field):[]:(B=$.data)==null?void 0:B.data:[]}),F=te([]);function K(n,x){var B;let D=[];return(B=x.options)==null||B.forEach(O=>{let Z=[];O.value?Z=n.filter(_e=>_e[x.name]==O.value):Z=n.filter(_e=>!_e[x.name]);let ae={group:O||" ",collapsed:!1,rows:Z,icon:X(Pt,{name:"folder",class:"h-4 w-4 flex-shrink-0 text-ink-gray-6"})};D.push(ae)}),D||n}function ee(n){if(!n.hasOwnProperty("key"))return n;const x=/([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)/,D=n.key.match(x);n.key=D?D[2]:n.key}function W(n){var D,B;if(!((D=p.value)!=null&&D.columnConfig))return n;const x=p.value.columnConfig;return x.hasOwnProperty(n.key)&&(n.prefix=(B=x[n.key])==null?void 0:B.prefix),n}const U=Le({url:"helpdesk.api.doc.get_filterable_fields",cache:["DocField",p.value.doctype],auto:!p.value.hideViewControls,params:{doctype:p.value.doctype,append_assign:!0,show_customer_portal_fields:f.show_customer_portal_fields},transform:n=>(n=n.map(x=>({label:x.label,value:x.fieldname,...x})),n)}),Y=Le({url:"helpdesk.api.doc.sort_options",auto:!p.value.hideViewControls,params:{doctype:p.value.doctype,show_customer_portal_fields:f.show_customer_portal_fields}}),ge=Le({url:"helpdesk.api.doc.get_quick_filters",auto:!p.value.hideViewControls,params:{doctype:p.value.doctype,show_customer_portal_fields:f.show_customer_portal_fields},transform:n=>{if(!n.length)return n=[{name:"name",label:"Name",fieldtype:"Data"}],n}});function xe(n,x,D,B){var Z,ae;const O=p.value.columnConfig;return O&&((Z=O[n.key])!=null&&Z.custom)?(ae=O[n.key])==null?void 0:ae.custom({column:n,row:x,item:D,idx:B}):B===0?X("span",{class:"truncate text-base text-ink-gray-6",textContent:D}):n.type==="Datetime"?X("span",{class:"text-p-xs",textContent:Kt(D)}):n.type==="MultipleAvatar"?X(sl,{avatars:D,hideName:!0,class:"flex items-center truncate flex-1 flex-row-reverse justify-end"}):n.type==="Rating"?X(rt,{rating:D||0,class:"truncate"}):X("span",{class:"truncate flex-1",textContent:D})}function Ve(n,x,D,B){var Z;if(["Data","Datetime","Rating","Int","Float"].includes(x.type)){if(((Z=p.value.rowRoute)==null?void 0:Z.name)!=="")return;h("rowClick",D.name);return}if(n.stopPropagation(),n.preventDefault(),B=="Awaiting Response"&&(B="Replied"),x.type==="MultipleAvatar"){if(B.length>1){let ae=n.target;ae=ae.closest(".user-avatar"),ae&&(B=ae.getAttribute("data-name"))}else B=B[0].name;r({...f.filters,[x.key]:["LIKE",B]});return}r({...f.filters,[x.key]:B})}const De=M(()=>!p.value.hideViewControls&&U.data&&Y.data&&ge.data),Ne=Ae({list:$,filterableFields:U,quickFilters:ge,sortableFields:Y});Ie("listViewData",Ne),Ie("listViewActions",{applyFilters:r,applySort:L,updateColumns:V,reload:E});function r(n){j.value=!0,f.filters={...n},$.submit({...f}),f.is_default&&(G(),j.value=!1)}function L(n){j.value=!0,f.order_by=n,$.submit({...f,order_by:n})}function V(n){j.value=!0;const{columns:x,isDefault:D,rows:B}=n;x==null||x.forEach(O=>{ee(O),W(O)}),F.value=f.columns=D?"":x,f.rows=D?"":B,$.reload({...f})}function E(n=!1){n&&(f.filters=p.value.defaultFilters||{},f.order_by="modified desc",f.page_length=p.value.default_page_length,f.page_length_count=p.value.default_page_length,f.columns=[],f.rows=[],f.is_default=!0),$.reload({...f})}function P(n,x=!1){if(f.page_length_count=n,x)f.page_length+=n;else{if(n===f.page_length&&n===f.page_length_count)return;f.page_length=n,f.page_length_count=n}$.reload()}function G(){const n={filters:JSON.stringify(f.filters),columns:JSON.stringify(f.columns),rows:JSON.stringify(f.rows),order_by:f.order_by,name:i.query.view||"default",dt:p.value.doctype,route_name:i.name,is_customer_portal:p.value.isCustomerPortal};z(n,()=>{j.value=!1})}const{findView:oe,updateView:z,defaultView:ne}=tl(p.value.doctype),H=M(()=>{let n=oe(i.query.view).value;return!!(!n||!n.public||n.public&&c)});function He(){Se(),j.value=!1}function Se(){let n=Ue();if(!n){u.push({name:i.name}),E(!0);return}f.filters=n.filters,f.order_by=n.order_by||"modified desc",f.columns=n.columns,f.rows=n.rows,$.submit({...f})}function Ue(){let n;return i.query.view?(n=oe(i.query.view).value,f.is_default=!1):ne.value&&(n=ne.value,f.is_default=!0),n}qe(()=>i.query.view,n=>{f.view.name=n,Se(),n||(Re.value.label="List",Re.value.icon="lucide:align-justify")});const Pe=Tt(`list_position+${a.options.doctype}`,0);function gt(n){Pe.value=n.target.scrollTop}function _t(){setTimeout(()=>{const n=document.querySelector(".list-rows");n&&(n.scrollTop=Pe.value)},200)}return Ht(async()=>{var n,x;if(_t(),((n=Me.data)==null?void 0:n.length)>0&&((x=Me.filters)==null?void 0:x.dt)===p.value.doctype||await Me.list.promise,Se(),i.query.view||ne.value){if(i.query.view){const D=Ue();if(!D)return;Re.value.label=D.label||"List",Re.value.icon=Ut(D.icon)}return}}),s(q),(n,x)=>{var B,O,Z,ae,_e,We;const D=fe("Button");return t(),w(le,null,[De.value?(t(),w("div",mo,[e(S)?N("",!0):(t(),k(e(Gs),{key:0,class:"flex-1"})),e(S)?(t(),w("div",ho,[v(e(Je),{default_filters:f.filters},null,8,["default_filters"]),m("div",wo,[v(e(Ye),{onClick:He,loading:e($).loading},null,8,["loading"]),v(e(Qe),{"hide-label":e(S)},null,8,["hide-label"])])])):(t(),w("div",vo,[j.value&&H.value?(t(),k(D,{key:0,label:"Save Changes",onClick:G})):N("",!0),v(e(Ye),{onClick:He,loading:e($).loading},null,8,["loading"]),v(e(Je),{default_filters:f.filters},null,8,["default_filters"]),v(e(Qe),{"hide-label":e(S)},null,8,["hide-label"]),p.value.hideColumnSetting?N("",!0):(t(),k(e(ao),{key:1,"hide-label":e(S)},null,8,["hide-label"]))]))])):N("",!0),((B=e($).data)==null?void 0:B.data.length)>0?(t(),k(e(Al),{key:1,class:"flex-1",columns:F.value,rows:A.value,"row-key":"name",options:{selectable:p.value.selectable,showTooltip:!1,resizeColumn:!1,getRowRoute:se=>{var re,be,ke;return{name:(re=p.value.rowRoute)==null?void 0:re.name,params:{[(be=p.value.rowRoute)==null?void 0:be.prop]:se.name},query:{view:(ke=e(i).query)==null?void 0:ke.view}}},emptyState:I.value}},{default:_(()=>[v(e(ft),{class:"sm:mx-5 mx-3"},{default:_(()=>[(t(!0),w(le,null,ie(F.value,se=>(t(),k(e(dt),{key:se.key,item:se,onColumnWidthUpdated:x[0]||(x[0]=re=>console.log(re))},null,8,["item"]))),128))]),_:1}),v(po,{rows:A.value,"group-by-actions":p.value.groupByActions,onScrollend:gt,class:"list-rows"},{default:_(({idx:se,column:re,item:be,row:ke})=>[v(e(pt),{item:be,column:re,row:ke},{default:_(()=>[(t(),k(de(xe(re,ke,be,se)),{key:re.key,onClick:bt=>Ve(bt,re,ke,be)},null,8,["onClick"]))]),_:2},1032,["item","column","row"])]),_:1},8,["rows","group-by-actions"]),p.value.showSelectBanner?(t(),k(e(wt),{key:0},{actions:_(({selections:se,unselectAll:re})=>[v(e(ot),{options:g(se,re)},{default:_(()=>[v(D,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})):N("",!0)]),_:1},8,["columns","rows","options"])):N("",!0),((O=e($).data)==null?void 0:O.data.length)>0?(t(),w("div",yo,[v(e(Nl),{options:{rowCount:(ae=(Z=e($))==null?void 0:Z.data)==null?void 0:ae.row_count,totalCount:(We=(_e=e($))==null?void 0:_e.data)==null?void 0:We.total_count},pageLengthCount:f.page_length_count,onLoadMore:x[1]||(x[1]=se=>P(f.page_length_count,!0)),modelValue:f.page_length_count,"onUpdate:modelValue":[x[2]||(x[2]=se=>f.page_length_count=se),x[3]||(x[3]=se=>{P(se)})]},null,8,["options","pageLengthCount","modelValue"])])):e($).loading?(t(),w("div",go,[v(e(Wt),{scale:10})])):(t(),k(al,{key:4,title:I.value.title,icon:I.value.icon,onEmptyStateAction:x[4]||(x[4]=se=>h("emptyStateAction"))},null,8,["title","icon"]))],64)}}});export{Yl as E,qo as _};
//# sourceMappingURL=ListViewBuilder.vue_vue_type_script_setup_true_lang-678127e3.js.map
