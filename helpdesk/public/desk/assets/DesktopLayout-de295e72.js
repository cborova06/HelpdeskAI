var Ps=(a,e,l)=>{if(!e.has(a))throw TypeError("Cannot "+l)};var Bt=(a,e,l)=>(Ps(a,e,"read from private field"),l?l.call(a):e.get(a)),Al=(a,e,l)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,l)};import{d as N,A as V,c as P,c1 as Hs,Z as $t,ab as Ul,ad as zs,ae as je,c2 as Qs,af as Js,aa as Ws,M as Ce,a3 as me,I as ce,a7 as Gs,c3 as Ks,a6 as Zs,ac as Ys,F as q,c4 as Xs,ai as Sl,c5 as en,c6 as tn,c7 as ln,c8 as hl,bd as sn,c9 as Vl,ca as nn,ao as He,h as t,cb as an,cc as Pl,X as Je,cd as Hl,ce as on,cf as Vt,e as r,f as D,a1 as ke,cg as rn,k as c,y as A,G,ch as it,w as $,g as d,ci as Ie,C as ue,cj as un,ck as Et,b5 as tl,cl as _l,cm as jt,cn as Wt,z as _e,ay as ze,co as dn,cp as Dt,cq as cn,cr as pn,N as mt,cs as mn,bX as fn,ct as vn,cu as gn,v as Qe,cv as yn,cw as hn,cx as _n,s as le,D as Rt,t as O,E as Yt,cy as bn,x as se,l as s,cz as xn,cA as cl,aX as wn,r as J,b8 as rt,b4 as zl,j as Se,U as ll,J as sl,aP as Q,L as bl,m as Ue,n as Re,R as Oe,bg as kn,aA as Ee,aE as Ye,H as Le,W as fe,a2 as ut,K as Ne,p as Pe,aZ as Y,a as xl,Q as W,aJ as Cn,a$ as $n,V as wl,$ as ge,Y as et,S as Ql,aK as Jl,cB as An,cC as Gt,ap as Sn,cD as qt,b0 as Vn,aQ as En,cE as lt,bj as vt,cF as El,b1 as Dn,ax as It,b2 as Me,cG as At,cH as Nt,cI as ie,aY as il,cJ as We,P as De,b7 as Xe,cK as oe,cL as Ct,cM as In,aU as Wl,aW as Gl,cN as pl,aD as Kl,az as Zl,aB as Yl,aC as Xl,cO as Ln,cP as Bn,cQ as Fn,cR as es,cS as On,b as Mn,q as jn,u as Rn,cT as qn,aF as Tn,aR as zt}from"./index-62a62e6e.js";import{_ as Nn,a as gt,k as Be,l as $e,n as at,i as kl,o as Ut,u as Un,c as Pn,p as Hn,s as zn,b as Dl,d as Il,F as Qn,C as Jn}from"./more-horizontal-44c34a82.js";import{d as Wn}from"./dayjs-23c9994e.js";import{u as ts,c as Gn,a as Kn,_ as Zn,H as Yn,b as Xn,d as _t,L as ea,e as ta}from"./layoutSettings-2a4907c3.js";import{u as ls,L as la}from"./bell-b57aa4e5.js";import{_ as sa}from"./UserAvatar.vue_vue_type_script_setup_true_lang-3c21d3f7.js";import"./knowledgeBase-e21cae7f.js";import{_ as yt}from"./Dropdown.vue_vue_type_script_setup_true_lang-8f31c9b1.js";import{g as ss}from"./globalStore-353b4b5d.js";import{_ as ns,a as na,L as aa}from"./calendar-ab62c0c8.js";import{_ as st}from"./Dropdown-f5693848.js";import{_ as ht}from"./Avatar.vue_vue_type_script_setup_true_lang-d4d1e36b.js";import{F as oa}from"./FileUploader-08f99e92.js";import{_ as as}from"./Link-2b0a1c2c.js";import{E as ia,K as ra,a as St,D as ua,_ as da,T as ca}from"./NestedPopover-3f769b77.js";import{_ as pa,u as ma}from"./DateRangePicker.vue_vue_type_script_setup_true_lang-4c092d39.js";import{_ as fa}from"./StarRating.vue_vue_type_script_setup_true_lang-af2bc1e1.js";import{s as va}from"./dialogState-bafa17dc.js";let os=Symbol("GroupContext"),ga=N({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:e,attrs:l}){let o=V(null),n=ia({name:"SwitchLabel",props:{htmlFor:P(()=>{var u;return(u=o.value)==null?void 0:u.id}),onClick(u){o.value&&(u.currentTarget.tagName==="LABEL"&&u.preventDefault(),o.value.click(),o.value.focus({preventScroll:!0}))}}}),i=Hs({name:"SwitchDescription"});return $t(os,{switchRef:o,labelledby:n,describedby:i}),()=>Ul({theirProps:a,ourProps:{},slot:{},slots:e,attrs:l,name:"SwitchGroup"})}}),ya=N({name:"Switch",emits:{"update:modelValue":a=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(a,{emit:e,attrs:l,slots:o,expose:n}){var i;let u=(i=a.id)!=null?i:`headlessui-switch-${zs()}`,m=je(os,null),[p,f]=Qs(P(()=>a.modelValue),k=>e("update:modelValue",k),P(()=>a.defaultChecked));function g(){f(!p.value)}let h=V(null),v=m===null?h:m.switchRef,_=Js(P(()=>({as:a.as,type:l.type})),v);n({el:v,$el:v});function y(k){k.preventDefault(),g()}function w(k){k.key===Sl.Space?(k.preventDefault(),g()):k.key===Sl.Enter&&en(k.currentTarget)}function I(k){k.preventDefault()}let S=P(()=>{var k,L;return(L=(k=Ws(v))==null?void 0:k.closest)==null?void 0:L.call(k,"form")});return Ce(()=>{me([S],()=>{if(!S.value||a.defaultChecked===void 0)return;function k(){f(a.defaultChecked)}return S.value.addEventListener("reset",k),()=>{var L;(L=S.value)==null||L.removeEventListener("reset",k)}},{immediate:!0})}),()=>{let{name:k,value:L,form:b,tabIndex:x,...E}=a,C={checked:p.value},F={id:u,ref:v,role:"switch",type:_.value,tabIndex:x===-1?0:x,"aria-checked":p.value,"aria-labelledby":m==null?void 0:m.labelledby.value,"aria-describedby":m==null?void 0:m.describedby.value,onClick:y,onKeyup:w,onKeypress:I};return ce(q,[k!=null&&p.value!=null?ce(Gs,Ks({features:Zs.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:p.value,form:b,disabled:E.disabled,name:k,value:L})):null,Ul({ourProps:F,theirProps:{...l,...Ys(E,["modelValue","defaultChecked"])},slot:C,attrs:l,slots:o,name:"Switch"})])}}}),ha=ra,_a=Xs;function Ll(a){return typeof a=="string"?`'${a}'`:new ba().serialize(a)}const ba=function(){var e;class a{constructor(){Al(this,e,new Map)}compare(o,n){const i=typeof o,u=typeof n;return i==="string"&&u==="string"?o.localeCompare(n):i==="number"&&u==="number"?o-n:String.prototype.localeCompare.call(this.serialize(o,!0),this.serialize(n,!0))}serialize(o,n){if(o===null)return"null";switch(typeof o){case"string":return n?o:`'${o}'`;case"bigint":return`${o}n`;case"object":return this.$object(o);case"function":return this.$function(o)}return String(o)}serializeObject(o){const n=Object.prototype.toString.call(o);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),o);const i=o.constructor,u=i===Object||i===void 0?"":i.name;if(u!==""&&globalThis[u]===i)return this.serializeBuiltInType(u,o);if(typeof o.toJSON=="function"){const m=o.toJSON();return u+(m!==null&&typeof m=="object"?this.$object(m):`(${this.serialize(m)})`)}return this.serializeObjectEntries(u,Object.entries(o))}serializeBuiltInType(o,n){const i=this["$"+o];if(i)return i.call(this,n);if(typeof(n==null?void 0:n.entries)=="function")return this.serializeObjectEntries(o,n.entries());throw new Error(`Cannot serialize ${o}`)}serializeObjectEntries(o,n){const i=Array.from(n).sort((m,p)=>this.compare(m[0],p[0]));let u=`${o}{`;for(let m=0;m<i.length;m++){const[p,f]=i[m];u+=`${this.serialize(p,!0)}:${this.serialize(f)}`,m<i.length-1&&(u+=",")}return u+"}"}$object(o){let n=Bt(this,e).get(o);return n===void 0&&(Bt(this,e).set(o,`#${Bt(this,e).size}`),n=this.serializeObject(o),Bt(this,e).set(o,n)),n}$function(o){const n=Function.prototype.toString.call(o);return n.slice(-15)==="[native code] }"?`${o.name||""}()[native]`:`${o.name}(${o.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(o){let n="[";for(let i=0;i<o.length;i++)n+=this.serialize(o[i]),i<o.length-1&&(n+=",");return n+"]"}$Date(o){try{return`Date(${o.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(o){return`ArrayBuffer[${new Uint8Array(o).join(",")}]`}$Set(o){return`Set${this.$Array(Array.from(o).sort((n,i)=>this.compare(n,i)))}`}$Map(o){return this.serializeObjectEntries("Map",o.entries())}}e=new WeakMap;for(const l of["Error","RegExp","URL"])a.prototype["$"+l]=function(o){return`${l}(${o})`};for(const l of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])a.prototype["$"+l]=function(o){return`${l}[${o.join(",")}]`};for(const l of["BigInt64Array","BigUint64Array"])a.prototype["$"+l]=function(o){return`${l}[${o.join("n,")}${o.length>0?"n":""}]`};return a}();function ml(a,e){return a===e||Ll(a)===Ll(e)}function xa(a,e,l){const o=a.findIndex(m=>ml(m,e)),n=a.findIndex(m=>ml(m,l));if(o===-1||n===-1)return[];const[i,u]=[o,n].sort((m,p)=>m-p);return a.slice(i,u+1)}function rl(a){if(a===null||typeof a!="object")return!1;const e=Object.getPrototypeOf(a);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in a?!1:Symbol.toStringTag in a?Object.prototype.toString.call(a)==="[object Module]":!0}function fl(a,e,l=".",o){if(!rl(e))return fl(a,{},l,o);const n=Object.assign({},e);for(const i in a){if(i==="__proto__"||i==="constructor")continue;const u=a[i];u!=null&&(o&&o(n,i,u,l)||(Array.isArray(u)&&Array.isArray(n[i])?n[i]=[...u,...n[i]]:rl(u)&&rl(n[i])?n[i]=fl(u,n[i],(l?`${l}.`:"")+i.toString(),o):n[i]=u))}return n}function wa(a){return(...e)=>e.reduce((l,o)=>fl(l,o,"",a),{})}const ka=wa(),Ca=ln(()=>{const a=V(new Map),e=V(),l=P(()=>{for(const u of a.value.values())if(u)return!0;return!1}),o=hl({scrollBody:V(!0)});let n=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Vl&&(n==null||n()),e.value=void 0};return me(l,(u,m)=>{var h;if(!sn)return;if(!u){m&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const p=window.innerWidth-document.documentElement.clientWidth,f={padding:p,margin:0},g=(h=o.scrollBody)!=null&&h.value?typeof o.scrollBody.value=="object"?ka({padding:o.scrollBody.value.padding===!0?p:o.scrollBody.value.padding,margin:o.scrollBody.value.margin===!0?p:o.scrollBody.value.margin},f):f:{padding:0,margin:0};p>0&&(document.body.style.paddingRight=typeof g.padding=="number"?`${g.padding}px`:String(g.padding),document.body.style.marginRight=typeof g.margin=="number"?`${g.margin}px`:String(g.margin),document.documentElement.style.setProperty("--scrollbar-width",`${p}px`),document.body.style.overflow="hidden"),Vl&&(n=nn(document,"touchmove",v=>Aa(v),{passive:!1})),He(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),a});function $a(a){const e=Math.random().toString(36).substring(2,7),l=Ca();l.value.set(e,a??!1);const o=P({get:()=>l.value.get(e)??!1,set:n=>l.value.set(e,n)});return tn(()=>{l.value.delete(e)}),o}function is(a){const e=window.getComputedStyle(a);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&a.clientWidth<a.scrollWidth||e.overflowY==="auto"&&a.clientHeight<a.scrollHeight)return!0;{const l=a.parentNode;return!(l instanceof Element)||l.tagName==="BODY"?!1:is(l)}}function Aa(a){const e=a||window.event,l=e.target;return l instanceof Element&&is(l)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function rs(a){const e=hl({dir:V("ltr")});return P(()=>{var l;return(a==null?void 0:a.value)||((l=e.dir)==null?void 0:l.value)||"ltr"})}function Sa(a){const e=P(()=>t(a)),l=P(()=>new Intl.Collator("en",{usage:"search",...e.value}));return{startsWith:(u,m)=>m.length===0?!0:(u=u.normalize("NFC"),m=m.normalize("NFC"),l.value.compare(u.slice(0,m.length),m)===0),endsWith:(u,m)=>m.length===0?!0:(u=u.normalize("NFC"),m=m.normalize("NFC"),l.value.compare(u.slice(-m.length),m)===0),contains:(u,m)=>{if(m.length===0)return!0;u=u.normalize("NFC"),m=m.normalize("NFC");let p=0;const f=m.length;for(;p+f<=u.length;p++){const g=u.slice(p,p+f);if(l.value.compare(m,g)===0)return!0}return!1}}}function Va(a){return P(()=>{var e;return an(a)?!!((e=Pl(a))!=null&&e.closest("form")):!0})}var Ea=function(a){if(typeof document>"u")return null;var e=Array.isArray(a)?a[0]:a;return e.ownerDocument.body},bt=new WeakMap,Qt=new WeakMap,Jt={},ul=0,us=function(a){return a&&(a.host||us(a.parentNode))},Da=function(a,e){return e.map(function(l){if(a.contains(l))return l;var o=us(l);return o&&a.contains(o)?o:(console.error("aria-hidden",l,"in not contained inside",a,". Doing nothing"),null)}).filter(function(l){return!!l})},Ia=function(a,e,l,o){var n=Da(e,Array.isArray(a)?a:[a]);Jt[l]||(Jt[l]=new WeakMap);var i=Jt[l],u=[],m=new Set,p=new Set(n),f=function(h){!h||m.has(h)||(m.add(h),f(h.parentNode))};n.forEach(f);var g=function(h){!h||p.has(h)||Array.prototype.forEach.call(h.children,function(v){if(m.has(v))g(v);else try{var _=v.getAttribute(o),y=_!==null&&_!=="false",w=(bt.get(v)||0)+1,I=(i.get(v)||0)+1;bt.set(v,w),i.set(v,I),u.push(v),w===1&&y&&Qt.set(v,!0),I===1&&v.setAttribute(l,"true"),y||v.setAttribute(o,"true")}catch(S){console.error("aria-hidden: cannot operate on ",v,S)}})};return g(e),m.clear(),ul++,function(){u.forEach(function(h){var v=bt.get(h)-1,_=i.get(h)-1;bt.set(h,v),i.set(h,_),v||(Qt.has(h)||h.removeAttribute(o),Qt.delete(h)),_||h.removeAttribute(l)}),ul--,ul||(bt=new WeakMap,bt=new WeakMap,Qt=new WeakMap,Jt={})}},La=function(a,e,l){l===void 0&&(l="data-aria-hidden");var o=Array.from(Array.isArray(a)?a:[a]),n=e||Ea(a);return n?(o.push.apply(o,Array.from(n.querySelectorAll("[aria-live], script"))),Ia(o,n,l,"aria-hidden")):function(){return null}};function Ba(a){let e;me(()=>Pl(a),l=>{l?e=La(l):e&&e()}),Je(()=>{e&&e()})}function Fa(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function Oa(a){const e=Hl("",1e3);return{search:e,handleTypeaheadSearch:(n,i)=>{if(e.value=e.value+n,a)a(n);else{const u=on(),m=i.map(v=>{var _,y;return{...v,textValue:((_=v.value)==null?void 0:_.textValue)??((y=v.ref.textContent)==null?void 0:y.trim())??""}}),p=m.find(v=>v.ref===u),f=m.map(v=>v.textValue),g=ja(f,e.value,p==null?void 0:p.textValue),h=m.find(v=>v.textValue===g);return h&&h.ref.focus(),h==null?void 0:h.ref}},resetTypeahead:()=>{e.value=""}}}function Ma(a,e){return a.map((l,o)=>a[(e+o)%a.length])}function ja(a,e,l){const n=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,i=l?a.indexOf(l):-1;let u=Ma(a,Math.max(i,0));n.length===1&&(u=u.filter(f=>f!==l));const p=u.find(f=>f.toLowerCase().startsWith(n.toLowerCase()));return p!==l?p:void 0}const Ra={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qa(a,e){return e!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function Ta(a,e,l){const o=qa(a.key,l);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ra[o]}var Na=N({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(a){const e=a,{primitiveElement:l,currentElement:o}=Vt(),n=P(()=>e.checked??e.value);return me(n,(i,u)=>{if(!o.value)return;const m=o.value,p=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(p,"value").set;if(g&&i!==u){const h=new Event("input",{bubbles:!0}),v=new Event("change",{bubbles:!0});g.call(m,i),m.dispatchEvent(h),m.dispatchEvent(v)}}),(i,u)=>(r(),D(rn,ke({ref_key:"primitiveElement",ref:l},{...e,...i.$attrs},{as:"input"}),null,16))}}),Bl=Na,Ua=N({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(a){const e=a,l=P(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),o=P(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((n,i)=>typeof n=="object"?Object.entries(n).map(([u,m])=>({name:`${e.name}[${i}][${u}]`,value:m})):{name:`${e.name}[${i}]`,value:n}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([n,i])=>({name:`${e.name}[${n}]`,value:i})):[]);return(n,i)=>(r(),c(q,null,[A(" We render single input if it's required "),l.value?(r(),D(Bl,ke({key:n.name},{...e,...n.$attrs},{name:n.name,value:n.value}),null,16,["name","value"])):(r(!0),c(q,{key:1},G(o.value,u=>(r(),D(Bl,ke({key:u.name},{ref_for:!0},{...e,...n.$attrs},{name:u.name,value:u.value}),null,16,["name","value"]))),128))],2112))}}),Pa=Ua,Ha=N({__name:"ComboboxAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const{forwardRef:e}=it();return(l,o)=>(r(),D(t(un),{"as-child":"",reference:l.reference},{default:$(()=>[d(t(Ie),ke({ref:t(e),"as-child":l.asChild,as:l.as},l.$attrs),{default:$(()=>[ue(l.$slots,"default")]),_:3},16,["as-child","as"])]),_:3},8,["reference"]))}}),za=Ha;function Qa(a,e,l){return a===void 0?!1:Array.isArray(a)?a.some(o=>Ft(o,e,l)):Ft(a,e,l)}function Ft(a,e,l){return a===void 0||e===void 0?!1:typeof a=="string"?a===e:typeof l=="function"?l(a,e):typeof l=="string"?(a==null?void 0:a[l])===(e==null?void 0:e[l]):ml(a,e)}const[nl,Ja]=Et("ListboxRoot");var Wa=N({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(a,{expose:e,emit:l}){const o=a,n=l,{multiple:i,highlightOnHover:u,orientation:m,disabled:p,selectionBehavior:f,dir:g}=tl(o),{getItems:h}=_l({isProvider:!0}),{handleTypeaheadSearch:v}=Oa(),{primitiveElement:_,currentElement:y}=Vt(),w=Fa(),I=rs(g),S=Va(y),k=V(),L=V(!1),b=V(!0),x=jt(o,"modelValue",n,{defaultValue:o.defaultValue??(i.value?[]:void 0),passive:o.modelValue===void 0,deep:!0});function E(K){if(L.value=!0,o.multiple){const ae=Array.isArray(x.value)?[...x.value]:[],re=ae.findIndex(be=>Ft(be,K,o.by));o.selectionBehavior==="toggle"?(re===-1?ae.push(K):ae.splice(re,1),x.value=ae):(x.value=[K],k.value=K)}else o.selectionBehavior==="toggle"&&Ft(x.value,K,o.by)?x.value=void 0:x.value=K;setTimeout(()=>{L.value=!1},1)}const C=V(null),F=V(null),M=V(!1),R=V(!1),T=Wt(),U=Wt(),B=Wt();function Z(){return h().map(K=>K.ref).filter(K=>K.dataset.disabled!=="")}function X(K,ae=!0){if(!K)return;C.value=K,b.value&&C.value.focus(),ae&&C.value.scrollIntoView({block:"nearest"});const re=h().find(be=>be.ref===K);n("highlight",re)}function nt(K){if(M.value)B.trigger(K);else{const ae=h().find(re=>Ft(re.value,K,o.by));ae&&(C.value=ae.ref,X(ae.ref))}}function de(K){C.value&&C.value.isConnected&&(K.preventDefault(),K.stopPropagation(),R.value||C.value.click())}function ne(K){if(b.value){if(L.value=!0,M.value)U.trigger(K);else{const ae=K.altKey||K.ctrlKey||K.metaKey;if(ae&&K.key==="a"&&i.value){const re=h(),be=re.map(Ze=>Ze.value);x.value=[...be],K.preventDefault(),X(re[re.length-1].ref)}else if(!ae){const re=v(K.key,h());re&&X(re)}}setTimeout(()=>{L.value=!1},1)}}function te(){R.value=!0}function Ge(){He(()=>{R.value=!1})}function qe(){He(()=>{const K=new KeyboardEvent("keydown",{key:"PageUp"});Te(K)})}function pe(K){const ae=C.value;ae!=null&&ae.isConnected&&(F.value=ae),C.value=null,n("leave",K)}function Ke(K){var re,be;const ae=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((re=K.currentTarget)==null||re.dispatchEvent(ae),n("entryFocus",ae),!ae.defaultPrevented)if(F.value)X(F.value);else{const Ze=(be=Z())==null?void 0:be[0];X(Ze)}}function Te(K){const ae=Ta(K,m.value,I.value);if(!ae)return;let re=Z();if(C.value){if(ae==="last")re.reverse();else if(ae==="prev"||ae==="next"){ae==="prev"&&re.reverse();const be=re.indexOf(C.value);re=re.slice(be+1)}ol(K,re[0])}if(re.length){const be=!C.value&&ae==="prev"?re.length-1:0;X(re[be])}if(M.value)return U.trigger(K)}function ol(K,ae){var be;if(!(M.value||o.selectionBehavior!=="replace"||!i.value||!Array.isArray(x.value)||(K.altKey||K.ctrlKey||K.metaKey)&&!K.shiftKey)&&K.shiftKey){const Ze=h().filter(Lt=>Lt.ref.dataset.disabled!=="");let Ht=(be=Ze.find(Lt=>Lt.ref===ae))==null?void 0:be.value;if(K.key===w.END?Ht=Ze[Ze.length-1].value:K.key===w.HOME&&(Ht=Ze[0].value),!Ht||!k.value)return;const Us=xa(Ze.map(Lt=>Lt.value),k.value,Ht);x.value=Us}}async function Pt(K){if(await He(),M.value)T.trigger(K);else{const ae=Z(),re=ae.find(be=>be.dataset.state==="checked");re?X(re):ae.length&&X(ae[0])}}return me(x,()=>{L.value||He(()=>{Pt()})},{immediate:!0,deep:!0}),e({highlightedElement:C,highlightItem:nt,highlightFirstItem:qe,highlightSelected:Pt,getItems:h}),Ja({modelValue:x,onValueChange:E,multiple:i,orientation:m,dir:I,disabled:p,highlightOnHover:u,highlightedElement:C,isVirtual:M,virtualFocusHook:T,virtualKeydownHook:U,virtualHighlightHook:B,by:o.by,firstValue:k,selectionBehavior:f,focusable:b,onLeave:pe,onEnter:Ke,changeHighlight:X,onKeydownEnter:de,onKeydownNavigation:Te,onKeydownTypeAhead:ne,onCompositionStart:te,onCompositionEnd:Ge,highlightFirstItem:qe}),(K,ae)=>(r(),D(t(Ie),{ref_key:"primitiveElement",ref:_,as:K.as,"as-child":K.asChild,dir:t(I),"data-disabled":t(p)?"":void 0,onPointerleave:pe,onFocusout:ae[0]||(ae[0]=async re=>{const be=re.relatedTarget||re.target;await He(),C.value&&t(y)&&!t(y).contains(be)&&pe(re)})},{default:$(()=>[ue(K.$slots,"default",{modelValue:t(x)}),t(S)&&K.name?(r(),D(t(Pa),{key:0,name:K.name,value:t(x),disabled:t(p),required:K.required},null,8,["name","value","disabled","required"])):A("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Ga=Wa,Ka=N({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const{CollectionSlot:e}=_l(),l=nl(),o=Hl(!1,10);return(n,i)=>(r(),D(t(e),null,{default:$(()=>[d(t(Ie),{role:"listbox",as:n.as,"as-child":n.asChild,tabindex:t(l).focusable.value?t(l).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(l).orientation.value,"aria-multiselectable":!!t(l).multiple.value,"data-orientation":t(l).orientation.value,onMousedown:i[0]||(i[0]=_e(u=>o.value=!0,["left"])),onFocus:i[1]||(i[1]=u=>{t(o)||t(l).onEnter(u)}),onKeydown:[i[2]||(i[2]=ze(_e(u=>{t(l).focusable.value&&t(l).onKeydownNavigation(u)},["prevent"]),["down","up","left","right","home","end"])),ze(t(l).onKeydownEnter,["enter"]),t(l).onKeydownTypeAhead]},{default:$(()=>[ue(n.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),Za=Ka,Ya=N({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(a,{emit:e}){const l=a,n=jt(l,"modelValue",e,{defaultValue:"",passive:l.modelValue===void 0}),i=nl(),{primitiveElement:u,currentElement:m}=Vt(),p=P(()=>l.disabled||i.disabled.value||!1),f=V();return dn(()=>{var g;return f.value=(g=i.highlightedElement.value)==null?void 0:g.id}),Ce(()=>{i.focusable.value=!1,setTimeout(()=>{var g;l.autoFocus&&((g=m.value)==null||g.focus())},1)}),Je(()=>{i.focusable.value=!0}),(g,h)=>(r(),D(t(Ie),{ref_key:"primitiveElement",ref:u,as:g.as,"as-child":g.asChild,value:t(n),disabled:p.value?"":void 0,"data-disabled":p.value?"":void 0,"aria-disabled":p.value??void 0,"aria-activedescendant":f.value,type:"text",onKeydown:[ze(_e(t(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),ze(t(i).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=v=>{n.value=v.target.value,t(i).highlightFirstItem()}),onCompositionstart:t(i).onCompositionStart,onCompositionend:t(i).onCompositionEnd},{default:$(()=>[ue(g.$slots,"default",{modelValue:t(n)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Xa=Ya;const[E1,eo]=Et("ListboxGroup");var to=N({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const e=a,l=Dt(void 0,"reka-listbox-group");return eo({id:l}),(o,n)=>(r(),D(t(Ie),ke({role:"group"},e,{"aria-labelledby":t(l)}),{default:$(()=>[ue(o.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),lo=to;const so="listbox.select",[no,ao]=Et("ListboxItem");var oo=N({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(a,{emit:e}){const l=a,o=e,n=Dt(void 0,"reka-listbox-item"),{CollectionItem:i}=_l(),{forwardRef:u,currentElement:m}=it(),p=nl(),f=P(()=>m.value===p.highlightedElement.value),g=P(()=>Qa(p.modelValue.value,l.value,p.by)),h=P(()=>p.disabled.value||l.disabled);async function v(y){o("select",y),!(y!=null&&y.defaultPrevented)&&!h.value&&y&&(p.onValueChange(l.value),p.changeHighlight(m.value))}function _(y){const w={originalEvent:y,value:l.value};pn(so,v,w)}return ao({isSelected:g}),(y,w)=>(r(),D(t(i),{value:y.value},{default:$(()=>[cn([f.value,g.value],()=>d(t(Ie),ke({id:t(n)},y.$attrs,{ref:t(u),role:"option",tabindex:t(p).focusable.value?f.value?"0":"-1":-1,"aria-selected":g.value,as:y.as,"as-child":y.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":f.value?"":void 0,"data-state":g.value?"checked":"unchecked",onClick:_,onKeydown:ze(_e(_,["prevent"]),["space"]),onPointermove:w[0]||(w[0]=I=>{t(p).highlightedElement.value!==t(m)&&(t(p).highlightOnHover.value?t(p).changeHighlight(t(m),!1):t(p).focusable.value||t(p).changeHighlight(t(m),!1))})}),{default:$(()=>[ue(y.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),w,1)]),_:3},8,["value"]))}}),io=oo,ro=N({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const e=a;it();const l=no();return(o,n)=>t(l).isSelected.value?(r(),D(t(Ie),ke({key:0,"aria-hidden":"true"},e),{default:$(()=>[ue(o.$slots,"default")]),_:3},16)):A("v-if",!0)}}),uo=ro;const[dt,co]=Et("ComboboxRoot");var po=N({__name:"ComboboxRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},openOnFocus:{type:Boolean,required:!1,default:!1},openOnClick:{type:Boolean,required:!1,default:!1},ignoreFilter:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","update:open"],setup(a,{expose:e,emit:l}){var Z,X,nt;const o=a,n=l,{primitiveElement:i,currentElement:u}=Vt(),{multiple:m,disabled:p,ignoreFilter:f,resetSearchTermOnSelect:g,openOnFocus:h,openOnClick:v,dir:_}=tl(o),y=rs(_),w=jt(o,"modelValue",n,{defaultValue:o.defaultValue??(m.value?[]:void 0),passive:o.modelValue===void 0,deep:!0}),I=jt(o,"open",n,{defaultValue:o.defaultOpen,passive:o.open===void 0});async function S(de){var ne,te;I.value=de,T.value="",de?(await He(),(ne=i.value)==null||ne.highlightSelected(),L.value=!0):L.value=!1,(te=x.value)==null||te.focus(),setTimeout(()=>{!de&&o.resetSearchTermOnBlur&&k.trigger()},1)}const k=Wt(),L=V(!1),b=V(!1),x=V(),E=V(),C=P(()=>{var de;return((de=i.value)==null?void 0:de.highlightedElement)??void 0}),F=V(new Map),M=V(new Map),{contains:R}=Sa({sensitivity:"base"}),T=V(""),U=P(de=>{if(!T.value||o.ignoreFilter||b.value)return{count:F.value.size,items:(de==null?void 0:de.items)??new Map,groups:(de==null?void 0:de.groups)??new Set(M.value.keys())};let ne=0;const te=new Map,Ge=new Set;for(const[qe,pe]of F.value){const Ke=R(pe,T.value);te.set(qe,Ke?1:0),Ke&&ne++}for(const[qe,pe]of M.value)for(const Ke of pe)if(te.get(Ke)>0){Ge.add(qe);break}return{count:ne,items:te,groups:Ge}}),B=fn();return Ce(()=>{var de,ne,te;B!=null&&B.exposed&&(B.exposed.highlightItem=(de=i.value)==null?void 0:de.highlightItem,B.exposed.highlightFirstItem=(ne=i.value)==null?void 0:ne.highlightFirstItem,B.exposed.highlightSelected=(te=i.value)==null?void 0:te.highlightSelected)}),e({filtered:U,highlightedElement:C,highlightItem:(Z=i.value)==null?void 0:Z.highlightItem,highlightFirstItem:(X=i.value)==null?void 0:X.highlightFirstItem,highlightSelected:(nt=i.value)==null?void 0:nt.highlightSelected}),co({modelValue:w,multiple:m,disabled:p,open:I,onOpenChange:S,contentId:"",isUserInputted:L,isVirtual:b,inputElement:x,highlightedElement:C,onInputElementChange:de=>x.value=de,triggerElement:E,onTriggerElementChange:de=>E.value=de,parentElement:u,resetSearchTermOnSelect:g,onResetSearchTerm:k.on,allItems:F,allGroups:M,filterSearch:T,filterState:U,ignoreFilter:f,openOnFocus:h,openOnClick:v}),(de,ne)=>(r(),D(t(mn),null,{default:$(()=>[d(t(Ga),ke({ref_key:"primitiveElement",ref:i},de.$attrs,{modelValue:t(w),"onUpdate:modelValue":ne[0]||(ne[0]=te=>mt(w)?w.value=te:null),style:{pointerEvents:t(I)?"auto":void 0},as:de.as,"as-child":de.asChild,dir:t(y),multiple:t(m),name:de.name,required:de.required,disabled:t(p),"highlight-on-hover":!0,by:o.by,onHighlight:ne[1]||(ne[1]=te=>n("highlight",te))}),{default:$(()=>[ue(de.$slots,"default",{open:t(I),modelValue:t(w)})]),_:3},16,["modelValue","style","as","as-child","dir","multiple","name","required","disabled","by"])]),_:3}))}}),mo=po;const[D1,fo]=Et("ComboboxContent");var vo=N({__name:"ComboboxContentImpl",props:{position:{type:String,required:!1,default:"inline"},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(a,{emit:e}){const l=a,o=e,{position:n}=tl(l),i=dt(),{forwardRef:u,currentElement:m}=it();$a(l.bodyLock),Ba(i.parentElement);const p=P(()=>l.position==="popper"?l:{}),f=vn(p.value),g={boxSizing:"border-box","--reka-combobox-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-combobox-content-available-width":"var(--reka-popper-available-width)","--reka-combobox-content-available-height":"var(--reka-popper-available-height)","--reka-combobox-trigger-width":"var(--reka-popper-anchor-width)","--reka-combobox-trigger-height":"var(--reka-popper-anchor-height)"};fo({position:n});const h=V(!1);return Ce(()=>{i.inputElement.value&&(h.value=m.value.contains(i.inputElement.value),h.value&&i.inputElement.value.focus())}),Je(()=>{var v;h.value&&((v=i.triggerElement.value)==null||v.focus())}),(v,_)=>(r(),D(t(Za),{"as-child":""},{default:$(()=>[d(t(gn),{"as-child":"","disable-outside-pointer-events":v.disableOutsidePointerEvents,onDismiss:_[0]||(_[0]=y=>t(i).onOpenChange(!1)),onFocusOutside:_[1]||(_[1]=y=>{var w;(w=t(i).parentElement.value)!=null&&w.contains(y.target)&&y.preventDefault(),o("focusOutside",y)}),onInteractOutside:_[2]||(_[2]=y=>o("interactOutside",y)),onEscapeKeyDown:_[3]||(_[3]=y=>o("escapeKeyDown",y)),onPointerDownOutside:_[4]||(_[4]=y=>{var w;(w=t(i).parentElement.value)!=null&&w.contains(y.target)&&y.preventDefault(),o("pointerDownOutside",y)})},{default:$(()=>[(r(),D(Qe(t(n)==="popper"?t(yn):t(Ie)),ke({...v.$attrs,...t(f)},{id:t(i).contentId,ref:t(u),"data-state":t(i).open.value?"open":"closed",style:{display:"flex",flexDirection:"column",outline:"none",...t(n)==="popper"?g:{}}}),{default:$(()=>[ue(v.$slots,"default")]),_:3},16,["id","data-state","style"]))]),_:3},8,["disable-outside-pointer-events"])]),_:3}))}}),go=vo,yo=N({__name:"ComboboxContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(a,{emit:e}){const n=hn(a,e),{forwardRef:i}=it(),u=dt();return u.contentId||(u.contentId=Dt(void 0,"reka-combobox-content")),(m,p)=>(r(),D(t(_n),{present:m.forceMount||t(u).open.value},{default:$(()=>[d(go,ke({...t(n),...m.$attrs},{ref:t(i)}),{default:$(()=>[ue(m.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),ho=yo,_o=N({__name:"ComboboxEmpty",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const e=a,l=dt(),o=P(()=>l.ignoreFilter.value?l.allItems.value.size===0:l.filterState.value.count===0);return(n,i)=>o.value?(r(),D(t(Ie),Rt(ke({key:0},e)),{default:$(()=>[ue(n.$slots,"default",{},()=>[i[0]||(i[0]=le("No options"))])]),_:3},16)):A("v-if",!0)}}),bo=_o;const[ds,xo]=Et("ComboboxGroup");var wo=N({__name:"ComboboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const e=a,l=Dt(void 0,"reka-combobox-group"),o=dt(),n=P(()=>o.ignoreFilter.value?!0:o.filterSearch.value?o.filterState.value.groups.has(l):!0),i=xo({id:l,labelId:""});return Ce(()=>{o.allGroups.value.has(l)||o.allGroups.value.set(l,new Set)}),Je(()=>{o.allGroups.value.delete(l)}),(u,m)=>(r(),D(t(lo),ke({id:t(l),"aria-labelledby":t(i).labelId},e,{hidden:n.value?void 0:!0}),{default:$(()=>[ue(u.$slots,"default")]),_:3},16,["id","aria-labelledby","hidden"]))}}),ko=wo,Co=N({__name:"ComboboxInput",props:{displayValue:{type:Function,required:!1},modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(a,{emit:e}){const l=a,o=e,n=dt(),i=nl(),{primitiveElement:u,currentElement:m}=Vt(),p=jt(l,"modelValue",o,{passive:l.modelValue===void 0});Ce(()=>{m.value&&n.onInputElementChange(m.value)});function f(y){n.open.value||n.onOpenChange(!0)}function g(y){const w=y.target;n.open.value?n.filterSearch.value=w.value:(n.onOpenChange(!0),He(()=>{w.value&&(n.filterSearch.value=w.value,i.highlightFirstItem())}))}function h(){n.openOnFocus.value&&!n.open.value&&n.onOpenChange(!0)}function v(){n.openOnClick.value&&!n.open.value&&n.onOpenChange(!0)}function _(){const y=n.modelValue.value;l.displayValue?p.value=l.displayValue(y):!n.multiple.value&&y&&!Array.isArray(y)&&typeof y!="object"?p.value=y.toString():p.value="",He(()=>{p.value=p.value})}return n.onResetSearchTerm(()=>{_()}),me(n.modelValue,async()=>{!n.isUserInputted.value&&n.resetSearchTermOnSelect.value&&_()},{immediate:!0,deep:!0}),me(n.filterState,()=>{n.isVirtual.value||i.highlightFirstItem()}),(y,w)=>(r(),D(t(Xa),{ref_key:"primitiveElement",ref:u,modelValue:t(p),"onUpdate:modelValue":w[0]||(w[0]=I=>mt(p)?p.value=I:null),as:y.as,"as-child":y.asChild,"auto-focus":y.autoFocus,disabled:y.disabled,"aria-expanded":t(n).open.value,"aria-controls":t(n).contentId,"aria-autocomplete":"list",role:"combobox",autocomplete:"off",onClick:v,onInput:g,onKeydown:ze(_e(f,["prevent"]),["down","up"]),onFocus:h},{default:$(()=>[ue(y.$slots,"default")]),_:3},8,["modelValue","as","as-child","auto-focus","disabled","aria-expanded","aria-controls","onKeydown"]))}}),$o=Co,Ao=N({__name:"ComboboxItem",props:{textValue:{type:String,required:!1},value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(a,{emit:e}){const l=a,o=e,n=Dt(void 0,"reka-combobox-item"),i=dt(),u=ds(null),{primitiveElement:m,currentElement:p}=Vt();if(l.value==="")throw new Error("A <ComboboxItem /> must have a value prop that is not an empty string. This is because the Combobox value can be set to an empty string to clear the selection and show the placeholder.");const f=P(()=>{if(i.isVirtual.value||i.ignoreFilter.value||!i.filterSearch.value)return!0;{const g=i.filterState.value.items.get(n);return g===void 0?!0:g>0}});return Ce(()=>{var h;i.allItems.value.set(n,l.textValue||p.value.textContent||p.value.innerText);const g=u==null?void 0:u.id;g&&(i.allGroups.value.has(g)?(h=i.allGroups.value.get(g))==null||h.add(n):i.allGroups.value.set(g,new Set([n])))}),Je(()=>{i.allItems.value.delete(n)}),(g,h)=>f.value?(r(),D(t(io),ke({key:0},l,{id:t(n),ref_key:"primitiveElement",ref:m,disabled:t(i).disabled.value||g.disabled,onSelect:h[0]||(h[0]=v=>{o("select",v),!v.defaultPrevented&&!t(i).multiple.value&&!g.disabled&&!t(i).disabled.value&&(v.preventDefault(),t(i).onOpenChange(!1),t(i).modelValue.value=l.value)})}),{default:$(()=>[ue(g.$slots,"default",{},()=>[le(O(g.value),1)])]),_:3},16,["id","disabled"])):A("v-if",!0)}}),Fl=Ao,So=N({__name:"ComboboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const e=a;return(l,o)=>(r(),D(t(uo),Rt(Yt(e)),{default:$(()=>[ue(l.$slots,"default")]),_:3},16))}}),Ol=So,Vo=N({__name:"ComboboxLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(a){const e=a;it();const l=ds({id:"",labelId:""});return l.labelId||(l.labelId=Dt(void 0,"reka-combobox-group-label")),(o,n)=>(r(),D(t(Ie),ke(e,{id:t(l).labelId}),{default:$(()=>[ue(o.$slots,"default")]),_:3},16,["id"]))}}),Eo=Vo,Do=N({__name:"ComboboxPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(a){const e=a;return(l,o)=>(r(),D(t(bn),Rt(Yt(e)),{default:$(()=>[ue(l.$slots,"default")]),_:3},16))}}),Io=Do,Lo=N({__name:"ComboboxTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const e=a,{forwardRef:l,currentElement:o}=it(),n=dt(),i=P(()=>e.disabled||n.disabled.value||!1);return Ce(()=>{o.value&&n.onTriggerElementChange(o.value)}),(u,m)=>(r(),D(t(Ie),ke(e,{ref:t(l),type:u.as==="button"?"button":void 0,tabindex:"-1","aria-label":"Show popup","aria-haspopup":"listbox","aria-expanded":t(n).open.value,"aria-controls":t(n).contentId,"data-state":t(n).open.value?"open":"closed",disabled:i.value,"data-disabled":i.value?"":void 0,"aria-disabled":i.value??void 0,onClick:m[0]||(m[0]=p=>t(n).onOpenChange(!t(n).open.value))}),{default:$(()=>[ue(u.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","disabled","data-disabled","aria-disabled"]))}}),Bo=Lo;function Fo(a){const e=hl({nonce:V()});return P(()=>{var l;return(a==null?void 0:a.value)||((l=e.nonce)==null?void 0:l.value)})}var Oo=N({__name:"ComboboxViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const e=a,{forwardRef:l}=it(),{nonce:o}=tl(e),n=Fo(o),i=dt();return(u,m)=>(r(),c(q,null,[d(t(Ie),ke({...u.$attrs,...e},{ref:t(l),"data-reka-combobox-viewport":"",role:"presentation",style:{position:"relative",flex:t(i).isVirtual.value?void 0:1,overflow:"auto"}}),{default:$(()=>[ue(u.$slots,"default")]),_:3},16,["style"]),d(t(Ie),{as:"style",nonce:t(n)},{default:$(()=>m[0]||(m[0]=[le(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-combobox-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-combobox-viewport]::-webkit-scrollbar { display: none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),Mo=Oo;const jo={class:"relative"},Ro={class:"flex items-center gap-2 flex-1 overflow-hidden"},qo={class:"flex items-center gap-2 pr-6 flex-1"},To={class:"flex items-center gap-2 pr-6 flex-1"},Ml=N({__name:"Combobox",props:{options:{},modelValue:{},placeholder:{},disabled:{type:Boolean}},emits:["update:modelValue","update:selectedOption","focus","blur"],setup(a,{emit:e}){const l=a,o=e,n=V(w(l.modelValue)),i=V(l.modelValue),u=V(!1),m=V(!1);me(()=>l.modelValue,M=>{i.value=M,n.value=w(M)});const p=M=>{i.value=M,o("update:modelValue",M),n.value=w(M),m.value=!1;const R=M&&y.value.find(T=>h(T)===M)||null;o("update:selectedOption",R)};function f(M){return typeof M=="object"&&"group"in M}function g(M){return typeof M=="string"?M:M.label}function h(M){return typeof M=="string"?M:M.value}function v(M){return typeof M=="object"&&!!M.disabled}function _(M){return typeof M=="object"?M.icon:void 0}const y=P(()=>{const M=[];return l.options.forEach(R=>{f(R)?M.push(...R.options):M.push(R)}),M});function w(M){if(!M)return"";const T=l.options.flatMap(U=>f(U)?U.options:U).find(U=>h(U)===M);return T?g(T):M||""}const I=P(()=>i.value?y.value.find(M=>h(M)===i.value):null),S=P(()=>I.value?_(I.value):void 0),k=M=>{if(!M.icon)return null;const R=typeof M.icon=="string"?ce("span",M.icon):ce(M.icon,{class:"w-4 h-4"});return ce("span",{class:"flex-shrink-0 w-4 h-4 inline-flex items-center justify-center"},[R])},L=(M,R)=>{if(!R)return M;const T=R.toLowerCase(),U=[];return M.forEach(B=>{if(f(B)){const Z=B.options.filter(X=>{const nt=g(X).toLowerCase(),de=h(X).toLowerCase();return nt.includes(T)||de.includes(T)});Z.length>0&&U.push({...B,options:Z})}else{const Z=g(B).toLowerCase(),X=h(B).toLowerCase();(Z.includes(T)||X.includes(T))&&U.push(B)}}),U},b=P(()=>u.value&&!m.value&&i.value?l.options:L(l.options,n.value)),x=M=>{const R=M.target;n.value=R.value,m.value=!0,n.value===""&&(i.value=null,o("update:modelValue",null))},E=M=>{u.value=M,M||(n.value=w(i.value)),m.value=!1},C=M=>{o("focus",M)},F=M=>{o("blur",M)};return(M,R)=>(r(),c("div",jo,[d(t(mo),{"model-value":i.value,"onUpdate:modelValue":p,"onUpdate:open":E,"ignore-filter":!0},{default:$(()=>[d(t(za),{class:se(["flex h-7 w-full items-center justify-between gap-2 rounded bg-surface-gray-2 px-2 py-1 transition-colors hover:bg-surface-gray-3 border border-transparent focus-within:border-outline-gray-4 focus-within:ring-2 focus-within:ring-outline-gray-3",{"opacity-50 pointer-events-none":M.disabled}])},{default:$(()=>[s("div",Ro,[S.value?(r(),D(k,{key:0,icon:S.value},null,8,["icon"])):A("",!0),d(t($o),{value:n.value,onInput:x,onFocus:C,onBlur:F,class:"bg-transparent p-0 focus:outline-0 border-0 focus:border-0 focus:ring-0 text-base text-ink-gray-8 h-full placeholder:text-ink-gray-4 w-full",placeholder:M.placeholder||"",disabled:M.disabled,autocomplete:"off"},null,8,["value","placeholder","disabled"])]),d(t(Bo),{disabled:M.disabled},{default:$(()=>[d(t(xn),{class:"h-4 w-4 text-ink-gray-5"})]),_:1},8,["disabled"])]),_:1},8,["class"]),d(t(Io),null,{default:$(()=>[d(t(ho),{class:"z-10 min-w-[--reka-combobox-trigger-width] mt-1 bg-surface-modal overflow-hidden rounded-lg shadow-2xl",position:"popper",onOpenAutoFocus:R[0]||(R[0]=_e(()=>{},["prevent"])),onCloseAutoFocus:R[1]||(R[1]=_e(()=>{},["prevent"])),align:"start"},{default:$(()=>[d(t(Mo),{class:se(["max-h-60 overflow-auto pb-1.5",{"px-1.5 pt-1.5":!f(b.value[0])}])},{default:$(()=>[d(t(bo),{class:"text-ink-gray-5 text-base text-center py-1.5 px-2.5"},{default:$(()=>[le(' No results found for "'+O(n.value)+'" ',1)]),_:1}),(r(!0),c(q,null,G(b.value,(T,U)=>(r(),c(q,{key:U},[f(T)?(r(),D(t(ko),{key:0,class:"px-1.5"},{default:$(()=>[d(t(Eo),{class:"px-2.5 pt-3 pb-1.5 text-sm font-medium text-ink-gray-5 sticky top-0 bg-surface-modal z-10"},{default:$(()=>[le(O(T.group),1)]),_:2},1024),(r(!0),c(q,null,G(T.options,(B,Z)=>(r(),D(t(Fl),{key:`${U}-${Z}`,value:h(B),disabled:v(B),class:"text-base leading-none text-ink-gray-7 rounded flex items-center h-7 px-2.5 py-1.5 relative select-none data-[disabled]:opacity-50 data-[disabled]:pointer-events-none data-[highlighted]:outline-none data-[highlighted]:bg-surface-gray-3"},{default:$(()=>[s("span",qo,[d(k,{icon:_(B)},null,8,["icon"]),le(" "+O(g(B)),1)]),d(t(Ol),{class:"inline-flex ml-2 items-center justify-center"},{default:$(()=>[d(t(cl),{class:"size-4"})]),_:1})]),_:2},1032,["value","disabled"]))),128))]),_:2},1024)):(r(),D(t(Fl),{key:U,value:h(T),disabled:v(T),class:"text-base leading-none text-ink-gray-7 rounded flex items-center h-7 px-2.5 py-1.5 relative select-none data-[disabled]:opacity-50 data-[disabled]:pointer-events-none data-[highlighted]:outline-none data-[highlighted]:bg-surface-gray-3"},{default:$(()=>[s("span",To,[_(T)?(r(),D(k,{key:0,icon:_(T)},null,8,["icon"])):A("",!0),le(" "+O(g(T)),1)]),d(t(Ol),{class:"absolute right-0 w-6 inline-flex items-center justify-center"},{default:$(()=>[d(t(cl),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["value","disabled"]))],64))),128))]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["model-value"])]))}}),tt=N({__name:"Switch",props:{size:{default:"sm"},label:{default:""},description:{default:""},disabled:{type:Boolean,default:!1},modelValue:{type:[Boolean,Number,String]}},emits:["change","update:modelValue"],setup(a,{emit:e}){const l=a,o=e,n=P(()=>l.label&&l.description?2:l.label?1:0),i=P(()=>["relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-transparent transition-colors duration-100 ease-in-out items-center","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3","disabled:cursor-not-allowed disabled:bg-surface-gray-3",l.modelValue?"bg-surface-gray-7 enabled:hover:bg-surface-gray-6 active:bg-surface-gray-5 group-hover:enabled:bg-surface-gray-6":"bg-surface-gray-4 enabled:hover:bg-gray-400 active:bg-gray-500 group-hover:enabled:bg-gray-400",l.size==="md"?"h-5 w-8 border-[3px]":"h-4 w-[26px] border-2"]),u=P(()=>["pointer-events-none inline-block transform rounded-full bg-surface-white shadow ring-0 transition duration-100 ease-in-out",l.size==="md"?"h-3.5 w-3.5":"h-3 w-3",l.size==="md"?l.modelValue?"translate-x-3 rtl:-translate-x-3":"translate-x-0":l.modelValue?"translate-x-2.5 rtl:-translate-x-2.5":"translate-x-0"]),m=P(()=>["font-medium leading-normal",l.disabled&&n.value===1?"text-ink-gray-4":"text-ink-gray-8",l.size==="md"?"text-lg":"text-base"]),p=P(()=>["max-w-xs text-p-base text-ink-gray-7"]),f=P(()=>{const h=["flex justify-between"];return n.value===1?(h.push("group items-center space-x-3 cursor-pointer rounded focus-visible:bg-surface-gray-2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3"),h.push(l.disabled?"cursor-not-allowed":"hover:bg-surface-gray-3 active:bg-surface-gray-4"),h.push(l.size==="md"?"px-3 py-1.5":"px-2.5 py-1.5")):n.value===2&&(h.push("items-start"),h.push(l.size==="md"?"space-x-3.5":"space-x-2.5")),h}),g=P(()=>["flex flex-col space-y-0.5"]);return(h,v)=>(r(),D(t(ga),{as:"div",tabindex:n.value==1?0:-1,onKeyup:v[1]||(v[1]=ze(_e(_=>o("update:modelValue",!h.modelValue),["self"]),["space"])),class:se(f.value)},{default:$(()=>[s("span",{class:se(g.value)},[l.label?(r(),D(t(ha),{key:0,as:"span",class:se(m.value)},{default:$(()=>[le(O(l.label),1)]),_:1},8,["class"])):A("",!0),l.description?(r(),D(t(_a),{key:1,as:"span",class:se(p.value)},{default:$(()=>[le(O(l.description),1)]),_:1},8,["class"])):A("",!0)],2),d(t(ya),{disabled:l.disabled,"model-value":!!h.modelValue,class:se(i.value),"onUpdate:modelValue":v[0]||(v[0]=_=>o("update:modelValue",!h.modelValue))},{default:$(()=>[s("span",{"aria-hidden":"true",class:se(u.value)},null,2)]),_:1},8,["disabled","model-value","class"])]),_:1},8,["tabindex","class"]))}}),No={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5"},Uo={class:"divide-y text-base"},Po={class:"mb-2 leading-5"},Ho={class:"space-x-1 text-gray-700"},zo={class:"font-medium text-gray-900"},Qo={key:0},Jo={key:1},Wo={key:2},Go={class:"font-medium text-gray-900"},Ko={class:"flex items-center gap-2"},Zo={class:"text-sm text-gray-600"},Yo={key:0,class:"h-1.5 w-1.5 rounded-full bg-blue-400"},Xo=N({__name:"Notifications",setup(a){const e=ls(),l=ts(),o=V(null);wn(o,()=>{e.visible&&e.toggle()},{ignore:["#notifications-btn"]});function n(u){e.toggle(),!u.read&&e.read(u.reference_ticket)}function i(u){switch(u.notification_type){case"Mention":return{name:"TicketAgent",params:{ticketId:u.reference_ticket},hash:"#"+u.reference_comment};case"Assignment":case"Reaction":return{name:"TicketAgent",params:{ticketId:u.reference_ticket}}}}return(u,m)=>{const p=Nn,f=J("Button"),g=zl,h=J("RouterLink");return t(e).visible?(r(),c("span",{key:0,ref_key:"target",ref:o,class:"fixed z-10 h-screen overflow-auto bg-white",style:rt({"box-shadow":"8px 0px 8px rgba(0, 0, 0, 0.1)","max-width":"350px","min-width":"350px",left:t(l).width})},[s("div",No,[m[2]||(m[2]=s("span",{class:"text-lg font-medium"},"Notifications",-1)),s("span",null,[d(f,{theme:"blue",variant:"ghost",onClick:m[0]||(m[0]=()=>t(e).clear.submit())},{icon:$(()=>[d(p,{class:"h-4 w-4"})]),_:1}),d(f,{theme:"gray",variant:"ghost",onClick:m[1]||(m[1]=()=>t(e).toggle())},{icon:$(()=>[d(g,{class:"h-4 w-4"})]),_:1})])]),s("div",Uo,[(r(!0),c(q,null,G(t(e).data,v=>(r(),D(h,{key:v.name,class:"flex cursor-pointer items-start gap-3.5 px-5 py-2.5 hover:bg-gray-100",to:i(v),onClick:()=>{n(v)}},{default:$(()=>[d(t(sa),{name:v.user_from},null,8,["name"]),s("span",null,[s("div",Po,[s("span",Ho,[s("span",zo,O(v.user_from),1),v.notification_type==="Mention"?(r(),c("span",Qo,"mentioned you in ticket")):A("",!0),v.notification_type==="Assignment"?(r(),c("span",Jo,"assigned you a ticket")):A("",!0),v.notification_type==="Reaction"?(r(),c("span",Wo,"has reopened the ticket")):A("",!0),s("span",Go,O(v.reference_ticket),1)])]),s("div",Ko,[s("div",Zo,O(t(Wn).tz(v.creation).fromNow()),1),v.read?A("",!0):(r(),c("div",Yo))])])]),_:2},1032,["to","onClick"]))),128))])],4)):A("",!0)}}}),ei={},ti={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function li(a,e){return r(),c("svg",ti,[...e[0]||(e[0]=[s("rect",{x:"0.75",y:"0.75",width:"30.5",height:"30.5",rx:"6.25",stroke:"currentColor","stroke-width":"1.5"},null,-1),s("path",{d:"M24.5011 14.1124C23.3954 12.4873 21.532 11.5477 19.594 11.6747C18.7616 10.1384 17.2211 9.12267 15.4198 9.0084C14.1651 8.93222 12.8979 9.3766 11.9165 10.24C11.2456 10.8367 10.7611 11.5223 10.463 12.2968C10.289 12.7539 9.89151 13.0459 9.46912 13.0459H6.5V15.5852H9.46912C10.9226 15.5852 12.2271 14.6584 12.7737 13.2237C12.9227 12.8301 13.1712 12.4873 13.5439 12.1571C14.0284 11.7255 14.662 11.4969 15.2583 11.535C16.1528 11.5985 16.7863 12.0175 17.1839 12.538C17.6063 13.0205 17.8423 13.7696 17.979 14.5187C18.774 14.2902 19.6437 14.0997 20.476 14.2394C21.1593 14.3536 21.7929 14.7218 22.2525 15.2678C22.327 15.3567 22.4016 15.4456 22.4637 15.5471C23.06 16.4232 23.1718 17.5024 22.7743 18.5689C22.414 19.5592 21.0847 20.4607 19.9791 20.4607H11.3326C10.1524 20.4607 9.18339 19.5592 9.03432 18.4038H6.54969C6.71119 20.9686 8.78585 23 11.3326 23H19.9915C22.1283 23 24.3769 21.451 25.1098 19.4704C25.7931 17.6167 25.5695 15.6614 24.5135 14.0997L24.5011 14.1124Z",fill:"currentColor"},null,-1)])])}const si=Se(ei,[["render",li]]),ni={},ai={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function oi(a,e){return r(),c("svg",ai,[...e[0]||(e[0]=[s("path",{d:"M3 8.5C4.10457 8.5 5 9.39543 5 10.5C5 11.4316 4.3622 12.2113 3.5 12.4336V14C3.5 14.2761 3.27614 14.5 3 14.5C2.72386 14.5 2.5 14.2761 2.5 14V12.4336C1.6378 12.2113 1 11.4316 1 10.5C1 9.39543 1.89543 8.5 3 8.5ZM8 9.5C8.27614 9.5 8.5 9.72386 8.5 10V14C8.5 14.2761 8.27614 14.5 8 14.5C7.72386 14.5 7.5 14.2761 7.5 14V10C7.5 9.72386 7.72386 9.5 8 9.5ZM13 8.5C14.1046 8.5 15 9.39543 15 10.5C15 11.4316 14.3622 12.2113 13.5 12.4336V14C13.5 14.2761 13.2761 14.5 13 14.5C12.7239 14.5 12.5 14.2761 12.5 14V12.4336C11.6378 12.2113 11 11.4316 11 10.5C11 9.39543 11.8954 8.5 13 8.5ZM3 9.5C2.44772 9.5 2 9.94772 2 10.5C2 11.0523 2.44772 11.5 3 11.5C3.55228 11.5 4 11.0523 4 10.5C4 9.94772 3.55228 9.5 3 9.5ZM13 9.5C12.4477 9.5 12 9.94772 12 10.5C12 11.0523 12.4477 11.5 13 11.5C13.5523 11.5 14 11.0523 14 10.5C14 9.94772 13.5523 9.5 13 9.5ZM8 2C8.27614 2 8.5 2.22386 8.5 2.5V4.5C8.5 4.52163 8.49583 4.54257 8.49316 4.56348C9.35898 4.7833 10 5.56581 10 6.5C10 7.60457 9.10457 8.5 8 8.5C6.89543 8.5 6 7.60457 6 6.5C6 5.56614 6.64051 4.78362 7.50586 4.56348C7.50321 4.54261 7.5 4.52158 7.5 4.5V2.5C7.5 2.22386 7.72386 2 8 2ZM8 5.5C7.44772 5.5 7 5.94772 7 6.5C7 7.05228 7.44772 7.5 8 7.5C8.55228 7.5 9 7.05228 9 6.5C9 5.94772 8.55228 5.5 8 5.5ZM3 2C3.27614 2 3.5 2.22386 3.5 2.5V6.5C3.5 6.77614 3.27614 7 3 7C2.72386 7 2.5 6.77614 2.5 6.5V2.5C2.5 2.22386 2.72386 2 3 2ZM13 2C13.2761 2 13.5 2.22386 13.5 2.5V6.5C13.5 6.77614 13.2761 7 13 7C12.7239 7 12.5 6.77614 12.5 6.5V2.5C12.5 2.22386 12.7239 2 13 2Z",fill:"#525252"},null,-1)])])}const ii=Se(ni,[["render",oi]]),ri={},ui={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function di(a,e){return r(),c("svg",ui,[...e[0]||(e[0]=[ll('<path d="M10 11C12.2091 11 14 9.20914 14 7C14 4.79086 12.2091 3 10 3C7.79086 3 6 4.79086 6 7C6 9.20914 7.79086 11 10 11Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10.3 15H7C5.93913 15 4.92172 15.4214 4.17157 16.1716C3.42143 16.9217 3 17.9391 3 19V21H11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22.166 13.834H14.8327C14.3264 13.834 13.916 14.2444 13.916 14.7507V20.2507C13.916 20.7569 14.3264 21.1673 14.8327 21.1673H22.166C22.6723 21.1673 23.0827 20.7569 23.0827 20.2507V14.7507C23.0827 14.2444 22.6723 13.834 22.166 13.834Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M23.0827 15.209L18.9714 17.8215C18.8299 17.9101 18.6663 17.9572 18.4993 17.9572C18.3324 17.9572 18.1688 17.9101 18.0273 17.8215L13.916 15.209" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><g clip-path="url(#clip0_368_1881)"><path d="M16.667 5H21.3337" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 2.66699V7.33366" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_368_1881"><rect width="8" height="8" fill="white" transform="translate(15 1)"></rect></clipPath></defs>',6)])])}const ci=Se(ri,[["render",di]]),pi={},mi={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function fi(a,e){return r(),c("svg",mi,[...e[0]||(e[0]=[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 6.5C9.10457 6.5 10 5.60457 10 4.5C10 3.39543 9.10457 2.5 8 2.5C6.89543 2.5 6 3.39543 6 4.5C6 5.60457 6.89543 6.5 8 6.5ZM8 7.5C9.65685 7.5 11 6.15685 11 4.5C11 2.84315 9.65685 1.5 8 1.5C6.34315 1.5 5 2.84315 5 4.5C5 6.15685 6.34315 7.5 8 7.5ZM12 13.5C13.1046 13.5 14 12.6046 14 11.5C14 10.3954 13.1046 9.5 12 9.5C10.8954 9.5 10 10.3954 10 11.5C10 12.6046 10.8954 13.5 12 13.5ZM12 14.5C13.6569 14.5 15 13.1569 15 11.5C15 9.84315 13.6569 8.5 12 8.5C10.3431 8.5 9 9.84315 9 11.5C9 13.1569 10.3431 14.5 12 14.5ZM6 11.5C6 12.6046 5.10457 13.5 4 13.5C2.89543 13.5 2 12.6046 2 11.5C2 10.3954 2.89543 9.5 4 9.5C5.10457 9.5 6 10.3954 6 11.5ZM7 11.5C7 13.1569 5.65685 14.5 4 14.5C2.34315 14.5 1 13.1569 1 11.5C1 9.84315 2.34315 8.5 4 8.5C5.65685 8.5 7 9.84315 7 11.5Z",fill:"currentColor"},null,-1)])])}const Ot=Se(pi,[["render",fi]]),vi={},gi={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-minimize-2"};function yi(a,e){return r(),c("svg",gi,[...e[0]||(e[0]=[s("polyline",{points:"4 14 10 14 10 20"},null,-1),s("polyline",{points:"20 10 14 10 14 4"},null,-1),s("line",{x1:"14",y1:"10",x2:"21",y2:"3"},null,-1),s("line",{x1:"3",y1:"21",x2:"10",y2:"14"},null,-1)])])}const hi=Se(vi,[["render",yi]]),_i={},bi={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-maximize-2"};function xi(a,e){return r(),c("svg",bi,[...e[0]||(e[0]=[s("polyline",{points:"15 3 21 3 21 9"},null,-1),s("polyline",{points:"9 21 3 21 3 15"},null,-1),s("line",{x1:"21",y1:"3",x2:"14",y2:"10"},null,-1),s("line",{x1:"3",y1:"21",x2:"10",y2:"14"},null,-1)])])}const wi=Se(_i,[["render",xi]]),ki={},Ci={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function $i(a,e){return r(),c("svg",Ci,[...e[0]||(e[0]=[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.37988 9.37695V9.44531H8.39062V9.37695C8.39062 9.10352 8.41992 8.88542 8.47852 8.72266C8.53711 8.55664 8.62826 8.41504 8.75195 8.29785C8.87891 8.18066 9.04329 8.06185 9.24512 7.94141C9.56087 7.74609 9.8099 7.51009 9.99219 7.2334C10.1745 6.95345 10.2656 6.61328 10.2656 6.21289C10.2656 5.82878 10.1745 5.49186 9.99219 5.20215C9.81315 4.91244 9.56087 4.6862 9.23535 4.52344C8.90983 4.36068 8.52734 4.2793 8.08789 4.2793C7.69401 4.2793 7.33268 4.35579 7.00391 4.50879C6.67513 4.65853 6.41146 4.88151 6.21289 5.17773C6.01432 5.4707 5.90853 5.82878 5.89551 6.25195H6.96973C6.986 6.0013 7.04948 5.79785 7.16016 5.6416C7.27083 5.4821 7.40755 5.36491 7.57031 5.29004C7.73633 5.21517 7.90885 5.17773 8.08789 5.17773C8.28971 5.17773 8.47363 5.22005 8.63965 5.30469C8.80892 5.38932 8.94075 5.50814 9.03516 5.66113C9.13281 5.81413 9.18164 5.99479 9.18164 6.20312C9.18164 6.47005 9.11003 6.69954 8.9668 6.8916C8.82357 7.0804 8.64453 7.23828 8.42969 7.36523C8.21159 7.50195 8.02279 7.64193 7.86328 7.78516C7.70703 7.92513 7.58659 8.11556 7.50195 8.35645C7.42057 8.59408 7.37988 8.93425 7.37988 9.37695ZM7.37988 11.5205C7.51986 11.654 7.69076 11.7207 7.89258 11.7207C8.09766 11.7207 8.26855 11.654 8.40527 11.5205C8.54525 11.3838 8.61523 11.2161 8.61523 11.0176C8.61523 10.8158 8.54525 10.6481 8.40527 10.5146C8.26855 10.3779 8.09766 10.3096 7.89258 10.3096C7.69076 10.3096 7.51986 10.3779 7.37988 10.5146C7.24316 10.6481 7.1748 10.8158 7.1748 11.0176C7.1748 11.2161 7.24316 11.3838 7.37988 11.5205Z",fill:"currentColor"},null,-1)])])}const cs=Se(ki,[["render",$i]]),Ai={class:"flex flex-col justify-center items-center gap-1 mt-4 mb-7"},Si={class:"text-base font-medium"},Vi={class:"text-p-base font-normal"},Ei={class:"flex flex-col gap-2.5 overflow-hidden"},Di={class:"flex justify-between items-center py-0.5"},Ii={class:"flex"},Li={class:"flex flex-col gap-1.5 overflow-y-auto"},Bi=["onClick"],Fi={__name:"OnboardingSteps",props:{appName:{type:String,default:"frappecrm"},title:{type:String,default:"Frappe CRM"},logo:{type:Object,required:!0},afterSkip:{type:Function,default:()=>{}},afterSkipAll:{type:Function,default:()=>{}},afterReset:{type:Function,default:()=>{}},afterResetAll:{type:Function,default:()=>{}}},setup(a){const e=a;function l(v){if(v.dependsOn&&!v.completed){const _=n.find(y=>y.name===v.dependsOn);if(_&&!_.completed)return!0}return!1}function o(v){if(v.dependsOn&&!v.completed){const _=n.find(y=>y.name===v.dependsOn);if(_&&!_.completed)return`You need to complete "${_.title}" first.`}return""}const{steps:n,stepsCompleted:i,totalSteps:u,completedPercentage:m,skip:p,skipAll:f,reset:g,resetAll:h}=gt(e.appName);return(v,_)=>(r(),c(q,null,[s("div",Ai,[(r(),D(Qe(a.logo),{class:"size-10 shrink-0 rounded mb-4"})),s("div",Si,O("Welcome to "+a.title),1),s("div",Vi,O(`${t(i)}/${t(u)} steps completed`),1)]),s("div",Ei,[s("div",Di,[d(sl,{label:`${t(m)}% completed`,theme:t(m)==100?"green":"orange",size:"lg"},null,8,["label","theme"]),s("div",Ii,[t(m)!=0?(r(),D(Q,{key:0,variant:"ghost",label:"Reset all",onClick:_[0]||(_[0]=()=>t(h)(a.afterResetAll))})):A("",!0),t(m)!=100?(r(),D(Q,{key:1,variant:"ghost",label:"Skip all",onClick:_[1]||(_[1]=()=>t(f)(a.afterSkipAll))})):A("",!0)])]),s("div",Li,[(r(!0),c(q,null,G(t(n),y=>(r(),c("div",{key:y.title,class:"group w-full flex gap-2 justify-between items-center hover:bg-surface-gray-1 rounded px-2 py-1.5 cursor-pointer",onClick:_e(()=>!y.completed&&!l(y)&&y.onClick(),["stop"])},[(r(),D(Qe(l(y)?bl:"div"),{text:o(y)},{default:$(()=>[s("div",{class:se(["flex gap-2 items-center",[y.completed?"text-ink-gray-5":l(y)?"text-ink-gray-4":"text-ink-gray-8"]])},[(r(),D(Qe(y.icon),{class:"h-4"})),s("div",{class:se(["text-base",{"line-through":y.completed}])},O(y.title),3)],2)]),_:2},1032,["text"])),!y.completed&&!l(y)?(r(),D(Q,{key:0,label:"Skip",class:"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex",onClick:()=>t(p)(y.name,a.afterSkip)},null,8,["onClick"])):l(y)?A("",!0):(r(),D(Q,{key:1,label:"Reset",class:"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex",onClick:_e(()=>t(g)(y.name,a.afterReset),["stop"])},null,8,["onClick"]))],8,Bi))),128))])])],64))}},Oi={class:"flex flex-col gap-2 overflow-hidden"},Mi={class:"m-1"},ji={class:"flex justify-between items-center text-base text-ink-gray-5 mx-2"},Ri={class:"flex flex-col gap-1.5 overflow-y-auto"},qi=["onClick"],Ti={class:"flex items-center gap-2"},Ni={class:"text-base text-ink-gray-8"},Ui={class:"flex flex-col gap-1.5 ml-5"},Pi=["onClick"],Hi={class:"flex items-center gap-2"},zi={class:"text-base text-ink-gray-8"},Qi={__name:"HelpCenter",props:Ue({docsLink:{type:String,default:"https://docs.frappe.io/crm"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=a,l=V(null),o=V(""),n=Re(a,"modelValue"),i=P(()=>o.value?n.value.filter(p=>{const f=p.subArticles.filter(g=>g.title.toLowerCase().includes(o.value.toLowerCase()));return p.title.toLowerCase().includes(o.value.toLowerCase())||f.length>0?{...p,subArticles:f}:!1}):n.value);function u(){window.open(e.docsLink,"_blank")}function m(p){window.open(`${e.docsLink}/${p}`,"_blank")}return Ce(()=>{var p,f;(f=(p=l.value)==null?void 0:p.el)==null||f.focus()}),(p,f)=>(r(),c("div",Oi,[s("div",Mi,[d(kn,{ref_key:"searchInput",ref:l,placeholder:"Search articles...",modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=g=>o.value=g),debounce:300},{prefix:$(()=>[d(Oe,{name:"search",class:"h-4 text-ink-gray-5"})]),_:1},8,["modelValue"])]),s("div",ji,[f[1]||(f[1]=s("div",null,"All articles",-1)),d(Q,{variant:"ghost",onClick:u},{default:$(()=>[d(Oe,{name:"arrow-up-right",class:"h-4 text-ink-gray-5"})]),_:1})]),s("div",Ri,[(r(!0),c(q,null,G(i.value,g=>(r(),c("div",{key:g.title,class:"flex flex-col gap-1.5"},[s("div",{class:"flex items-center justify-between p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer",onClick:h=>g.opened=!g.opened},[s("div",Ti,[d(Oe,{name:g.opened?"chevron-down":"chevron-right",class:"h-4 text-ink-gray-5"},null,8,["name"]),s("div",Ni,O(g.title),1)])],8,qi),Ee(s("div",Ui,[(r(!0),c(q,null,G(g.subArticles,h=>(r(),c("div",{key:h.name,class:"group flex items-center justify-between gap-2 p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer",onClick:()=>m(h.name)},[s("div",Hi,[d(Oe,{name:"file-text",class:"h-4 text-ink-gray-5"}),s("div",zi,O(h.title),1)]),d(Oe,{name:"arrow-up-right",class:"h-4 hidden group-hover:flex text-ink-gray-5"})],8,Pi))),128))],512),[[Ye,g.opened]])]))),128))])]))}},Ji={class:"flex items-center justify-between px-2 py-1.5"},Wi={class:"text-base font-medium"},Gi={class:"flex gap-1"},Ki={class:"h-full overflow-hidden flex flex-col"},Zi={class:"flex flex-col gap-1.5"},Yi=["onClick"],Xi={class:"text-base"},er={__name:"HelpModal",props:Ue({appName:{type:String,default:"frappecrm"},title:{type:String,default:"Frappe CRM"},logo:{type:Object,required:!0},afterSkip:{type:Function,default:()=>{}},afterSkipAll:{type:Function,default:()=>{}},afterReset:{type:Function,default:()=>{}},afterResetAll:{type:Function,default:()=>{}},docsLink:{type:String,default:"https://docs.frappe.io/crm"}},{modelValue:{},modelModifiers:{},articles:{},articlesModifiers:{}}),emits:["update:modelValue","update:articles"],setup(a){const e=a,{syncStatus:l,resetAll:o,isOnboardingStepsCompleted:n}=gt(e.appName),i=Re(a,"modelValue"),u=Re(a,"articles"),m=P(()=>{if(!n.value&&!Be.value)return"Getting started";if(Be.value)return"Help center"}),p=P(()=>[{icon:Ot,label:"Reset onboarding steps",onClick:g,condition:()=>Be.value&&n.value}].filter(v=>v.condition())),f=P(()=>[{icon:cs,label:"Help centre",onClick:()=>{l(),Be.value=!0},condition:!n.value&&!Be.value},{icon:Ot,label:"Getting started",onClick:()=>Be.value=!1,condition:Be.value&&!n.value}].filter(v=>v.condition));function g(){o(),n.value=!1,Be.value=!1}return Ce(()=>{n.value&&(Be.value=!0)}),(h,v)=>Ee((r(),c("div",{class:se(["fixed z-50 right-0 w-80 h-[calc(100%_-_80px)] text-ink-gray-9 m-5 mt-[62px] p-3 flex gap-2 flex-col justify-between rounded-lg bg-surface-modal shadow-2xl",{"top-[calc(100%_-_120px)] border":t($e)}]),onClick:v[3]||(v[3]=_e(()=>{},["stop"]))},[s("div",Ji,[s("div",Wi,O(m.value),1),s("div",Gi,[p.value.length?(r(),D(yt,{key:0,options:p.value},{default:$(()=>[d(Q,{variant:"ghost",icon:"more-horizontal"})]),_:1},8,["options"])):A("",!0),d(Q,{onClick:v[0]||(v[0]=_=>$e.value=!t($e)),variant:"ghost"},{default:$(()=>[(r(),D(Qe(t($e)?wi:hi),{class:"h-3.5"}))]),_:1}),d(Q,{variant:"ghost",onClick:v[1]||(v[1]=_=>i.value=!1)},{default:$(()=>[d(Oe,{name:"x",class:"h-3.5"})]),_:1})])]),s("div",Ki,[!t(n)&&!t(Be)?(r(),D(Fi,{key:0,title:a.title,logo:a.logo,afterSkip:a.afterSkip,afterSkipAll:a.afterSkipAll,afterReset:a.afterReset,afterResetAll:a.afterResetAll,appName:a.appName},null,8,["title","logo","afterSkip","afterSkipAll","afterReset","afterResetAll","appName"])):t(Be)?(r(),D(Qi,{key:1,modelValue:u.value,"onUpdate:modelValue":v[2]||(v[2]=_=>u.value=_),docsLink:a.docsLink},null,8,["modelValue","docsLink"])):A("",!0)]),(r(!0),c(q,null,G(f.value,_=>(r(),c("div",Zi,[s("div",{class:"w-full flex gap-2 items-center hover:bg-surface-gray-1 text-ink-gray-8 rounded px-2 py-1.5 cursor-pointer",onClick:_.onClick},[(r(),D(Qe(_.icon),{class:"h-4"})),s("div",Xi,O(_.label),1)],8,Yi)]))),256))],2)),[[Ye,i.value]])}},tr={key:0,class:"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base"},lr={key:0,class:"inline-flex text-ink-gray-9 gap-2"},sr={class:"flex flex-col text-p-sm gap-0.5"},nr={class:"text-ink-gray-7"},ar={key:1,class:"flex flex-col gap-1"},or={class:"flex items-center justify-between gap-1"},ir={class:"flex items-center gap-2 shrink-0"},rr={__name:"GettingStartedBanner",props:{isSidebarCollapsed:{type:Boolean,default:!1},appName:{type:String,default:"frappecrm"}},setup(a){const e=a,{stepsCompleted:l,totalSteps:o,isOnboardingStepsCompleted:n}=gt(e.appName),i=()=>{$e.value=!1,at.value=!0};return(u,m)=>a.isSidebarCollapsed?t(l)!=t(o)?(r(),D(Q,{key:1,onClick:i},{default:$(()=>[d(Ot,{class:"h-4 my-0.5 shrink-0"})]),_:1})):A("",!0):(r(),c("div",tr,[t(l)!=t(o)?(r(),c("div",lr,[d(Ot,{class:"h-4 my-0.5 shrink-0"}),s("div",sr,[m[1]||(m[1]=s("div",{class:"font-medium"},O("Getting started"),-1)),s("div",nr,O(`${t(l)}/${t(o)} steps`),1)])])):(r(),c("div",ar,[s("div",or,[s("div",ir,[d(Ot,{class:"h-4 my-0.5"}),m[2]||(m[2]=s("div",{class:"text-ink-gray-9 font-medium"},O("You are all set"),-1))]),d(Oe,{name:"x",class:"h-4 cursor-pointer",onClick:m[0]||(m[0]=()=>{Be.value=!0,n.value=!0})})]),m[3]||(m[3]=s("div",{class:"text-p-sm text-ink-gray-7"},O("All steps are completed successfully"),-1))])),t(l)!=t(o)?(r(),D(Q,{key:2,label:t(l)==0?"Start now":"Continue",theme:"blue",onClick:i},{prefix:$(()=>[d(Oe,{name:"chevrons-right",class:"size-4"})]),_:1},8,["label"])):A("",!0)]))}},ur={class:"flex flex-col gap-2 text-ink-gray-9 text-base"},dr={key:0},cr={key:1,class:"w-full rounded",controls:"",autoplay:"",muted:""},pr=["src"],mr={__name:"IntermediateStepModal",props:Ue({currentStep:{type:Object,default:{title:"Title",message:"Message",videoURL:"",buttonLabel:"Button Label",onClick:()=>{}}},dialogOptions:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=a,l=Re(a,"modelValue"),o=P(()=>e.dialogOptions&&Object.keys(e.dialogOptions).length?e.dialogOptions:{title:e.currentStep.title,size:"2xl",actions:[{label:e.currentStep.buttonLabel,variant:"solid",onClick:e.currentStep.onClick}]});return(n,i)=>(r(),D(t(Le),{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=u=>l.value=u),options:o.value},{"boday-header":$(()=>[ue(n.$slots,"body-header")]),"body-content":$(()=>[ue(n.$slots,"default",{},()=>[s("div",ur,[a.currentStep.message?(r(),c("div",dr,O(a.currentStep.message),1)):A("",!0),a.currentStep.videoURL?(r(),c("video",cr,[s("source",{src:a.currentStep.videoURL,type:"video/mp4"},null,8,pr),i[1]||(i[1]=le(" Your browser does not support the video tag. ",-1))])):A("",!0)])])]),actions:$(()=>[ue(n.$slots,"actions")]),_:3},8,["modelValue","options"]))}},fr={},vr={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function gr(a,e){return r(),c("svg",vr,[...e[0]||(e[0]=[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.2641 1C5.5758 1 4.97583 1.46845 4.80889 2.1362L3.57555 7.06953C3.33887 8.01625 4.05491 8.93333 5.03077 8.93333H7.50682L6.72168 14.4293C6.68838 14.6624 6.82229 14.8872 7.04319 14.9689C7.26408 15.0507 7.51204 14.9671 7.63849 14.7684L13.2161 6.00354C13.6398 5.33782 13.1616 4.46667 12.3725 4.46667H9.59038L10.3017 1.62127C10.3391 1.4719 10.3055 1.31365 10.2108 1.19229C10.116 1.07094 9.97063 1 9.81666 1H6.2641ZM5.77903 2.37873C5.83468 2.15615 6.03467 2 6.2641 2H9.17627L8.46492 4.8454C8.42758 4.99477 8.46114 5.15302 8.55589 5.27437C8.65064 5.39573 8.79602 5.46667 8.94999 5.46667H12.3725L8.0395 12.2757L8.5783 8.50404C8.5988 8.36056 8.55602 8.21523 8.46105 8.10573C8.36608 7.99623 8.22827 7.93333 8.08332 7.93333H5.03077C4.70548 7.93333 4.4668 7.62764 4.5457 7.31207L5.77903 2.37873Z",fill:"currentColor"},null,-1)])])}const jl=Se(fr,[["render",gr]]),yr={key:0,class:"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base"},hr={class:"flex flex-col gap-1"},_r={class:"inline-flex text-ink-gray-9 gap-2 items-center font-medium"},br="Upgrade to a paid plan for uninterrupted services",Rl={__name:"TrialBanner",props:{isSidebarCollapsed:{type:Boolean,default:!1},afterUpgrade:{type:Function,default:()=>{}}},setup(a){const e=a,l=V(0),o=V(!1),n=V("https://frappecloud.com"),i=V(""),u=P(()=>l.value>1?"Trial ends in "+l.value+" days":"Trial ends tomorrow");fe({url:"frappe.integrations.frappe_providers.frappecloud_billing.current_site_info",cache:"current_site_info_data",auto:!0,onSuccess:f=>{l.value=m(f.trial_end_date),n.value=f.base_url,i.value=f.site_name,o.value=f.plan.is_trial_plan&&l.value>0}});function m(f){if(!f)return 0;f=new Date(f);const h=f-new Date;return Math.ceil(h/(1e3*60*60*24))}function p(){var f;window.open(`${n.value}/dashboard/sites/${i.value}`,"_blank"),(f=e.afterUpgrade)==null||f.call(e)}return(f,g)=>!a.isSidebarCollapsed&&o.value?(r(),c("div",yr,[s("div",hr,[s("div",_r,[d(Oe,{class:"h-4",name:"info"}),le(" "+O(u.value),1)]),s("div",{class:"text-ink-gray-7 text-p-sm"},O(br))]),d(t(Q),{label:"Upgrade plan",theme:"blue",onClick:p},{prefix:$(()=>[d(jl,{class:"size-4"})]),_:1})])):a.isSidebarCollapsed&&o.value?(r(),D(t(Q),{key:1,onClick:p},{default:$(()=>[d(jl,{class:"h-4 my-0.5 shrink-0"})]),_:1})):A("",!0)}},xr={},wr={class:"flex border-b pr-5"};function kr(a,e){return r(),c("div",wr,[...e[0]||(e[0]=[s("div",{id:"app-header",class:"flex-1 w-full"},null,-1)])])}const Cr=Se(xr,[["render",kr]]),Kt=20,ye=ut({doctype:"HD Agent",fields:["name","user_image","agent_name","is_active"],start:0,pageLength:Kt,orderBy:"creation desc",auto:!Ne.value}),wt=V("Active"),pt=V(!1),$r=()=>{const a=V(""),e=Pe({});me(a,o=>{ye.filters={agent_name:["like",`%${o}%`],...e},o||(ye.filters={...e},ye.start=0,ye.pageLength=Kt),ye.reload()}),me(e,o=>{ye.filters={...ye.filters,...o},ye.start=0,ye.pageLength=Kt,ye.reload()},{deep:!0}),me(wt,o=>{o==="Active"?ye.filters={...ye.filters,is_active:1}:o==="Inactive"?ye.filters={...ye.filters,is_active:0}:ye.filters={...ye.filters,is_active:["in",[0,1]]},ye.start=0,ye.pageLength=Kt,ye.reload()},{immediate:!0});async function l(o,n){await fe({url:"frappe.client.set_value",params:{doctype:"HD Agent",name:o,fieldname:"is_active",value:n}}).submit()}return{search:a,agents:ye,filters:e,updateAgent:l}},Ar={class:"lucide lucide-image-up",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Sr(a,e){return r(),c("svg",Ar,[...e[0]||(e[0]=[s("path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21"},null,-1),s("path",{d:"m14 19.5 3-3 3 3"},null,-1),s("path",{d:"M17 22v-5.5"},null,-1),s("circle",{cx:"9",cy:"9",r:"2"},null,-1)])])}const Vr=Y({name:"lucide-image-up",render:Sr}),Er={class:"lucide lucide-mail",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Dr(a,e){return r(),c("svg",Er,[...e[0]||(e[0]=[s("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"},null,-1),s("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"},null,-1)])])}const ps=Y({name:"lucide-mail",render:Dr}),Ir={class:"lucide lucide-shield-check",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Lr(a,e){return r(),c("svg",Ir,[...e[0]||(e[0]=[s("path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"},null,-1),s("path",{d:"m9 12 2 2 4-4"},null,-1)])])}const Br=Y({name:"lucide-shield-check",render:Lr}),Fr={class:"lucide lucide-briefcase",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Or(a,e){return r(),c("svg",Fr,[...e[0]||(e[0]=[s("path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},null,-1),s("rect",{width:"20",height:"14",x:"2",y:"6",rx:"2"},null,-1)])])}const Mr=Y({name:"lucide-briefcase",render:Or}),jr={class:"space-y-3"},Rr={key:0,class:"flex max-h-[300px] min-h-[100px] flex-col overflow-y-auto rounded border bg-gray-100 px-2"},qr={class:"flex flex-wrap gap-2 py-2"},Tr=["title"],Nr={class:"ml-2 text-base"},Ur=["onClick"],Pr={class:"flex justify-end items-center"},ms={__name:"AddNewAgentsDialog",props:{show:Boolean,title:String},emits:["close","update:modelValue","onAgentsInvited"],setup(a,{emit:e}){const l=a,o=e,n=V(""),i=V([]),u=V(!1),{updateOnboardingStep:m}=gt("helpdesk"),{isManager:p}=xl(),f=k=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(k),g=k=>{if(k=k.replaceAll(" ",""),k==""){document.getElementById("searchInput").value="";return}const L=k,b=k.split(",");let x=!1;u.value=!1,b.forEach(E=>{f(E)&&(b.length>1||L.includes(",")?(h(E),x=!0):u.value=!0)}),x&&y()},h=k=>{i.value=[...new Set([...i.value,k])]},v=k=>{i.value=i.value.filter(L=>L!==k)},_=()=>{i.value=[]},y=()=>{u.value=!1,n.value="";const k=document.getElementById("searchInput");k.value="",k.focus()},w=()=>{n.value="",i.value=[],o("close")},I=fe({url:"helpdesk.api.agent.sent_invites",onSuccess:k=>{o("onAgentsInvited",i.value),u.value=!1,n.value="",i.value=[],p&&m("invite_agents"),W.success("Invites sent successfully!"),w()}}),S=()=>{I.submit({emails:i.value})};return(k,L)=>{const b=J("Button");return r(),D(t(Le),{options:{title:l.title},"model-value":a.show,"onUpdate:modelValue":L[4]||(L[4]=x=>k.$emit("update:modelValue",x)),onClose:L[5]||(L[5]=x=>w())},Cn({"body-content":$(()=>[s("div",jr,[s("form",{onSubmit:L[3]||(L[3]=_e((...x)=>k.onSubmit&&k.onSubmit(...x),["prevent"])),class:"flex flex-row items-center space-x-2"},[d(t($n),{id:"searchInput",class:"w-full",type:"text",modelValue:n.value,"onUpdate:modelValue":L[0]||(L[0]=x=>n.value=x),placeholder:"Type emails",onInput:L[1]||(L[1]=x=>g(x))},null,8,["modelValue"]),d(b,{appearance:"primary",type:"submit",disabled:!u.value,onClick:L[2]||(L[2]=()=>{h(n.value),y()})},{default:$(()=>[...L[6]||(L[6]=[le(" Add ",-1)])]),_:1},8,["disabled"])],32),i.value.length?(r(),c("div",Rr,[s("ul",qr,[(r(!0),c(q,null,G(i.value.slice().reverse(),x=>(r(),c("li",{class:"flex items-center space-x-2 rounded bg-white p-1 shadow",key:x,title:x},[s("span",Nr,O(x),1),s("button",{class:"grid h-4 w-4 place-items-center rounded text-gray-700 hover:bg-gray-300",onClick:E=>v(x)},[d(t(Oe),{class:"w-3",name:"x"})],8,Ur)],8,Tr))),128))])])):A("",!0)])]),_:2},[i.value.length?{name:"actions",fn:$(()=>[s("div",Pr,[d(b,{disabled:i.value.length==0,appearance:"primary",onClick:S,class:"mr-2",variant:"solid",loading:t(I).loading},{default:$(()=>[...L[7]||(L[7]=[le("Send Invites ",-1)])]),_:1},8,["disabled","loading"]),d(b,{onClick:_},{default:$(()=>[...L[8]||(L[8]=[le(" Clear All ",-1)])]),_:1})])]),key:"0"}:void 0]),1032,["options","model-value"])}}},Hr={class:"flex items-start justify-between"},zr={class:"flex flex-col gap-2"},Qr={class:"text-lg font-semibold text-ink-gray-8"},Jr={class:"text-sm text-gray-700 max-w-md leading-5 text-ink-gray-6"},Wr={key:0,class:"mt-6"},ct=N({__name:"SettingsLayoutHeader",props:{title:{type:String},description:{type:String}},setup(a){return(e,l)=>(r(),c(q,null,[s("div",Hr,[s("div",zr,[ue(e.$slots,"title",{},()=>[s("h1",Qr,O(a.title),1)]),ue(e.$slots,"description",{},()=>[s("p",Jr,O(a.description),1)])]),ue(e.$slots,"actions")]),e.$slots["bottom-section"]?(r(),c("div",Wr,[ue(e.$slots,"bottom-section")])):A("",!0)],64))}}),Gr={class:"flex items-center space-x-3 w-4/5"},Kr={class:"flex items-center gap-2"},Zr={class:"text-base"},Yr={class:"text-base text-ink-gray-6 mt-1"},fs=N({__name:"AgentCard",props:{agent:{type:Object,required:!0},showStatus:{type:Boolean,default:!1}},setup(a){return(e,l)=>{const o=J("Badge");return r(),c("div",{class:se(["flex items-center justify-between py-2",e.$attrs])},[s("div",Gr,[d(t(ht),{image:a.agent.user_image,label:a.agent.agent_name,size:"xl"},null,8,["image","label"]),s("div",null,[s("div",Kr,[s("p",Zr,O(a.agent.agent_name),1),a.showStatus?(r(),D(o,{key:0,label:"Inactive",theme:"gray",class:se(a.showStatus&&!a.agent.is_active?"opacity-100":"opacity-0"),variant:"subtle"},null,8,["class"])):A("",!0)]),s("div",Yr,O(a.agent.name),1)])]),ue(e.$slots,"right")],2)}}}),Xr={class:"flex items-center gap-2"},eu=["onClick"],tu={class:"flex items-center justify-between flex-1"},lu={class:"whitespace-nowrap"},su={key:0,class:"flex mt-28 justify-between w-full h-full"},nu={key:1,class:"flex mt-28 justify-between w-full h-full"},au={key:2,class:"overflow-y-auto w-full hide-scrollbar mt-4"},ou={class:"flex justify-center"},iu=N({__name:"Agents",setup(a){const{getUserRole:e,updateUserRoleCache:l}=wl(),{isManager:o}=xl(),n=$r(),i=n.search,u=n.agents;function m(v){const _=e(v),y=[{label:"Agent",component:w=>p({role:"Agent",active:w.active,selected:_==="Agent",onClick:()=>{f(v,"Agent")}})}];return o&&y.unshift({label:"Manager",component:w=>p({role:"Manager",active:w.active,selected:_==="Manager",onClick:()=>{f(v,"Manager")}})}),y}function p({active:v,role:_,onClick:y,selected:w}){return ce("button",{class:[v?"bg-surface-gray-2":"text-ink-gray-7","group flex w-full justify-between items-center rounded-md px-2 py-2 text-base"],onClick:w?null:y},[ce("span",{class:"whitespace-nowrap"},_),w?ce(cl,{class:["h-4 w-4 shrink-0 text-ink-gray-7"],"aria-hidden":!0}):null])}function f(v,_){e(v)!==_&&et("helpdesk.helpdesk.doctype.hd_agent.hd_agent.update_agent_role",{user:v,new_role:_}).then(()=>{l(v,_),W.success(`Role updated to ${_}`)})}function g(v){let _=n.filters;return[{label:"Disable Agent",icon:"x-circle",onClick:async()=>{await n.updateAgent(v.name,0),u.reload({..._,search:i.value})},condition:()=>v.is_active},{label:"Enable Agent",icon:"check-circle",onClick:async()=>{await n.updateAgent(v.name,1),u.reload({..._,search:i.value})},condition:()=>!v.is_active}]}const h=[{label:"All",onClick:()=>{n.filters.is_active=["in",[0,1]],wt.value="All"}},{label:"Active",onClick:()=>{n.filters.is_active=["=",1],wt.value="Active"}},{label:"Inactive",onClick:()=>{n.filters.is_active=["=",0],wt.value="Inactive"}}];return(v,_)=>{var x,E;const y=Ql,w=J("Button"),I=Ut,S=J("FeatherIcon"),k=st,L=ct,b=ms;return r(),c(q,null,[s("div",{class:se([v.$attrs.class,"px-10 py-8"])},[d(L,{title:"Agents",description:"Add, manage agents and assign roles to them."},{actions:$(()=>[d(w,{onClick:_[0]||(_[0]=()=>pt.value=!t(pt)),label:"New",variant:"solid"},{prefix:$(()=>[d(y,{class:"h-4 w-4 stroke-1.5"})]),_:1})]),"bottom-section":$(()=>[s("div",Xr,[d(t(ge),{modelValue:t(i),"onUpdate:modelValue":_[1]||(_[1]=C=>mt(i)?i.value=C:null),placeholder:"Search",type:"text",debounce:300,class:"w-60"},{prefix:$(()=>[d(I,{class:"h-4 w-4 text-gray-500"})]),_:1},8,["modelValue"]),d(k,{options:h,placement:"right"},{default:$(({open:C})=>[d(w,{label:t(wt),class:"flex items-center justify-between w-[90px]"},{suffix:$(()=>[d(S,{name:C?"chevron-up":"chevron-down",class:"h-4"},null,8,["name"])]),_:2},1032,["label"])]),item:$(({item:C,active:F})=>[s("button",{class:se(["group flex text-ink-gray-6 gap-4 h-7 w-full justify-between items-center rounded px-2 text-base",{"bg-surface-gray-3":F}]),onClick:C.onClick},[s("div",tu,[s("span",lu,O(C.label),1),t(wt)===C.label?(r(),D(S,{key:0,name:"check",class:"size-4 text-ink-gray-7"})):A("",!0)])],10,eu)]),_:1})])]),_:1}),t(u).loading?(r(),c("div",su,[d(w,{loading:t(u).loading,variant:"ghost",class:"w-full",size:"2xl"},null,8,["loading"])])):A("",!0),!t(u).loading&&!((x=t(u).data)!=null&&x.length)?(r(),c("div",nu,[..._[5]||(_[5]=[s("p",{class:"text-sm text-gray-500 w-full flex justify-center"}," No agents found ",-1)])])):A("",!0),!t(u).loading&&((E=t(u).data)!=null&&E.length)?(r(),c("div",au,[(r(!0),c(q,null,G(t(u).data,(C,F)=>(r(),c("div",{key:C.agent_name},[d(fs,{agent:C,"show-status":!0,class:se(F!==t(u).data.length-1&&"border-b ")},{right:$(()=>[t(o)?(r(),D(k,{key:0,class:"w-1/5 flex justify-end items-center",options:m(C.name),label:t(e)(C.name),button:{label:t(e)(C.name),iconRight:"chevron-down"},placement:"right"},null,8,["options","label","button"])):A("",!0),(r(),D(k,{options:g(C),placement:"right",key:C,class:"ml-2"},{default:$(()=>[d(w,null,{icon:$(()=>[d(t(kl),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["options"]))]),_:2},1032,["agent","class"])]))),128)),s("div",ou,[!t(u).loading&&t(u).hasNextPage?(r(),D(w,{key:0,class:"mt-3.5 p-2",onClick:_[2]||(_[2]=()=>t(u).next()),loading:t(u).loading,label:"Load More","icon-left":"refresh-cw"},null,8,["loading"])):A("",!0)])])):A("",!0)],2),d(b,{title:v.__("Add Agents"),onClose:_[3]||(_[3]=C=>pt.value=!1),modelValue:t(pt),show:t(pt),"onUpdate:modelValue":_[4]||(_[4]=C=>pt.value=C)},null,8,["title","modelValue","show"])],64)}}}),ru={class:"flex flex-col gap-4 px-10 py-8"},uu={class:"flex flex-col gap-2"},du={class:"text-sm text-gray-600"},cu={class:"flex gap-4 items-center"},pu={key:2},mu=N({__name:"Branding",setup(a){var g;const e=Jl(),l=fe({url:"frappe.client.get_value",cache:!0,params:{doctype:"Website Settings",fieldname:"favicon"},onSuccess(h){o.brandFavicon=h.favicon},auto:!0}),o=Pe({brandLogo:e.brandLogo,brandFavicon:((g=l.data)==null?void 0:g.favicon)||""}),n=Pe({logoLoading:!1,faviconLoading:!1}),i=P(()=>[{title:"Brand Logo",image:o.brandLogo,doctype:"HD Settings",fieldname:"brand_logo",loading:n.logoLoading},{title:"Brand Favicon",image:o.brandFavicon,doctype:"Website Settings",fieldname:"favicon",loading:n.faviconLoading}]),u=fe({url:"frappe.client.set_value",debounce:1e3,onSuccess(h){h.doctype==="HD Settings"?p(h.brand_logo):f(h.favicon)},onError(){W.error("Failed to update, please try again"),n.logoLoading=!1,n.faviconLoading=!1}});function m(h,v,_){u.submit({doctype:v,name:v,fieldname:_,value:h}),v==="HD Settings"?n.logoLoading=!0:n.faviconLoading=!0}function p(h){o.brandLogo=h,n.logoLoading=!1,W.success("Brand logo updated")}function f(h){o.brandFavicon=h,n.faviconLoading=!1,W.success("Favicon updated, please refresh the page to see the changes")}return(h,v)=>{const _=J("Button");return r(),c("div",ru,[d(ct,{title:"Customise your Helpdesk",description:"Customise Helpdesk with your own branding."}),(r(!0),c(q,null,G(i.value,y=>(r(),c("div",uu,[s("p",du,O(y.title),1),s("div",cu,[y.image&&!y.loading?(r(),D(t(ht),{key:0,size:"3xl",image:y.image},null,8,["image"])):A("",!0),y.image?(r(),c("div",pu,[d(_,{label:"Remove",onClick:w=>m("",y.doctype,y.fieldname),iconLeft:"trash",loading:y.loading},null,8,["onClick","loading"])])):(r(),D(t(oa),{key:1,fileTypes:["image/*"],onSuccess:w=>{m(w.file_url,y.doctype,y.fieldname)}},{default:$(({openFileSelector:w})=>[d(_,{onClick:I=>w(),iconLeft:"upload",label:"Upload Image",loading:y.loading},null,8,["onClick","loading"])]),_:2},1032,["onSuccess"]))])]))),256))])}}}),vs="/assets/helpdesk/desk/assets/gmail-6497f877.png",gs="/assets/helpdesk/desk/assets/outlook-e028ee9b.png",ys="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwMAAALUBAMAAAClQPMzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAACRQTFRFR3BMNqzpdMXvXb3tr+f3o+P1AJ/ZGoPjALPjmeH1dc3uBqfjM5e/jQAAAAZ0Uk5TAPVwwVLTgnc47wAABIBJREFUeNrt1rEJwlAYhdEHNpZa2UpwAxewcAXtbdJYpQo4gATsBVdwAOcTd/DyknC+9zY4XPhLkSRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJGmGL/cTazo5gOWR69KFWCBAgQIAAAQIECBAgmArBHYEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAMHfO4U6X9tP4reb9aX77/v9rqtH8Ar1bEOl1oWgNsGAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjqEfShbu9QTajD/AhS8yqzCwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIKheE2p3DFUkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZLG2Bet4fvU2eVggAAAAABJRU5ErkJggg==",hs="/assets/helpdesk/desk/assets/sparkpost-3d6653ba.webp",_s="/assets/helpdesk/desk/assets/yahoo-bf2216d3.png",bs="/assets/helpdesk/desk/assets/yandex-5e1e6be8.png",xs="/assets/helpdesk/desk/assets/frappe-mail-579163d7.svg",ws=[{label:"Account Name",name:"email_account_name",type:"text",placeholder:"Support / Sales"},{label:"Email ID",name:"email_id",type:"email",placeholder:"johndoe@example.com"}],ks=[{label:"Enable Incoming",name:"enable_incoming",type:"checkbox",description:"If enabled, tickets can be created from the incoming emails on this account."},{label:"Enable Outgoing",name:"enable_outgoing",type:"checkbox",description:"If enabled, outgoing emails can be sent from this account."},{label:"Default Incoming",name:"default_incoming",type:"checkbox",description:"If enabled, all replies to your company (eg: replies@yourcomany.com) will come to this account. Note: Only one account can be default incoming."},{label:"Default Outgoing",name:"default_outgoing",type:"checkbox",description:"If enabled, all outgoing emails will be sent from this account. Note: Only one account can be default outgoing."}],Cs=[...ws,{label:"Password",name:"password",type:"password",placeholder:"********"}],$s=[...ws,{label:"Frappe Mail Site",name:"frappe_mail_site",type:"text",placeholder:"https://frappemail.com"},{label:"API Key",name:"api_key",type:"text",placeholder:"********"},{label:"API Secret",name:"api_secret",type:"password",placeholder:"********"}],As=[{name:"GMail",icon:vs,info:`Setting up GMail requires you to enable two factor authentication
		  and app specific passwords. Read more`,link:"https://support.google.com/accounts/answer/185833",custom:!1},{name:"Outlook",icon:gs,info:`Setting up Outlook requires you to enable two factor authentication
		  and app specific passwords. Read more`,link:"https://support.microsoft.com/en-us/account-billing/how-to-get-and-use-app-passwords-5896ed9b-4263-e681-128a-a6f2979a7944",custom:!1},{name:"Sendgrid",icon:ys,info:`Setting up Sendgrid requires you to enable two factor authentication
		  and app specific passwords. Read more `,link:"https://sendgrid.com/docs/ui/account-and-settings/two-factor-authentication/",custom:!1},{name:"SparkPost",icon:hs,info:`Setting up SparkPost requires you to enable two factor authentication
		  and app specific passwords. Read more `,link:"https://support.sparkpost.com/docs/my-account-and-profile/enabling-two-factor-authentication",custom:!1},{name:"Yahoo",icon:_s,info:`Setting up Yahoo requires you to enable two factor authentication
		  and app specific passwords. Read more `,link:"https://help.yahoo.com/kb/SLN15241.html",custom:!1},{name:"Yandex",icon:bs,info:`Setting up Yandex requires you to enable two factor authentication
		  and app specific passwords. Read more `,link:"https://yandex.com/support/id/authorization/app-passwords.html",custom:!1},{name:"Frappe Mail",icon:xs,info:"Setting up Frappe Mail requires you to have an API key and API Secret of your email account. Read more ",link:"https://github.com/frappe/mail",custom:!0}],Ss={GMail:vs,Outlook:gs,Sendgrid:ys,SparkPost:hs,Yahoo:_s,Yandex:bs,"Frappe Mail":xs};function Vs(a,e){if(!a.email_account_name)return"Account name is required";if(!a.email_id)return"Email ID is required";if(!An(a.email_id))return"Invalid email ID";if(!e&&!a.password)return"Password is required";if(e){if(!a.api_key)return"API Key is required";if(!a.api_secret)return}return""}const fu=["src"],vu={key:0,class:"text-center text-p-xs text-gray-700"},Cl=N({__name:"EmailProviderIcon",props:{serviceName:{default:""},logo:{default:""},selected:{type:Boolean,default:!1}},setup(a){return(e,l)=>(r(),c(q,null,[s("div",{class:se(["flex h-10 w-10 cursor-pointer items-center justify-center rounded-xl bg-gray-100 hover:bg-gray-200",{"ring-2 ring-blue-500":e.selected}])},[s("img",{src:e.logo,class:"h-6 w-6"},null,8,fu)],2),e.serviceName?(r(),c("p",vu,O(e.serviceName),1)):A("",!0)],64))}}),gu={class:"flex h-full flex-col gap-4"},yu={class:"flex flex-wrap items-center gap-4"},hu=["onClick"],_u={key:0,class:"flex flex-col gap-4"},bu={class:"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200"},xu={class:"text-wrap text-xs text-gray-700"},wu=["href"],ku={class:"flex flex-col gap-4"},Cu={class:"grid grid-cols-1 gap-4"},$u={class:"grid grid-cols-2 gap-4"},Au={class:"text-gray-500 text-p-sm"},Su={key:1,class:"mt-auto flex justify-between"},Vu=N({__name:"EmailAdd",emits:["update:step"],setup(a,{emit:e}){const l=e,{updateOnboardingStep:o}=gt("helpdesk"),n=Pe({service:"",email_account_name:"",email_id:"",password:"",api_key:"",api_secret:"",frappe_mail_site:"",enable_incoming:!1,enable_outgoing:!1,default_incoming:!1,default_outgoing:!1}),i=V(null),u=P(()=>i.value.custom?$s:Cs);function m(h){i.value=h,n.service=h.name}const p=fe({url:"helpdesk.api.settings.email.create_email_account",makeParams:h=>({...h}),onSuccess:()=>{W.success("Email account created"),l("update:step","email-list"),o("setup_email_account")},onError:()=>{f.value="Failed to create email account, Invalid credentials"}}),f=V();function g(){f.value=Vs(n,i.value.custom),!f.value&&p.submit({data:n})}return(h,v)=>{const _=J("FormControl"),y=J("ErrorMessage"),w=J("Button");return r(),c("div",gu,[v[2]||(v[2]=s("div",{role:"heading","aria-level":"1",class:"flex flex-col gap-1"},[s("h5",{class:"text-lg font-semibold pt-[5px]"},"Setup Email"),s("p",{class:"text-sm text-gray-600"}," Choose the email service provider you want to configure. ")],-1)),s("div",yu,[(r(!0),c(q,null,G(t(As),I=>{var S;return r(),c("div",{key:I.name,class:"min-w-3 flex flex-col items-center gap-1",onClick:k=>m(I)},[d(Cl,{"service-name":I.name,logo:I.icon,selected:((S=i.value)==null?void 0:S.name)===(I==null?void 0:I.name)},null,8,["service-name","logo","selected"])],8,hu)}),128))]),i.value?(r(),c("div",_u,[s("div",bu,[d(t(Gt),{class:"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-blue-500"}),s("div",xu,[le(O(i.value.info)+" ",1),s("a",{href:i.value.link,target:"_blank",class:"text-blue-500 underline"},"here",8,wu),v[1]||(v[1]=le(" . ",-1))])]),s("div",ku,[s("div",Cu,[(r(!0),c(q,null,G(u.value,I=>(r(),c("div",{key:I.name,class:"flex flex-col gap-1"},[d(_,{modelValue:n[I.name],"onUpdate:modelValue":S=>n[I.name]=S,label:I.label,name:I.name,type:I.type,placeholder:I.placeholder},null,8,["modelValue","onUpdate:modelValue","label","name","type","placeholder"])]))),128))]),s("div",$u,[(r(!0),c(q,null,G(t(ks),I=>(r(),c("div",{key:I.name,class:"flex flex-col gap-1"},[d(_,{modelValue:n[I.name],"onUpdate:modelValue":S=>n[I.name]=S,label:I.label,name:I.name,type:I.type},null,8,["modelValue","onUpdate:modelValue","label","name","type"]),s("p",Au,O(I.description),1)]))),128))]),f.value?(r(),D(y,{key:0,class:"ml-1",message:f.value},null,8,["message"])):A("",!0)])])):A("",!0),i.value?(r(),c("div",Su,[d(w,{label:"Back",theme:"gray",variant:"outline",disabled:t(p).loading,onClick:v[0]||(v[0]=I=>l("update:step","email-list"))},null,8,["disabled"]),d(w,{label:"Create",variant:"solid",loading:t(p).loading,onClick:g},null,8,["loading"])])):A("",!0)])}}}),Eu={class:"flex justify-between items-center border-gray-200 p-2 pl-0 cursor-pointer"},Du={class:"flex justify-between items-center gap-2"},Iu={class:"text-gray-700 font-semibold"},Lu={class:"text-sm text-gray-500"},Bu=N({__name:"EmailAccountCard",props:{emailAccount:{}},setup(a){const e=a,l=P(()=>e.emailAccount.default_incoming&&e.emailAccount.default_outgoing?["Default Sending and Inbox",e.emailAccount.enable_incoming&&e.emailAccount.enable_outgoing?"blue":"gray"]:e.emailAccount.default_incoming?["Default Inbox",e.emailAccount.enable_incoming?"blue":"gray"]:e.emailAccount.default_outgoing?["Default Sending",e.emailAccount.enable_outgoing?"blue":"gray"]:["Inbox",e.emailAccount.enable_incoming?"blue":"gray"]);return(o,n)=>{const i=J("Badge");return r(),c("div",Eu,[s("div",Du,[d(Cl,{logo:t(Ss)[o.emailAccount.service]},null,8,["logo"]),s("div",null,[s("p",Iu,O(o.emailAccount.email_account_name),1),s("div",Lu,O(o.emailAccount.email_id),1)])]),s("div",null,[d(i,{variant:"subtle",label:l.value[0],theme:l.value[1]},null,8,["label","theme"])])])}}}),Fu={key:0,class:"mt-4 divide-y"},Ou={key:1,class:"flex items-center justify-center h-64 text-gray-500"},Mu=N({__name:"EmailAccountList",emits:["update:step"],setup(a,{emit:e}){const l=e,o=ut({doctype:"Email Account",cache:["Email Accounts"],fields:["*"],filters:{email_id:["Not Like","%example%"]},pageLength:10,auto:!0,onSuccess:n=>{n.forEach(i=>{i.enable_incoming=!!i.enable_incoming,i.enable_outgoing=!!i.enable_outgoing,i.default_incoming=!!i.default_incoming,i.default_outgoing=!!i.default_outgoing})}});return(n,i)=>{var m;const u=J("Button");return r(),c("div",null,[d(ct,{title:"Email Accounts",description:"Manage your email accounts and configure incoming and outgoing settings."},{actions:$(()=>[d(u,{label:"Add Account",theme:"gray",variant:"solid",onClick:i[0]||(i[0]=p=>l("update:step","email-add")),"icon-left":"plus"})]),_:1}),!t(o).loading&&((m=t(o).data)!=null&&m.length)?(r(),c("div",Fu,[(r(!0),c(q,null,G(t(o).data,p=>(r(),c("div",{key:p.name},[d(Bu,{emailAccount:p,onClick:f=>l("update:step","email-edit",p)},null,8,["emailAccount","onClick"])]))),128))])):(r(),c("div",Ou," Please add an email account to continue. "))])}}}),ju={class:"flex h-full flex-col gap-4"},Ru={class:"w-fit"},qu={class:"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200"},Tu={class:"text-wrap text-xs text-gray-700"},Nu=["href"],Uu={class:"flex flex-col gap-4"},Pu={class:"grid grid-cols-1 gap-4"},Hu={class:"grid grid-cols-2 gap-4"},zu={class:"text-p-sm text-gray-500"},Qu={class:"mt-auto flex justify-between"},Ju={class:"flex gap-2"},Wu=N({__name:"EmailEdit",props:{accountData:{default:null}},emits:["update:step"],setup(a,{emit:e}){var k,L,b,x;const l=a,o=e,n=Pe({email_account_name:l.accountData.email_account_name||"",service:l.accountData.service||"",email_id:l.accountData.email_id||"",api_key:((k=l.accountData)==null?void 0:k.api_key)||null,api_secret:((L=l.accountData)==null?void 0:L.api_secret)||null,password:((b=l.accountData)==null?void 0:b.password)||null,frappe_mail_site:((x=l.accountData)==null?void 0:x.frappe_mail_site)||"",enable_incoming:l.accountData.enable_incoming||!1,enable_outgoing:l.accountData.enable_outgoing||!1,default_outgoing:l.accountData.default_outgoing||!1,default_incoming:l.accountData.default_incoming||!1}),i={description:"To know more about setting up email accounts, click",link:"https://docs.erpnext.com/docs/user/manual/en/email-account"},u=P(()=>As.find(E=>E.name===l.accountData.service).custom),m=P(()=>u.value?$s:Cs),p=V(),f=V(!1),g=Sn(`loading-emails-${n.email_account_name}`,!1);async function h(){if(p.value=Vs(n,u.value),p.value)return;const E={...l.accountData},C={...n},F=E.email_account_name!==C.email_account_name;delete E.email_account_name,delete C.email_account_name;const M=_.value,R=C;if(!F&&!M){W.create({message:"No changes made",icon:ce(Gt,{class:"text-ink-blue-2"})});return}if(F)try{f.value=!0,await y(),I()}catch{S()}if(M)try{f.value=!0,await w(R),I()}catch{S()}}function v(){g.value=!0,W.create({message:"Pulling emails, this may take a few minutes.",icon:ce(Gt,{class:"text-blue-500"})}),et("frappe.email.doctype.email_account.email_account.pull_emails",{email_account:n.email_account_name}).then(()=>{localStorage.removeItem(`loading-emails-${n.email_account_name}`),g.value=null,W.success("Emails pulled successfully")}).catch(()=>{localStorage.removeItem(`loading-emails-${n.email_account_name}`),g.value=null,p.value="Failed to pull emails"})}const _=P(()=>n.email_id!==l.accountData.email_id||n.api_key!==l.accountData.api_key||n.api_secret!==l.accountData.api_secret||n.password!==l.accountData.password||n.enable_incoming!==l.accountData.enable_incoming||n.enable_outgoing!==l.accountData.enable_outgoing||n.default_outgoing!==l.accountData.default_outgoing||n.default_incoming!==l.accountData.default_incoming||n.frappe_mail_site!==l.accountData.frappe_mail_site);async function y(){return await et("frappe.client.rename_doc",{doctype:"Email Account",old_name:l.accountData.email_account_name,new_name:n.email_account_name})}async function w(E){return(await et("frappe.client.set_value",{doctype:"Email Account",name:n.email_account_name,fieldname:E})).name}function I(){o("update:step","email-list"),W.success("Email account updated successfully")}function S(){f.value=!1,p.value="Failed to update email account, Invalid credentials"}return(E,C)=>{const F=J("FormControl"),M=J("ErrorMessage"),R=J("Button");return r(),c("div",ju,[C[2]||(C[2]=s("div",{role:"heading","aria-level":"1",class:"flex gap-1 justify-between pt-[5px]"},[s("h5",{class:"text-lg font-semibold"},"Edit Email")],-1)),s("div",Ru,[d(Cl,{logo:t(Ss)[E.accountData.service],"service-name":E.accountData.service},null,8,["logo","service-name"])]),s("div",qu,[d(t(Gt),{class:"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-ink-blue-2"}),s("div",Tu,[le(O(i.description)+" ",1),s("a",{href:i.link,target:"_blank",class:"text-ink-blue-2 underline"},"here",8,Nu),C[1]||(C[1]=le(" . ",-1))])]),s("div",Uu,[s("div",Pu,[(r(!0),c(q,null,G(m.value,T=>(r(),c("div",{key:T.name,class:"flex flex-col gap-1"},[d(F,{modelValue:n[T.name],"onUpdate:modelValue":U=>n[T.name]=U,label:T.label,name:T.name,type:T.type,placeholder:T.placeholder},null,8,["modelValue","onUpdate:modelValue","label","name","type","placeholder"])]))),128))]),s("div",Hu,[(r(!0),c(q,null,G(t(ks),T=>(r(),c("div",{key:T.name,class:"flex flex-col gap-1"},[d(F,{modelValue:n[T.name],"onUpdate:modelValue":U=>n[T.name]=U,label:T.label,name:T.name,type:T.type},null,8,["modelValue","onUpdate:modelValue","label","name","type"]),s("p",zu,O(T.description),1)]))),128))]),p.value?(r(),D(M,{key:0,class:"ml-1",message:p.value},null,8,["message"])):A("",!0)]),s("div",Qu,[d(R,{label:"Back",theme:"gray",variant:"outline",disabled:f.value,onClick:C[0]||(C[0]=T=>o("update:step","email-list"))},null,8,["disabled"]),s("div",Ju,[d(R,{label:"Update Account",variant:"solid",onClick:h,loading:f.value},null,8,["loading"]),E.accountData.enable_incoming?(r(),D(R,{key:0,label:"Pull Emails",variant:"subtle",onClick:v,loading:t(g),disabled:f.value},null,8,["loading","disabled"])):A("",!0)])])])}}}),Gu={class:"flex-1 px-10 py-8"},Ku={key:0,class:"h-full"},Zu={key:1,class:"h-full"},Yu={key:2,class:"h-full"},Xu=N({__name:"EmailConfig",setup(a){const e=V("email-list"),l=V(null);function o(n,i){e.value=n,l.value=i}return(n,i)=>(r(),c("div",Gu,[e.value==="email-add"?(r(),c("div",Ku,[d(Vu,{"onUpdate:step":o})])):e.value==="email-list"?(r(),c("div",Zu,[d(Mu,{"onUpdate:step":o})])):e.value==="email-edit"?(r(),c("div",Yu,[d(Wu,{"account-data":l.value,"onUpdate:step":o},null,8,["account-data"])])):A("",!0)]))}}),ed={class:"lucide lucide-lock",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function td(a,e){return r(),c("svg",ed,[...e[0]||(e[0]=[s("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"},null,-1),s("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)])])}const ld=Y({name:"lucide-lock",render:td}),sd={class:"lucide lucide-lock-open",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function nd(a,e){return r(),c("svg",sd,[...e[0]||(e[0]=[s("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"},null,-1),s("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"},null,-1)])])}const ad=Y({name:"lucide-unlock",render:nd}),od={class:"lucide lucide-settings-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function id(a,e){return r(),c("svg",od,[...e[0]||(e[0]=[s("path",{d:"M20 7h-9"},null,-1),s("path",{d:"M14 17H5"},null,-1),s("circle",{cx:"17",cy:"17",r:"3"},null,-1),s("circle",{cx:"7",cy:"7",r:"3"},null,-1)])])}const Es=Y({name:"lucide-settings-2",render:id}),Ds=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],H=V({assignCondition:"",unassignCondition:"",assignConditionJson:[],unassignConditionJson:[],rule:"Round Robin",priority:1,users:[],disabled:!1,description:"",name:"",assignmentRuleName:"",assignmentDays:Ds}),Is=()=>{H.value={assignCondition:"",unassignCondition:"",assignConditionJson:[],unassignConditionJson:[],rule:"Round Robin",priority:1,users:[],disabled:!1,description:"",name:"",assignmentRuleName:"",assignmentDays:Ds}},Ae=V({screen:"list",data:null}),ft=(a,e=!1)=>{const l=o=>{var n,i,u,m,p,f;if(!(a&&o!==a))switch(o){case"assignmentRuleName":((n=H.value.assignmentRuleName)==null?void 0:n.length)==0?ve.value.assignmentRuleName="Name is required":ve.value.assignmentRuleName="";break;case"description":ve.value.description=((i=H.value.description)==null?void 0:i.length)>0?"":"Description is required";break;case"assignCondition":if(e)break;ve.value.assignCondition=((u=H.value.assignConditionJson)==null?void 0:u.length)>0?"":"Assign condition is required",qt(H.value.assignConditionJson)?ve.value.assignConditionError="":ve.value.assignConditionError="Assign conditions are invalid";break;case"unassignCondition":if(e)break;((m=H.value.unassignConditionJson)==null?void 0:m.length)>0&&!qt(H.value.unassignConditionJson)?ve.value.unassignConditionError="Unassign conditions are invalid":ve.value.unassignConditionError="";break;case"users":ve.value.users=((p=H.value.users)==null?void 0:p.length)>0?"":"Users are required";break;case"assignmentDays":ve.value.assignmentDays=((f=H.value.assignmentDays)==null?void 0:f.length)>0?"":"Assignment days are required";break}};return a?l(a):Object.keys(ve.value).forEach(l),ve.value},ve=V({assignmentRuleName:"",assignCondition:"",assignConditionError:"",unassignConditionError:"",users:"",description:"",assignmentDays:""}),rd=()=>{Object.keys(ve.value).forEach(a=>{ve.value[a]=""})},ud={class:"w-full h-full flex flex-col"},dd={class:"flex items-center justify-between mb-4"},cd={class:"flex items-center gap-1 justify-center -ml-[16px]"},pd={class:"flex flex-col gap-4 h-full"},md={class:"flex gap-2 items-end"},fd={class:"flex items-center justify-between !w-full"},vd={class:"flex items-center gap-1"},gd={class:"text-gray-600 text-sm"},yd={key:0,class:"flex flex-col divide-y divide-gray-200 overflow-y-scroll hide-scrollbar h-full"},hd={key:1,class:"flex justify-center h-full"},_d=N({__name:"TeamEdit",props:{teamName:{}},emits:["update:step"],setup(a,{emit:e}){var L;const l=a,o=e,{getUser:n}=wl(),{teamRestrictionApplied:i}=Jl(),u=V(l.teamName),m=Vn({doctype:"HD Team",name:l.teamName,auto:!0,delete:{onSuccess(){W.success("Team deleted"),o("update:step","team-list")}}}),p=P({get(){var b;return!!((b=m.doc)!=null&&b.ignore_restrictions)},set(b){m.doc&&m.setValue.submit({ignore_restrictions:b})}}),f=V(""),g=P(()=>{var x;return(((x=m.doc)==null?void 0:x.users)||[]).map(E=>{let C=n(E.user);return{name:E.user,user_image:C.user_image,agent_name:C.full_name}})}),h=P(()=>({name:["not in",g.value.map(b=>b.name)]}));function v(b){var E,C;const x=(C=(E=m.doc)==null?void 0:E.users)==null?void 0:C.filter(F=>F.user!==b);m.setValue.submit({users:x})}function _(b){const x=m.doc.users.concat([{user:b}]);m.setValue.submit({users:x}),f.value=""}const y=V(!1),w={title:"Rename team",message:"Enter the new name for the team",actions:[{label:"Confirm",variant:"solid",loading:m.loading,onClick:({close:b})=>{I(b)}}]};function I(b){fe({url:"frappe.client.rename_doc",makeParams(){return{doctype:"HD Team",old_name:l.teamName,new_name:u.value}},validate(E){if(!E.new_name)return"New title is required";if(E.new_name===E.old_name)return"New and old title cannot be same"},onSuccess(){W.success("Team renamed"),b(),o("update:step","team-list")}}).submit()}const S=V(!1),k=[{label:"View Assignment rule",icon:Y(ce(Es,{class:"rotate-90"})),onClick:()=>{var b;Ae.value={data:{name:(b=m.doc)==null?void 0:b.assignment_rule},screen:"view"},Tt("Assignment Rules")}},{label:"Rename",icon:"edit-3",onClick:()=>y.value=!y.value},{condition:()=>i,label:(L=m.doc)!=null&&L.ignore_restrictions?"Disable Bypass Restrictions":"Enable Bypass Restrictions",component:()=>ce(bl,{text:p.value?"Members of this team will see the tickets assigned to this team only":"Members of this team will be able to see the tickets assigned to all the teams"},{default:()=>{var b,x;return[ce("div",{class:"flex items-center gap-2 p-2 cursor-pointer hover:bg-gray-100 rounded",onClick:()=>p.value=!p.value},[ce((b=m.doc)!=null&&b.ignore_restrictions?ld:ad,{class:"h-4 w-4 text-gray-700",stroke:"currentColor","aria-hidden":"true"}),ce("span",{class:"whitespace-nowrap text-ink-gray-7 text-p-base"},[(x=m.doc)!=null&&x.ignore_restrictions?"Access only this team's tickets":"Access all team tickets"])])]}})},{label:"Delete",component:ce(Q,{label:"Delete",variant:"ghost",iconLeft:"trash-2",theme:"red",style:"width: 100%; justify-content: flex-start;",onClick:()=>{S.value=!S.value}})}];return(b,x)=>{const E=kl,C=Ut,F=Ql,M=zl,R=J("FormControl");return r(),c(q,null,[s("div",ud,[s("div",dd,[s("div",cd,[d(t(Q),{variant:"ghost","icon-left":"chevron-left",label:b.teamName,size:"md",onClick:x[0]||(x[0]=()=>o("update:step","team-list")),class:"cursor-pointer hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5"},null,8,["label"])]),d(t(yt),{placement:"right",options:k},{default:$(()=>[d(t(Q),{variant:"ghost"},{icon:$(()=>[d(E,{class:"h-4 w-4"})]),_:1})]),_:1})]),s("div",pd,[s("div",md,[d(as,{doctype:"HD Agent",class:"form-control flex-1",placeholder:"Search members",modelValue:f.value,"onUpdate:modelValue":x[1]||(x[1]=T=>f.value=T),label:"Members","hide-me":!0,filters:h.value},{prefix:$(()=>[d(C,{class:"h-4 w-4 text-gray-500 mr-2"})]),"item-label":$(({option:T})=>{var U,B;return[s("div",fd,[s("div",vd,[d(t(ht),{label:T.label||T.value,image:(U=t(n)(T.label))==null?void 0:U.user_image,size:"sm"},null,8,["label","image"]),s("p",null,O(((B=t(n)(T.label))==null?void 0:B.full_name)||"User"),1)]),s("p",gd,O(T.label),1)])]}),_:1},8,["modelValue","filters"]),d(t(Q),{label:"Add",variant:"solid",disabled:!f.value,onClick:x[2]||(x[2]=T=>_(f.value))},{prefix:$(()=>[d(F,{class:"h-4 w-4 stroke-1.5"})]),_:1},8,["disabled"])]),g.value.length?(r(),c("div",yd,[(r(!0),c(q,null,G(g.value,(T,U)=>(r(),c("div",{key:T.user,class:se(["group py-2",U==g.value.length-1&&"mb-12"])},[d(fs,{agent:T,class:"!py-0"},{right:$(()=>[d(t(Q),{variant:"ghost",onClick:_e(()=>v(T.name),["stop"]),theme:"red",class:"opacity-0 group-hover:opacity-100",disabled:t(m).loading},{icon:$(()=>[d(M,{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])]),_:2},1032,["agent"])],2))),128))])):(r(),c("div",hd,[...x[7]||(x[7]=[s("p",{class:"text-p-base text-gray-500"},"No members found",-1)])]))])]),d(t(Le),{modelValue:S.value,"onUpdate:modelValue":x[4]||(x[4]=T=>S.value=T),options:{title:"Delete team"}},{"body-content":$(()=>[x[8]||(x[8]=s("p",{class:"text-p-base text-ink-gray-7"}," Are you sure you want to delete this team? This action cannot be reversed! ",-1)),d(t(Q),{variant:"solid",class:"mt-4 float-right",label:"Confirm",theme:"red",onClick:x[3]||(x[3]=()=>{t(m).delete.submit(),S.value=!1})})]),_:1},8,["modelValue"]),d(t(Le),{modelValue:y.value,"onUpdate:modelValue":x[6]||(x[6]=T=>y.value=T),options:w},{"body-content":$(()=>[d(R,{modelValue:u.value,"onUpdate:modelValue":x[5]||(x[5]=T=>u.value=T),label:"Title",placeholder:"Product Experts"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),bd=N({__name:"NewTeamModal",props:{modelValue:{},modelModifiers:{}},emits:Ue(["create"],["update:modelValue"]),setup(a,{emit:e}){const l=e,o=Re(a,"modelValue"),n=V(null),i=fe({url:"frappe.client.insert",makeParams(){return{doc:{doctype:"HD Team",team_name:n.value}}},validate(u){if(En.isEmpty(u.doc.team_name))return"Title is required"},auto:!1,onSuccess(){W.success("Team created"),n.value=null,o.value=!1,l("create")}});return(u,m)=>{const p=J("FormControl"),f=J("Dialog");return r(),D(f,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=g=>o.value=g),options:{title:"New team",actions:[{label:"Create",variant:"solid",onClick:()=>{t(i).submit()}}]}},{"body-content":$(()=>[s("form",{class:"space-y-2",onSubmit:m[1]||(m[1]=_e((...g)=>t(i).submit&&t(i).submit(...g),["prevent"]))},[d(p,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=g=>n.value=g),label:"Title",placeholder:"Product experts",type:"text"},null,8,["modelValue"])],32)]),_:1},8,["modelValue","options"])}}}),xd={class:"w-full h-full flex flex-col"},wd={key:0,class:"divide-y w-full h-full hide-scrollbar overflow-y-scroll mt-4"},kd=["onClick"],Cd={class:"flex items-center gap-2"},$d={key:1,class:"flex mt-28 justify-between w-full h-full"},Ad={key:2,class:"flex mt-28 justify-between w-full h-full"},Sd=N({__name:"TeamsList",emits:["update:step"],setup(a,{emit:e}){const l=e,o=ut({doctype:"HD Team",cache:["Teams"],fields:["name"],auto:!0,orderBy:"creation desc"}),n=V(""),i=V(!1);return me(n,u=>{o.filters={name:["like",`%${u}%`]},u||(o.start=0,o.pageLength=10),o.reload()}),(u,m)=>{var h,v;const p=J("Button"),f=Ut,g=ct;return r(),c(q,null,[s("div",xd,[d(g,{title:"Teams",description:"Create and manage teams and assign agents to specific teams."},{actions:$(()=>[d(p,{label:"New",theme:"gray",variant:"solid",onClick:m[0]||(m[0]=()=>i.value=!i.value),"icon-left":"plus"})]),"bottom-section":$(()=>[d(t(ge),{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=_=>n.value=_),placeholder:"Search",type:"text",debounce:300,class:"w-60"},{prefix:$(()=>[d(f,{class:"h-4 w-4 text-gray-500"})]),_:1},8,["modelValue"])]),_:1}),!t(o).loading&&((h=t(o).data)==null?void 0:h.length)>0?(r(),c("div",wd,[(r(!0),c(q,null,G(t(o).data,_=>(r(),c("div",{key:_.name,class:"flex items-center gap-2 py-2 group justify-between cursor-pointer",onClick:()=>l("update:step","team-edit",_.name)},[s("div",Cd,[d(t(ht),{label:_.name,size:"sm"},null,8,["label"]),(r(),c("p",{key:_.name,class:"text-p-base text-gray-700"},O(_.name),1))])],8,kd))),128))])):A("",!0),t(o).loading?(r(),c("div",$d,[d(p,{loading:t(o).loading,variant:"ghost",class:"w-full",size:"2xl"},null,8,["loading"])])):A("",!0),(v=t(o).data)!=null&&v.length?A("",!0):(r(),c("div",Ad,[...m[4]||(m[4]=[s("p",{class:"text-sm text-gray-500 w-full flex justify-center"}," No teams found ",-1)])]))]),d(bd,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=_=>i.value=_),onCreate:m[3]||(m[3]=()=>{t(o).reload()})},null,8,["modelValue"])],64)}}}),Vd={key:0,class:"h-full px-10 py-8"},Ed={key:1,class:"h-full px-10 py-8"},Dd=N({__name:"TeamsConfig",setup(a){const e=V("team-list"),l=V("");function o(n,i){e.value=n,l.value=i}return(n,i)=>e.value==="team-list"?(r(),c("div",Vd,[d(Sd,{"onUpdate:step":o})])):e.value==="team-edit"?(r(),c("div",Ed,[d(_d,{"onUpdate:step":o,"team-name":l.value},null,8,["team-name"])])):A("",!0)}}),Ls=[{status:"Replied",sla_behavior:"Paused"},{status:"Closed",sla_behavior:"Fulfilled"},{status:"Resolved",sla_behavior:"Fulfilled"}],Bs=[{workday:"Monday",start_time:"09:00:00",end_time:"17:00:00",id:Math.random().toString(36).substring(2,9)},{workday:"Tuesday",start_time:"09:00:00",end_time:"17:00:00",id:Math.random().toString(36).substring(2,9)},{workday:"Wednesday",start_time:"09:00:00",end_time:"17:00:00",id:Math.random().toString(36).substring(2,9)},{workday:"Thursday",start_time:"09:00:00",end_time:"17:00:00",id:Math.random().toString(36).substring(2,9)},{workday:"Friday",start_time:"09:00:00",end_time:"17:00:00",id:Math.random().toString(36).substring(2,9)}],j=V({name:"",service_level:"",description:"",enabled:!1,default_sla:!1,apply_sla_for_resolution:!0,priorities:[],statuses:Ls,holiday_list:"Default",default_priority:"",start_date:"",end_date:"",loading:!1,support_and_resolution:Bs,condition:[],condition_json:[]}),Id=()=>{j.value={name:"",service_level:"",description:"",enabled:!1,default_sla:!1,apply_sla_for_resolution:!0,priorities:[],statuses:Ls,holiday_list:"Default",default_priority:"",start_date:"",end_date:"",loading:!1,support_and_resolution:Bs,condition:[],condition_json:[]}},he=V({screen:"list",data:null,fetchData:!0}),ee=V({service_level:"",description:"",enabled:"",default_sla:"",apply_sla_for_resolution:"",priorities:"",statuses:"",statuses_conflict:"",holiday_list:"",default_priority:"",start_date:"",end_date:"",support_and_resolution:"",condition:""}),Fs=()=>{ee.value={service_level:"",description:"",enabled:"",default_sla:"",apply_sla_for_resolution:"",priorities:"",statuses:"",statuses_conflict:"",holiday_list:"",default_priority:"",start_date:"",end_date:"",support_and_resolution:"",condition:""}};function ot(a,e=!1){Fs();const l=o=>{var n,i,u;if(!(a&&o!==a))switch(o){case"service_level":(n=j.value.service_level)!=null&&n.trim()?ee.value.service_level="":ee.value.service_level="SLA policy name is required";break;case"priorities":if(!Array.isArray(j.value.priorities)||j.value.priorities.length===0)ee.value.priorities="At least one priority is required";else{const p=[];j.value.priorities.forEach((v,_)=>{var w;const y=_+1;(w=v.priority)!=null&&w.trim()||p.push(`Priority ${y}: Priority name is required`),(!v.response_time||v.response_time==0)&&p.push(`Priority ${y}: Response time is required`),j.value.apply_sla_for_resolution&&(!v.resolution_time||v.resolution_time==0)&&p.push(`Priority ${y}: Resolution time is required`),v.response_time>v.resolution_time&&j.value.apply_sla_for_resolution&&p.push(`Priority ${y}: Response time cannot be greater than resolution time`)});const f=j.value.priorities.map(v=>{var _;return(_=v.priority)==null?void 0:_.trim().toLowerCase()}).filter(Boolean),g=new Set(f);f.length!==g.size&&p.push("Priorities must be unique"),p.length>0?ee.value.priorities=p.join(", "):ee.value.priorities="",j.value.priorities.some(v=>!!v.default_priority)?ee.value.default_priority="":ee.value.default_priority="Default priority is required"}break;case"statuses":if(!Array.isArray(j.value.statuses)||j.value.statuses.length===0)ee.value.statuses="At least one status for 'Fulfilled on' and 'Paused on' is required";else{const p=j.value.statuses.some(y=>y.sla_behavior==="Fulfilled"),f=j.value.statuses.some(y=>y.sla_behavior==="Paused");p||(ee.value.statuses="At least one 'Fulfilled on' status is required"),f||(ee.value.statuses="At least one 'Paused on' status is required"),p&&f&&(ee.value.statuses="");const g=new Map,h=[],v=[];for(const y of j.value.statuses){const w=(i=y.status)==null?void 0:i.trim().toLowerCase(),I=y.sla_behavior;g.has(w)?g.get(w).has(I)?h.push(y.status):(v.push({status:y.status,behaviors:[...g.get(w),I]}),g.get(w).add(I)):g.set(w,new Set([I]))}const _=[];if(h.length>0&&_.push(`Duplicate status behavior found for: ${[...new Set(h)].join(", ")}`),v.length>0){const y=v.map(({status:w,behaviors:I})=>`"${w}" cannot be both ${I.join(" and ")}`);_.push(`Conflicting behaviors: ${y.join("; ")}`)}_.length>0?ee.value.statuses_conflict=_.join(". "):ee.value.statuses_conflict=""}break;case"holiday_list":j.value.holiday_list?ee.value.holiday_list="":ee.value.holiday_list="Holiday list is required";break;case"start_date":new Date(j.value.end_date)<new Date(j.value.start_date)?ee.value.start_date="Start date cannot be after end date":ee.value.start_date="";break;case"end_date":j.value.end_date&&new Date(j.value.end_date)<new Date(j.value.start_date)?ee.value.end_date="End date cannot be before start date":ee.value.end_date="";break;case"condition":if(e)break;j.value.condition_json.length>0&&!qt(j.value.condition_json)?ee.value.condition="Valid conditions are required":ee.value.condition="";break;case"support_and_resolution":const m=(u=j.value.support_and_resolution)==null?void 0:u.filter(p=>p.workday&&p.workday.trim()!==""&&p.start_time&&p.end_time&&p.start_time.trim()!==""&&p.end_time.trim()!=="");if(!(m!=null&&m.length))ee.value.support_and_resolution="At least one valid workday with workday, start time, and end time is required";else{const p=new Map,f=[];for(const h of m)p.has(h.workday)?f.push(h.workday):p.set(h.workday,!0);if(f.length>0)return ee.value.support_and_resolution=`Duplicate workday found: ${f.join(", ")}. Each workday should be unique.`,ee.value;ee.value.support_and_resolution="";const g=[];for(const h of m){const v=h.start_time.trim(),_=h.end_time.trim(),y=w=>{const[I,S]=w.split(":").map(Number),k=new Date;return k.setHours(I,S||0,0,0),k};try{const w=y(v),I=y(_);w>=I&&g.push(`${h.workday} (${v} - ${_})`)}catch{g.push(`${h.workday} (Invalid time format)`)}}g.length>0?ee.value.support_and_resolution=`End time must be after start time for: ${g.join(", ")}`:ee.value.support_and_resolution=""}break}};return a?l(a):Object.keys(ee.value).forEach(l),ee.value}const Ld={class:"grid grid-cols-6 items-center gap-4 cursor-pointer hover:bg-gray-50 rounded"},Bd={class:"text-base text-ink-gray-7 font-medium flex items-center gap-2"},Fd={key:0,class:"text-sm w-full text-ink-gray-5 mt-1 whitespace-nowrap overflow-ellipsis overflow-hidden"},Od={class:"flex justify-between items-center w-full pr-2"},Md={class:"flex flex-col gap-4"},jd={class:"flex gap-2 justify-end"},Rd=N({__name:"SlaPolicyListItem",props:{data:{type:Object,required:!0}},setup(a){const e=je("slaPolicyList"),l=V({show:!1,name:""}),o=a,n=V(!1),i=[{label:"Duplicate",onClick:()=>{l.value={show:!0,name:o.data.name+" (Copy)"}},icon:"copy"},...lt({onConfirmDelete:()=>m(),isConfirmingDelete:n})],u=()=>{fe({url:"helpdesk.api.sla.duplicate_sla",params:{docname:o.data.name,new_name:l.value.name},onSuccess:f=>{e.reload(),W.success("SLA policy duplicated"),l.value={show:!1,name:""},setTimeout(()=>{he.value={screen:"view",data:f,fetchData:!0}},250)},auto:!0})},m=()=>{if(!n.value){n.value=!0;return}e.delete.submit(o.data.name,{onSuccess:()=>{W.success("SLA policy deleted")}})},p=()=>{if(o.data.default_sla){W.error("SLA set as default cannot be disabled");return}e.setValue.submit({name:o.data.name,enabled:!o.data.enabled},{onSuccess:()=>{W.success("SLA policy status updated")}})};return(f,g)=>{const h=st,v=J("FormControl");return r(),c(q,null,[s("div",Ld,[s("div",{onClick:g[0]||(g[0]=_=>he.value={screen:"view",data:a.data,fetchData:!0}),class:"w-full py-3 pl-2 col-span-5"},[s("div",Bd,[le(O(a.data.name)+" ",1),a.data.default_sla?(r(),D(t(sl),{key:0,color:"gray",size:"sm"},{default:$(()=>[...g[6]||(g[6]=[le("Default",-1)])]),_:1})):A("",!0)]),a.data.description&&a.data.description.length>0?(r(),c("div",Fd,O(a.data.description),1)):A("",!0)]),s("div",Od,[s("div",null,[d(t(tt),{size:"sm",modelValue:a.data.enabled,"onUpdate:modelValue":p},null,8,["modelValue"])]),s("div",null,[d(h,{placement:"right",options:i},{default:$(()=>[d(t(Q),{icon:"more-horizontal",variant:"ghost",onClick:g[1]||(g[1]=_=>n.value=!1)})]),_:1})])])]),d(t(Le),{options:{title:"Duplicate SLA Policy"},modelValue:l.value.show,"onUpdate:modelValue":g[5]||(g[5]=_=>l.value.show=_)},{"body-content":$(()=>[s("div",Md,[d(v,{label:"New SLA Policy Name",type:"text",modelValue:l.value.name,"onUpdate:modelValue":g[2]||(g[2]=_=>l.value.name=_)},null,8,["modelValue"])])]),actions:$(()=>[s("div",jd,[d(t(Q),{variant:"subtle",label:"Close",onClick:g[3]||(g[3]=_=>l.value.show=!1)}),d(t(Q),{variant:"solid",label:"Duplicate",onClick:g[4]||(g[4]=_=>u())})])]),_:1},8,["modelValue"])],64)}}}),qd={key:0,class:"flex items-center justify-center mt-12"},Td={key:1},Nd={key:0,class:"flex items-center justify-center rounded-md border border-gray-200 p-4"},Ud={key:1},Pd=N({__name:"SlaPolicyList",setup(a){const e=je("slaPolicyList");return(l,o)=>{var n;return t(e).list.loading&&!t(e).list.data?(r(),c("div",qd,[d(t(vt),{class:"w-4"})])):(r(),c("div",Td,[((n=t(e).list.data)==null?void 0:n.length)===0?(r(),c("div",Nd,[...o[0]||(o[0]=[s("div",{class:"text-sm text-ink-gray-7"},"No items in the list",-1)])])):(r(),c("div",Ud,[o[2]||(o[2]=s("div",{class:"grid grid-cols-6 items-center gap-3 text-sm text-gray-600 ml-2"},[s("div",{class:"col-span-5"},"Policy Name"),s("div",{class:"col-span-1"},"Enabled")],-1)),o[3]||(o[3]=s("hr",{class:"mt-2 mx-2"},null,-1)),(r(!0),c(q,null,G(t(e).list.data,i=>(r(),c("div",{key:i.name},[d(Rd,{data:i},null,8,["data"]),o[1]||(o[1]=s("hr",{class:"mx-2"},null,-1))]))),128))]))]))}}}),Hd={class:"px-10 py-8"},zd={class:"px-10 pb-8 overflow-y-auto"},Qd=N({__name:"SlaPolicies",setup(a){const e=()=>{Id(),he.value={screen:"view",data:null,fetchData:!0}};return(l,o)=>(r(),c(q,null,[s("div",Hd,[d(ct,null,{title:$(()=>[...o[1]||(o[1]=[s("h1",{class:"text-lg font-semibold text-ink-gray-8"}," Service Level Agreements (SLAs) ",-1)])]),description:$(()=>[...o[2]||(o[2]=[s("p",{class:"text-p-sm max-w-md text-ink-gray-6"},[le(" SLAs align your team and customers with defined timelines for a reliable experience. "),s("a",{href:"https://docs.frappe.io/helpdesk/service-level-agreement",target:"_blank",class:"underline"},"Learn more about SLA ")],-1)])]),actions:$(()=>[d(t(Q),{label:"New",theme:"gray",variant:"solid",onClick:o[0]||(o[0]=n=>e()),"icon-left":"plus"})]),_:1})]),s("div",zd,[d(Pd)])],64))}}),Jd={name:"ConfirmDialog",props:{title:{type:String},message:{type:String},onConfirm:{type:Function,default:null},onCancel:{type:Function,default:null}},expose:["show","hide"],components:{Dialog:Le,Button:Q},data(){return{showDialog:!0,isLoading:!1}},methods:{async handleConfirmation(){if(!this.isLoading){this.isLoading=!0;try{this.onConfirm&&await this.onConfirm({hideDialog:this.hide}),this.hide()}catch(a){console.error("Error in confirmation:",a)}finally{this.isLoading=!1}}},show(){this.showDialog=!0},closeDialog(){var a;this.hide(),(a=this.onCancel)==null||a.call(this)},hide(){this.showDialog=!1}}},Wd={class:"space-y-4"},Gd=["innerHTML"];function Kd(a,e,l,o,n,i){const u=J("Button"),m=J("Dialog");return r(),D(m,{modelValue:n.showDialog,"onUpdate:modelValue":e[0]||(e[0]=p=>n.showDialog=p),options:{title:l.title},onClose:i.closeDialog},{"body-content":$(()=>[s("div",Wd,[l.message?(r(),c("p",{key:0,class:"text-p-base text-gray-800",innerHTML:l.message},null,8,Gd)):A("",!0)])]),actions:$(()=>[d(u,{class:"w-full",label:"Confirm",variant:"solid",loading:n.isLoading,onClick:l.onConfirm},null,8,["loading","onClick"])]),_:1},8,["modelValue","options","onClose"])}const al=Se(Jd,[["render",Kd]]),Zd={class:"lucide lucide-group",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Yd(a,e){return r(),c("svg",Zd,[...e[0]||(e[0]=[ll('<path d="M3 7V5c0-1.1.9-2 2-2h2"></path><path d="M17 3h2c1.1 0 2 .9 2 2v2"></path><path d="M21 17v2c0 1.1-.9 2-2 2h-2"></path><path d="M7 21H5c-1.1 0-2-.9-2-2v-2"></path><rect width="7" height="5" x="7" y="7" rx="1"></rect><rect width="7" height="5" x="10" y="12" rx="1"></rect>',6)])])}const Xd=Y({name:"lucide-group",render:Yd}),ec={class:"lucide lucide-ungroup",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function tc(a,e){return r(),c("svg",ec,[...e[0]||(e[0]=[s("rect",{width:"8",height:"6",x:"5",y:"4",rx:"1"},null,-1),s("rect",{width:"8",height:"6",x:"11",y:"14",rx:"1"},null,-1)])])}const lc=Y({name:"lucide-ungroup",render:tc}),Mt=fe({url:"helpdesk.api.doc.get_filterable_fields",params:{doctype:"HD Ticket"},transform:a=>(a=a.filter(e=>!e.fieldname.startsWith("_")).map(e=>({label:e.label,value:e.fieldname,...e})),a)}),sc={class:se("text-end text-base text-gray-600")},nc={key:0,class:"min-w-[66px] text-start"},ac={key:1,class:"min-w-[66px] flex items-start"},oc={key:0,class:"flex items-center gap-2 w-full"},ic={id:"fieldname",class:"w-full"},rc={id:"operator"},uc={id:"value",class:"w-full"},dc={class:se("w-max")},cc=N({__name:"CFCondition",props:{condition:{type:Array,required:!0},isChild:{type:Boolean,default:!1},itemIndex:{type:Number},level:{type:Number,default:0},isGroup:{type:Boolean,default:!1},conjunction:{type:String},disableAddCondition:{type:Boolean,default:!1}},emits:["remove","unGroupConditions","toggleConjunction","turnIntoGroup"],setup(a,{emit:e}){const l=V(!1),o=e,n=a,i=P(()=>{const C=[];return!n.isGroup&&n.level<4&&C.push({label:"Turn into a group",icon:()=>ce(Xd),onClick:()=>{o("turnIntoGroup")}}),n.isGroup&&C.push({label:"Ungroup conditions",icon:()=>ce(lc),onClick:()=>{o("unGroupConditions")}}),C.push({label:"Remove",component:F=>El({option:"Remove",icon:"trash-2",active:F.active,variant:"danger",onClick:()=>{o("remove")}}),condition:()=>!n.isGroup}),C.push({label:"Remove group",component:F=>El({option:"Remove group",icon:"trash-2",active:F.active,variant:"danger",onClick:()=>{o("remove")}}),condition:()=>n.isGroup}),C}),u=["Check"],m=["Link","Dynamic Link"],p=["Float","Int","Currency","Percent"],f=["Select"],g=["Data","Long Text","Small Text","Text Editor","Text"],h=["Date","Datetime"],v=["Rating"];function _(){o("toggleConjunction",n.conjunction)}const y=C=>{n.condition[0]=C==null?void 0:C.fieldname,w()},w=()=>{n.condition[2]=""};function I(){var U;const[C,F]=n.condition;if(!C)return null;const M=(U=Mt.data)==null?void 0:U.find(B=>B.fieldname==C);if(!M)return null;const{fieldtype:R,options:T}=M;if(F=="is")return ce(ge,{type:"select",options:[{label:"Set",value:"set"},{label:"Not Set",value:"not set"}]});if(["like","not like","in","not in"].includes(F))return ce(ge,{type:"text"});if(f.includes(R)||u.includes(R)){const B=R=="Check"?["Yes","No"]:k(T);return ce(ge,{type:"select",options:B.map(Z=>({label:Z,value:Z}))})}else return m.includes(R)?R=="Dynamic Link"?ce(ge,{type:"text"}):ce(as,{class:"form-control",doctype:T,value:n.condition[2]}):p.includes(R)?ce(ge,{type:"number"}):h.includes(R)&&F=="between"?ce(pa,{value:n.condition[2],iconLeft:""}):h.includes(R)?ce(R=="Date"?St:ua,{value:n.condition[2],iconLeft:""}):v.includes(R)?ce(fa,{rating:n.condition[2]||0,static:!1,class:"truncate","onUpdate:modelValue":B=>S(B)}):ce(ge,{type:"text"})}function S(C){C=C.target?C.target.value:C,n.condition[1]==="between"?n.condition[2]=[C.split(",")[0],C.split(",")[1]]:n.condition[2]=C+""}function k(C){return C.split(`
`)}function L(C){let F=C.target._value,M=C.target.value;n.condition[1]=C.target.value,E(F,M)||(n.condition[2]=x(n.condition[0])),w()}function b(){var B;let C=[];const F=n.condition[0];if(!F)return C;const M=(B=Mt.data)==null?void 0:B.find(Z=>Z.fieldname==F);if(!M)return C;const{fieldtype:R,fieldname:T}=M;g.includes(R)&&C.push({label:"Equals",value:"=="},{label:"Not Equals",value:"!="},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),T==="_assign"&&(C=[{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"Is",value:"is"}]),p.includes(R)&&C.push({label:"Equals",value:"=="},{label:"Not Equals",value:"!="},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="}),f.includes(R)&&C.push({label:"Equals",value:"=="},{label:"Not Equals",value:"!="},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),m.includes(R)&&C.push({label:"Equals",value:"=="},{label:"Not Equals",value:"!="},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),u.includes(R)&&C.push({label:"Equals",value:"=="}),["Duration"].includes(R)&&C.push({label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),h.includes(R)&&C.push({label:"Equals",value:"=="},{label:"Not Equals",value:"!="},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="},{label:"Between",value:"between"}),v.includes(R)&&C.push({label:"Equals",value:"=="},{label:"Not Equals",value:"!="},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="});const U=C.find(Z=>Z.value==n.condition[1]);return n.condition[1]=(U==null?void 0:U.value)||C[0].value,C}function x(C){return f.includes(C.fieldtype)?k(C.options)[0]:u.includes(C.fieldtype)?"Yes":h.includes(C.fieldtype)?null:v.includes(C.fieldtype)?0:""}function E(C,F){let M=["==","!=","in","not in",">","<",">=","<="];return!!(M.includes(C)&&M.includes(F))}return(C,F)=>(r(),c(q,null,[s("div",{class:se(["flex gap-2",[{"items-center":!n.isGroup}]])},[s("div",{class:se(["flex gap-2 w-full",[{"items-center justify-between":!n.isGroup}]])},[s("div",sc,[n.itemIndex==0?(r(),c("div",nc," Where ")):(r(),c("div",ac,[d(t(Q),{variant:"subtle",class:"w-max",onClick:_,"icon-right":"refresh-cw",disabled:n.itemIndex>2,label:a.conjunction},null,8,["disabled","label"])]))]),n.isGroup?A("",!0):(r(),c("div",oc,[s("div",ic,[d(t(Dn),{options:t(Mt).data,modelValue:n.condition[0],"onUpdate:modelValue":[F[0]||(F[0]=M=>n.condition[0]=M),y],placeholder:"Field"},null,8,["options","modelValue"])]),s("div",rc,[n.condition[0]?(r(),D(t(ge),{key:1,disabled:!n.condition[0],type:"select",modelValue:n.condition[1],"onUpdate:modelValue":F[1]||(F[1]=M=>n.condition[1]=M),onChange:L,options:b(),class:"w-max min-w-[100px]"},null,8,["disabled","modelValue","options"])):(r(),D(t(ge),{key:0,disabled:"",type:"text",placeholder:"operator",class:"w-[100px]"}))]),s("div",uc,[n.condition[0]?(r(),D(Qe(I()),{key:1,modelValue:n.condition[2],"onUpdate:modelValue":F[2]||(F[2]=M=>n.condition[2]=M),onChange:S,placeholder:"condition"},null,40,["modelValue"])):(r(),D(t(ge),{key:0,disabled:"",type:"text",placeholder:"condition",class:"w-full"}))])])),n.isGroup&&!(n.level==2||n.level==4)?(r(),D(Xt,{key:1,conditions:n.condition,isChild:!0,level:n.level,disableAddCondition:n.disableAddCondition},null,8,["conditions","level","disableAddCondition"])):A("",!0),n.isGroup&&(n.level==2||n.level==4)?(r(),D(t(Q),{key:2,variant:"outline",onClick:F[3]||(F[3]=M=>l.value=!0),label:"Open nested conditions"})):A("",!0)],2),s("div",dc,[d(t(yt),{placement:"right",options:i.value},{default:$(()=>[d(t(Q),{variant:"ghost",icon:"more-horizontal"})]),_:1},8,["options"])])],2),d(t(Le),{modelValue:l.value,"onUpdate:modelValue":F[4]||(F[4]=M=>l.value=M),options:{size:"3xl",title:"Nested conditions"}},{"body-content":$(()=>[d(Xt,{conditions:n.condition,isChild:!0,level:n.level,disableAddCondition:n.disableAddCondition},null,8,["conditions","level","disableAddCondition"])]),_:1},8,["modelValue"])],64))}}),pc={class:"rounded-lg border border-gray-300 p-3 flex flex-col gap-4 w-full"},mc={key:0,class:"flex"},Xt=N({__name:"CFConditions",props:{conditions:{type:Array,required:!0},isChild:{type:Boolean,default:!1},level:{type:Number,default:0},disableAddCondition:{type:Boolean,default:!1}},setup(a){const e=a,l=()=>{let f="and";return e.conditions.forEach(g=>{typeof g=="string"&&(f=g)}),f},o=f=>{e.conditions.splice(e.conditions.indexOf(f),1,[f])},n=f=>Array.isArray(f),i=P(()=>{const f=[{label:"Add condition",onClick:()=>{const g=l();e.conditions.push(g,["","",""])}}];return e.level<3&&f.push({label:"Add condition group",onClick:()=>{const g=l();e.conditions.push(g,[[]])}}),f});function u(f){const g=e.conditions.indexOf(f);g==0?e.conditions.splice(g,2):e.conditions.splice(g-1,2)}function m(f){const g=l(),h=f.map(_=>typeof _=="string"?g:_),v=e.conditions.indexOf(f);v!==-1&&e.conditions.splice(v,1,...h)}function p(f){for(let g=0;g<e.conditions.length;g++)typeof e.conditions[g]=="string"&&(e.conditions[g]=f=="and"?"or":"and")}return Ce(()=>{Mt.fetched||Mt.submit()}),(f,g)=>(r(),c("div",pc,[(r(!0),c(q,null,G(e.conditions,(h,v)=>(r(),c(q,{key:h.field},[Array.isArray(h)?(r(),D(cc,{key:0,condition:h,isChild:e.isChild,itemIndex:v,onRemove:_=>u(h),onUnGroupConditions:_=>m(h),level:e.level+1,onToggleConjunction:p,isGroup:n(h[0]),conjunction:l(),onTurnIntoGroup:_=>o(h),disableAddCondition:e.disableAddCondition},null,8,["condition","isChild","itemIndex","onRemove","onUnGroupConditions","level","isGroup","conjunction","onTurnIntoGroup","disableAddCondition"])):A("",!0)],64))),128)),e.isChild?(r(),c("div",mc,[d(t(yt),{options:i.value},{default:$(({open:h})=>[d(t(Q),{disabled:e.disableAddCondition,label:"Add condition","icon-left":"plus","icon-right":h?"chevron-up":"chevron-down"},null,8,["disabled","icon-right"])]),_:1},8,["options"])])):A("",!0)]))}}),fc={class:"flex items-center justify-between mt-2"},vc=N({__name:"SlaAssignmentConditions",props:{conditions:{type:Array,required:!0}},setup(a){const e=a,l=()=>{let i="and";return e.conditions.forEach(u=>{typeof u=="string"&&(i=u)}),i},o=[{label:"Add condition",onClick:()=>{n()}},{label:"Add condition group",onClick:()=>{const i=l();e.conditions.push(i,[[]])}}],n=()=>{if(!qt(e.conditions))return;const u=l();e.conditions.push(u,["","",""])};return It(()=>[...e.conditions],()=>{ot("condition")},{deep:!0,debounce:100}),(i,u)=>(r(),c(q,null,[e.conditions.length>0?(r(),D(Xt,{key:0,conditions:e.conditions,level:0,disableAddCondition:t(ee).condition!=""},null,8,["conditions","disableAddCondition"])):A("",!0),e.conditions.length==0?(r(),c("div",{key:1,class:"flex p-4 items-center cursor-pointer justify-center gap-2 text-sm border border-gray-300 text-gray-600 rounded-md",onClick:u[0]||(u[0]=m=>e.conditions.push(["","",""]))},[d(t(Oe),{name:"plus",class:"h-4"}),le(" "+O(i.__("Add a custom condition")),1)])):A("",!0),s("div",fc,[e.conditions.length>0?(r(),D(t(yt),{key:0,options:o},{default:$(({open:m})=>[d(t(Q),{disabled:t(ee).condition!="","icon-right":m?"chevron-up":"chevron-down",label:i.__("Add condition")},null,8,["disabled","icon-right","label"])]),_:1})):A("",!0),d(t(Me),{message:t(ee).condition},null,8,["message"])])],64))}}),gc={class:"flex flex-col gap-4"},yc={key:0},hc={class:"flex gap-2"},_c=N({__name:"WorkDayModal",props:Ue({workDaysList:{type:Array,required:!0}},{modelValue:{required:!0,default:()=>({show:!1,isEditing:!1,data:{workday:"",start_time:"",end_time:""}})},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=V(!1),l=a,o=Re(a,"modelValue"),n=Pe({workday:"",start_time:"",end_time:""}),i=Pe({workday:"",start_time:"",end_time:""}),u=_=>{if(_.preventDefault(),!e.value){e.value=!0;return}const y=l.workDaysList.findIndex(w=>w.workday===n.workday);y!==-1&&l.workDaysList.splice(y,1)};function m(_){if(!_)return"";if(/^\d{1,2}:\d{2}:\d{2}$/.test(_)){const[y,w,I]=_.split(":");return`${y.padStart(2,"0")}:${w.padStart(2,"0")}:${I.padStart(2,"0")}`}if(/^\d{1,2}:\d{2}$/.test(_)){const[y,w]=_.split(":");return`${y.padStart(2,"0")}:${w.padStart(2,"0")}:00`}return""}function p(){n.workday="",n.start_time="",n.end_time="",i.workday="",i.start_time="",i.end_time="",e.value=!1}const f=_=>n[_]?(i[_]="",!0):(i[_]="This field is required",!1),g=()=>{if(!n.start_time||!n.end_time)return n.start_time||(i.start_time="Start time is required"),n.end_time||(i.end_time="End time is required"),!1;const[_,y]=n.start_time.split(":").map(Number),[w,I]=n.end_time.split(":").map(Number);return w<_||w===_&&I<=y?(i.end_time="End time must be after start time",!1):(i.end_time="",!0)},h=()=>{const _=f("workday"),y=f("start_time"),w=f("end_time")&&g();return _&&y&&w},v=()=>{if(!h()){W.error("Please fix the errors in the form");return}try{if(o.value.isEditing){const _=l.workDaysList.findIndex(y=>{var w;return y.workday===((w=o.value.data)==null?void 0:w.workday)});if(_!==-1){const y={...l.workDaysList[_],...n};l.workDaysList.splice(_,1,y),W.success("Workday updated")}}else{if(l.workDaysList.some(w=>w.workday===n.workday)){i.workday="This workday already exists",W.error("A workday with this name already exists");return}const y={...n};l.workDaysList.push(y),W.success("Workday added")}o.value.show=!1}catch(_){W.error(`Failed to save workday: ${_}`)}};return me(()=>o.value.show,_=>{_&&(o.value.isEditing&&o.value.data?(n.workday=o.value.data.workday,n.start_time=m(o.value.data.start_time),n.end_time=m(o.value.data.end_time)):p())}),(_,y)=>{const w=J("ErrorMessage");return r(),D(t(Le),{modelValue:o.value.show,"onUpdate:modelValue":y[6]||(y[6]=I=>o.value.show=I),onAfterLeave:p,options:{title:o.value.isEditing?"Edit workday":"Add workday"}},{"body-content":$(()=>[s("div",gc,[s("div",null,[d(t(ge),{type:"select",size:"sm",variant:"subtle",placeholder:"Select Workday",label:"Workday",modelValue:n.workday,"onUpdate:modelValue":y[0]||(y[0]=I=>n.workday=I),options:[{label:"Monday",value:"Monday"},{label:"Tuesday",value:"Tuesday"},{label:"Wednesday",value:"Wednesday"},{label:"Thursday",value:"Thursday"},{label:"Friday",value:"Friday"},{label:"Saturday",value:"Saturday"},{label:"Sunday",value:"Sunday"}],class:se({"border-red-500":i.workday}),onBlur:y[1]||(y[1]=I=>f("workday"))},null,8,["modelValue","class"]),d(w,{message:i.workday,class:"mt-2"},null,8,["message"])]),s("div",null,[d(t(ge),{type:"time",size:"sm",variant:"subtle",placeholder:"Start Time",label:"Start Time",modelValue:n.start_time,"onUpdate:modelValue":y[2]||(y[2]=I=>n.start_time=I),class:se({"border-red-500":i.start_time}),onBlur:y[3]||(y[3]=I=>f("start_time"))},null,8,["modelValue","class"]),d(w,{message:i.start_time,class:"mt-2"},null,8,["message"])]),s("div",null,[d(t(ge),{type:"time",size:"sm",variant:"subtle",placeholder:"End Time",label:"End Time",modelValue:n.end_time,"onUpdate:modelValue":y[4]||(y[4]=I=>n.end_time=I),class:se({"border-red-500":i.end_time}),onBlur:g},null,8,["modelValue","class"]),d(w,{message:i.end_time,class:"mt-2"},null,8,["message"])])])]),actions:$(()=>[s("div",{class:se(["flex",{"justify-between":o.value.isEditing,"justify-end":!o.value.isEditing}])},[o.value.isEditing?(r(),c("div",yc,[d(t(Q),{variant:"subtle",theme:e.value?"red":"gray",label:e.value?"Confirm Delete":"Delete",onClick:u,"icon-left":"trash-2"},null,8,["theme","label"])])):A("",!0),s("div",hc,[d(t(Q),{variant:"subtle",theme:"gray",onClick:y[5]||(y[5]=I=>o.value.show=!1),label:"Cancel"}),d(t(Q),{variant:"solid",onClick:v,label:"Save"})])],2)]),_:1},8,["modelValue","options"])}}}),bc={key:0},xc={key:1},wc={class:"flex justify-end"},kc={key:0},Cc=N({__name:"SlaWorkDaysListItem",props:{columns:{},row:{},isLast:{type:Boolean}},setup(a){const e=a,l=[{label:"Monday",value:"Monday"},{label:"Tuesday",value:"Tuesday"},{label:"Wednesday",value:"Wednesday"},{label:"Thursday",value:"Thursday"},{label:"Friday",value:"Friday"},{label:"Saturday",value:"Saturday"},{label:"Sunday",value:"Sunday"}],o=V({show:!1,isEditing:!1,data:{}}),n=V(!1),i=[{label:"Edit",onClick:()=>m(),icon:"edit"},...lt({onConfirmDelete:()=>u(),isConfirmingDelete:n})],u=()=>{if(!n.value){n.value=!0;return}const f=j.value.support_and_resolution.indexOf(e.row);f!==-1&&j.value.support_and_resolution.splice(f,1)},m=()=>{o.value.show=!0,o.value.isEditing=!0,o.value.data={workday:e.row.workday,start_time:e.row.start_time,end_time:e.row.end_time}},p=f=>{if(!f)return"00:00";const[g,h]=f.split(":"),v=new Date;return v.setHours(parseInt(g)||0,parseInt(h)||0,0),v.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})};return(f,g)=>{const h=st;return r(),c(q,null,[s("div",{class:"grid gap-2 py-3.5 px-4 items-center",style:rt({gridTemplateColumns:t(Nt)(e.columns)})},[(r(!0),c(q,null,G(e.columns,v=>(r(),c("div",{key:v.key,class:"w-full overflow-hidden whitespace-nowrap text-ellipsis"},[v.key==="start_time"||v.key==="end_time"?(r(),c("div",bc,O(p(e.row[v.key])),1)):(r(),c("div",xc,[d(t(At),{class:"bg-transparent cursor-pointer border-0 focus-visible:!ring-0 bg-none",options:l,modelValue:e.row[v.key],"onUpdate:modelValue":_=>e.row[v.key]=_},null,8,["modelValue","onUpdate:modelValue"])]))]))),128)),s("div",wc,[d(h,{placement:"right",options:i},{default:$(()=>[d(t(Q),{icon:"more-horizontal",variant:"ghost",onClick:g[0]||(g[0]=v=>n.value=!1)})]),_:1})])],4),e.isLast?A("",!0):(r(),c("hr",kc)),d(_c,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=v=>o.value=v),workDaysList:t(j).support_and_resolution},null,8,["modelValue","workDaysList"])],64)}}}),$c={class:"rounded-md border px-2 border-gray-300 text-sm"},Ac={key:0,class:"text-red-500"},Sc={key:1},Vc={key:2,class:"text-center p-4 text-gray-600"},Ec={class:"flex items-center justify-between mt-2.5"},Dc=N({__name:"SlaWorkDaysList",setup(a){const e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=()=>{const n=new Set(j.value.support_and_resolution.map(u=>u.workday)),i=e.find(u=>!n.has(u))||e[0];j.value.support_and_resolution.push({workday:i,start_time:"09:00:00",end_time:"17:00:00",id:Math.random().toString(36).substring(2,9)})},o=[{label:"Day",key:"workday",isRequired:!0},{label:"Start time",key:"start_time",isRequired:!0},{label:"End time",key:"end_time",isRequired:!0}];return(n,i)=>{var m,p,f;const u=J("ErrorMessage");return r(),c(q,null,[s("div",$c,[((m=t(j).support_and_resolution)==null?void 0:m.length)!==0?(r(),c("div",{key:0,class:"grid p-2 px-4 items-center",style:rt({gridTemplateColumns:t(Nt)(o)})},[(r(),c(q,null,G(o,g=>s("div",{key:g.key,class:se(["text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis",{"ml-2":g.key==="workday"}])},[le(O(g.label)+" ",1),g.isRequired?(r(),c("span",Ac,"*")):A("",!0)],2)),64))],4)):A("",!0),((p=t(j).support_and_resolution)==null?void 0:p.length)!==0?(r(),c("hr",Sc)):A("",!0),(r(!0),c(q,null,G(t(j).support_and_resolution,(g,h)=>(r(),D(Cc,{key:h+g.workday+g.id,row:g,columns:o,isLast:h===t(j).support_and_resolution.length-1},null,8,["row","isLast"]))),128)),((f=t(j).support_and_resolution)==null?void 0:f.length)===0?(r(),c("div",Vc," No workdays in the list ")):A("",!0)]),s("div",Ec,[t(j).support_and_resolution.length<7?(r(),D(t(Q),{key:0,variant:"subtle",label:"Add row",onClick:l,"icon-left":"plus"})):A("",!0),d(u,{message:t(ee).support_and_resolution},null,8,["message"])])],64)}}}),xe=V({screen:"list",data:null}),we=V({holiday_list_name:"",from_date:"",to_date:""}),z=V({holiday_list_name:"",description:"",associate_holiday_list:!0,loading:!1,total_holidays:0,holidays:[],from_date:null,to_date:null,recurring_holidays:[]}),Os=()=>{z.value={holiday_list_name:"",description:"",associate_holiday_list:!0,loading:!1,total_holidays:0,holidays:[],from_date:null,to_date:null,recurring_holidays:[]}},dl=a=>{const e=l=>{var o;if(!(a&&l!==a))switch(l){case"holiday_list_name":(o=z.value.holiday_list_name)!=null&&o.trim()?we.value.holiday_list_name="":we.value.holiday_list_name="Holiday list name is required";break;case"from_date":if(z.value.from_date?we.value.from_date="":we.value.from_date="Start date is required",z.value.to_date){const n=new Date(z.value.from_date),i=new Date(z.value.to_date);n>i?we.value.dateRange="Start date cannot be after end date":we.value.dateRange=""}break;case"to_date":if(z.value.to_date?we.value.to_date="":we.value.to_date="End date is required",z.value.from_date){const n=new Date(z.value.from_date),i=new Date(z.value.to_date);n>i?we.value.dateRange="Start date cannot be after end date":we.value.dateRange=""}break}};return a?e(a):Object.keys(we.value).forEach(e),we.value};function Zt(){const a=z.value.holidays.filter(e=>!e.weekly_off);for(const e of z.value.recurring_holidays){const l=Fc(z.value.from_date,z.value.to_date,e.day,a,e.repetition);a.push(...l)}z.value.holidays=a}function Ic(a){const l=a.startOf("month").day(),o=(a.date()+l-1)/7;return Math.ceil(o)}function Lc(a,e,l,o=[],n){const i=ie(a),u=ie(e),m=[],f={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[l.toLowerCase()];if(f===void 0)return m;const g=o.map(_=>ie(_.holiday_date).startOf("day").toDate());let h=i.day(f);h.isBefore(i,"day")&&(h=h.add(1,"week"));const v=!n||n.all;for(;h.isSameOrBefore(u,"day");){const _=h.toDate(),y=ie(_).startOf("day");(v||Bc(h,n))&&(g.some(w=>ie(w).startOf("day").isSame(y))||m.push(_)),h=h.add(1,"week")}return m}function Bc(a,e){if(e.all)return!0;switch(Ic(a)){case 1:return e.first;case 2:return e.second;case 3:return e.third;case 4:return e.fourth;case 5:return e.fifth;default:return!1}}function Fc(a,e,l,o=[],n={all:!0,first:!1,second:!1,third:!1,fourth:!1,fifth:!1}){return Lc(a,e,l,o,n).map((u,m)=>({description:l.charAt(0).toUpperCase()+l.slice(1),holiday_date:u,weekly_off:1,idx:m+1,repetition:n}))}const Oc={class:"flex items-center justify-between"},Mc={class:"my-2 p-1 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},jc=["onClick"],Rc={class:"flex items-center gap-2 w-full"},qc=["checked"],Tc={class:"select-none"},Nc={class:"flex cursor-pointer items-center gap-1"},Uc={class:"mt-1.5 flex flex-col gap-1 border-t border-outline-gray-modals pt-1.5"},Pc={class:"mt-5"},Hc=N({__name:"SlaHolidays",setup(a){const e=()=>{Tt("Business Holidays"),xe.value={screen:"view",data:null,previousScreen:{screen:"view",data:j.value.name}},Os()},l=n=>{Tt("Business Holidays"),xe.value={screen:"view",data:n,previousScreen:{screen:"view",data:j.value.name}}},o=ut({doctype:"HD Service Holiday List",fields:["name","holiday_list_name"],auto:!0});return It(j.value.support_and_resolution,()=>{ot("support_and_resolution")},{debounce:300}),(n,i)=>(r(),c(q,null,[s("div",Oc,[i[1]||(i[1]=s("div",{class:"flex flex-col gap-1"},[s("div",{class:"text-lg font-semibold text-ink-gray-8"}," Work schedule and holidays "),s("div",{class:"text-p-sm text-ink-gray-6 max-w-lg"}," Set working days, hours, and holidays by selecting a predefined schedule or creating a new one. ")],-1)),d(t(da),null,{target:$(({open:u})=>[d(t(Q),{class:"text-sm","icon-right":u?"chevron-up":"chevron-down",label:t(j).holiday_list},null,8,["icon-right","label"])]),body:$(()=>[s("div",Mc,[s("div",null,[(r(!0),c(q,null,G(t(o).data,u=>(r(),c("div",{key:u.name,class:"flex items-center justify-between gap-4 rounded px-2 py-1.5 text-base text-ink-gray-8 cursor-pointer hover:bg-surface-gray-2",onClick:m=>t(j).holiday_list=u.name},[s("div",Rc,[s("input",{name:"holiday_list",checked:u.name===t(j).holiday_list,type:"radio"},null,8,qc),s("div",Tc,O(u.holiday_list_name),1)]),s("div",Nc,[d(t(Q),{variant:"ghost",onClick:_e(m=>l(u),["stop"]),icon:"edit"},null,8,["onClick"])])],8,jc))),128)),s("div",Uc,[d(t(Q),{class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",label:"Create new business holiday",onClick:i[0]||(i[0]=u=>e()),"icon-left":"plus"})])])])]),_:1})]),s("div",Pc,[d(Dc)])],64))}});const zc=Se(Hc,[["__scopeId","data-v-97516a07"]]),Qc={class:"flex gap-2 border border-gray-300 rounded w-fit min-w-max px-4 select-none shadow-sm"},Jc={key:0,class:"p-2 flex flex-col items-center group relative"},Wc={class:"flex items-center gap-1"},Gc={class:"flex flex-col group-hover:opacity-100 opacity-0 absolute top-1/2 -translate-y-1/2 -right-3"},Kc={key:1,class:"p-2 flex flex-col items-center group relative"},Zc={class:"flex items-center gap-1"},Yc={class:"flex flex-col group-hover:opacity-100 opacity-0 absolute top-1/2 -translate-y-1/2 -right-3"},Xc={key:2,class:"p-2 flex flex-col items-center group relative"},ep={class:"flex items-center gap-1"},tp={class:"flex flex-col group-hover:opacity-100 opacity-0 absolute top-1/2 -translate-y-1/2 -right-3"},lp=300,sp=50,np=N({__name:"DurationPicker",props:{modelValue:{default:0},min:{default:0},max:{default:Number.MAX_SAFE_INTEGER},options:{default:()=>({})}},emits:["update:modelValue","change"],setup(a,{emit:e}){const l=a,o=P(()=>{var U,B,Z;return{hours:((U=l.options)==null?void 0:U.hours)??!0,minutes:((B=l.options)==null?void 0:B.minutes)??!0,seconds:((Z=l.options)==null?void 0:Z.seconds)??!1}}),n=P(()=>{const{hours:U,minutes:B,seconds:Z}=o.value;return!U&&!B&&!Z?{hours:!0,minutes:!0,seconds:!1}:{hours:U,minutes:B,seconds:Z}}),i=e,u=V(l.modelValue),m=V(null),p=V(null),f=V(null),g=V(null),h=V(null);let v=!1,_=null;const y=P({get:()=>Math.floor(u.value/3600).toString(),set:U=>{if(U==="")return;const B=parseInt(U,10);if(!isNaN(B)&&B>=0){const Z=B*3600+k()*60+L();C(Z)}}}),w=P({get:()=>Math.floor(u.value%3600/60).toString(),set:U=>{if(U==="")return;const B=parseInt(U,10);if(!isNaN(B)&&B>=0&&B<=59){const Z=S()*3600+B*60+L();C(Z)}}}),I=P({get:()=>(u.value%60).toString(),set:U=>{if(U==="")return;const B=parseInt(U,10);if(!isNaN(B)&&B>=0&&B<=59){const Z=S()*3600+k()*60+B;C(Z)}}});function S(){return Math.floor(u.value/3600)}function k(){return Math.floor(u.value%3600/60)}function L(){return u.value%60}Je(()=>{b(),_&&clearTimeout(_)});function b(){g.value!==null&&(clearInterval(g.value),g.value=null),_&&(clearTimeout(_),_=null),v=!1}function x(U){v||(v=!0,U(),_=window.setTimeout(()=>{v&&(h.value=U,g.value=window.setInterval(()=>{h.value&&h.value()},sp))},lp))}function E(){b()}document.addEventListener("mouseup",E),document.addEventListener("touchend",E),Je(()=>{document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E)});function C(U,B=!0){U=Math.max(l.min,Math.min(l.max,U)),U!==u.value&&(u.value=U,B&&(i("update:modelValue",u.value),i("change",u.value)))}function F(U){switch(U){case"hours":y.value=y.value;break;case"minutes":w.value=w.value;break;case"seconds":I.value=I.value;break}}function M(U){U.target.blur()}function R(U){let B=u.value;switch(U){case"hours":B+=3600;break;case"minutes":B+=60;break;case"seconds":B+=1;break}C(B)}function T(U){let B=u.value;switch(U){case"hours":B-=3600;break;case"minutes":B-=60;break;case"seconds":B-=1;break}C(B)}return me(()=>l.modelValue,U=>{U!==u.value&&(u.value=Math.max(l.min,Math.min(l.max,U)))},{immediate:!0}),(U,B)=>{const Z=J("FeatherIcon");return r(),c("div",Qc,[n.value.hours?(r(),c("div",Jc,[s("div",Wc,[Ee(s("input",{ref_key:"hoursInput",ref:m,"onUpdate:modelValue":B[0]||(B[0]=X=>y.value=X),type:"number",min:"0",class:"w-8 text-sm bg-transparent border-0 p-0 text-center focus:ring-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",onBlur:B[1]||(B[1]=X=>F("hours")),onKeyup:ze(M,["enter"])},null,544),[[il,y.value,void 0,{number:!0}]]),s("div",Gc,[s("button",{onMousedown:B[2]||(B[2]=X=>x(()=>R("hours"))),onTouchstart:B[3]||(B[3]=X=>x(()=>R("hours"))),onMouseup:b,onMouseleave:b,onTouchend:b,onTouchcancel:b,class:"hover:bg-gray-100 rounded-sm select-none"},[d(Z,{name:"chevron-up",class:"size-3.5"})],32),s("button",{onMousedown:B[4]||(B[4]=X=>x(()=>T("hours"))),onTouchstart:B[5]||(B[5]=X=>x(()=>T("hours"))),onMouseup:b,onMouseleave:b,onTouchend:b,onTouchcancel:b,class:"hover:bg-gray-100 rounded-sm select-none"},[d(Z,{name:"chevron-down",class:"size-3.5"})],32)])]),B[18]||(B[18]=s("div",{class:"text-xs text-gray-600 mt-1"},"Hrs",-1))])):A("",!0),n.value.minutes?(r(),c("div",Kc,[s("div",Zc,[Ee(s("input",{ref_key:"minutesInput",ref:p,"onUpdate:modelValue":B[6]||(B[6]=X=>w.value=X),type:"number",min:"0",max:"59",class:"w-8 text-sm bg-transparent border-0 p-0 text-center focus:ring-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",onBlur:B[7]||(B[7]=X=>F("minutes")),onKeyup:ze(M,["enter"])},null,544),[[il,w.value,void 0,{number:!0}]]),s("div",Yc,[s("button",{onMousedown:B[8]||(B[8]=X=>x(()=>R("minutes"))),onTouchstart:B[9]||(B[9]=X=>x(()=>R("minutes"))),onMouseup:b,onMouseleave:b,onTouchend:b,onTouchcancel:b,class:"hover:bg-gray-100 rounded-sm select-none"},[d(Z,{name:"chevron-up",class:"size-3.5"})],32),s("button",{onMousedown:B[10]||(B[10]=X=>x(()=>T("minutes"))),onTouchstart:B[11]||(B[11]=X=>x(()=>T("minutes"))),onMouseup:b,onMouseleave:b,onTouchend:b,onTouchcancel:b,class:"hover:bg-gray-100 rounded-sm select-none"},[d(Z,{name:"chevron-down",class:"size-3.5"})],32)])]),B[19]||(B[19]=s("div",{class:"text-xs text-gray-600 mt-1"},"Min",-1))])):A("",!0),n.value.seconds?(r(),c("div",Xc,[s("div",ep,[Ee(s("input",{ref_key:"secondsInput",ref:f,"onUpdate:modelValue":B[12]||(B[12]=X=>I.value=X),type:"number",min:"0",max:"59",class:"w-8 text-sm bg-transparent border-0 p-0 text-center focus:ring-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",onBlur:B[13]||(B[13]=X=>F("seconds")),onKeyup:ze(M,["enter"])},null,544),[[il,I.value,void 0,{number:!0}]]),s("div",tp,[s("button",{onMousedown:B[14]||(B[14]=X=>x(()=>R("seconds"))),onTouchstart:B[15]||(B[15]=X=>x(()=>R("seconds"))),onMouseup:b,onMouseleave:b,onTouchend:b,onTouchcancel:b,class:"hover:bg-gray-100 rounded-sm select-none"},[d(Z,{name:"chevron-up",class:"size-3.5"})],32),s("button",{onMousedown:B[16]||(B[16]=X=>x(()=>T("seconds"))),onTouchstart:B[17]||(B[17]=X=>x(()=>T("seconds"))),onMouseup:b,onMouseleave:b,onTouchend:b,onTouchcancel:b,class:"hover:bg-gray-100 rounded-sm select-none"},[d(Z,{name:"chevron-down",class:"size-3.5"})],32)])]),B[20]||(B[20]=s("div",{class:"text-xs text-gray-600 mt-1"},"Sec",-1))])):A("",!0)])}}});const vl=Se(np,[["__scopeId","data-v-d03c027b"]]);function gl(a){const e=Math.floor(a/86400),l=Math.floor(a%(3600*24)/3600),o=Math.floor(a%3600/60),n=Math.floor(a%60);let i="";return e>0&&(i+=`${e} days `),l>0&&(i+=`${l} hours `),o>0&&(i+=`${o} minutes `),n>0&&(i+=`${n} seconds`),i.trim()}const ap={class:"flex flex-col gap-4"},op=["onClick"],ip={key:0},rp={key:1,class:"text-gray-500"},up={class:"absolute bg-white top-2"},dp=["onClick"],cp={key:0},pp={key:1,class:"text-gray-500"},mp={class:"absolute bg-white top-2"},fp={class:"flex justify-between"},vp={class:"flex gap-2"},gp=N({__name:"EditResponseResolutionModal",props:Ue({row:{type:Object,required:!0}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:Ue(["onDefaultPriorityChange"],["update:modelValue"]),setup(a,{emit:e}){const l=Re(a,"modelValue"),o=V(!1),n=a,i=je("priorityOptions"),u=V({priority:n.row.priority,resolution_time:n.row.resolution_time,response_time:n.row.response_time,default_priority:n.row.default_priority}),m=()=>{if(!u.value.priority)return W.error("Please select a priority"),!1;const g=parseInt(u.value.resolution_time);if(isNaN(g)||g<=0)return W.error("Resolution time must be a positive number"),!1;const h=parseInt(u.value.response_time);return isNaN(h)||h<=0?(W.error("Response time must be a positive number"),!1):(u.value.default_priority&&j.value.priorities.forEach(v=>{v.default_priority=!1}),!0)},p=g=>{if(g.preventDefault(),!o.value){o.value=!0;return}j.value.priorities.splice(j.value.priorities.indexOf(n.row),1)},f=()=>{m()&&(n.row.priority=u.value.priority,n.row.resolution_time=u.value.resolution_time,n.row.response_time=u.value.response_time,n.row.default_priority=u.value.default_priority,l.value=!1)};return(g,h)=>(r(),D(t(Le),{modelValue:l.value,"onUpdate:modelValue":h[5]||(h[5]=v=>l.value=v),options:{title:"Edit response and resolution"}},{"body-content":$(()=>[s("div",ap,[d(t(ge),{type:"select",size:"sm",variant:"subtle",placeholder:"Select Priority",label:"Priority",modelValue:u.value.priority,"onUpdate:modelValue":h[0]||(h[0]=v=>u.value.priority=v),options:t(i),required:""},null,8,["modelValue","options"]),s("div",null,[d(t(We),{label:"Response time",required:""}),d(t(De),{class:"mt-2"},{target:$(({togglePopover:v})=>[s("div",{onClick:_=>v(),class:"w-full bg-gray-100 rounded p-1.5 px-2 text-base text-gray-800"},[u.value.response_time?(r(),c("div",ip,O(t(gl)(u.value.response_time)),1)):(r(),c("div",rp,"Select time"))],8,op)]),body:$(()=>[s("div",up,[d(vl,{modelValue:u.value.response_time,"onUpdate:modelValue":h[1]||(h[1]=v=>u.value.response_time=v),options:{seconds:!1}},null,8,["modelValue"])])]),_:1})]),s("div",null,[d(t(We),{label:"Resolution time",required:""}),d(t(De),{class:"mt-2"},{target:$(({togglePopover:v})=>[s("div",{onClick:_=>v(),class:"w-full bg-gray-100 rounded p-1.5 px-2 text-base text-gray-800"},[u.value.resolution_time?(r(),c("div",cp,O(t(gl)(u.value.resolution_time)),1)):(r(),c("div",pp,"Select time"))],8,dp)]),body:$(()=>[s("div",mp,[d(vl,{modelValue:u.value.resolution_time,"onUpdate:modelValue":h[2]||(h[2]=v=>u.value.resolution_time=v),options:{seconds:!1}},null,8,["modelValue"])])]),_:1})]),d(t(Xe),{modelValue:u.value.default_priority,"onUpdate:modelValue":h[3]||(h[3]=v=>u.value.default_priority=v),label:"Set default priority"},null,8,["modelValue"])])]),actions:$(()=>[s("div",fp,[s("div",null,[d(t(Q),{variant:"subtle",theme:o.value?"red":"gray",label:o.value?"Confirm Delete":"Delete",onClick:p,"icon-left":"trash-2"},null,8,["theme","label"])]),s("div",vp,[d(t(Q),{variant:"subtle",theme:"gray",onClick:h[4]||(h[4]=v=>l.value=!1),label:"Cancel"}),d(t(Q),{variant:"solid",onClick:f,label:"Save"})])])]),_:1},8,["modelValue"]))}}),yp={key:0},hp={key:1},_p=["onClick"],bp={class:"absolute bg-white top-2"},xp={key:2},wp={class:"flex justify-end"},kp={key:0},Cp=N({__name:"SlaPriorityListItem",props:{columns:{type:Array,required:!0},row:{type:Object,required:!0},isLast:{type:Boolean,default:!1}},setup(a){const e=a,l=V(!1),o=V(!1),n=V({priority:e.row.priority,resolution_time:e.row.resolution_time,response_time:e.row.response_time,default_priority:e.row.default_priority}),i=je("priorityOptions"),u=[{label:"Edit",onClick:()=>f(),icon:"edit"},...lt({onConfirmDelete:()=>p(),isConfirmingDelete:l})],m=je("gridTemplateColumns"),p=()=>{if(!l.value){l.value=!0;return}j.value.priorities.splice(j.value.priorities.indexOf(e.row),1)},f=()=>{o.value=!0,n.value={priority:e.row.priority,resolution_time:e.row.resolution_time,response_time:e.row.response_time,default_priority:e.row.default_priority}},g=h=>{j.value.priorities.forEach(v=>{v.default_priority=!1}),e.row.default_priority=h};return(h,v)=>{const _=st;return r(),c(q,null,[s("div",{class:"grid gap-2 py-3.5 px-4 items-center",style:rt({gridTemplateColumns:t(m)})},[(r(!0),c(q,null,G(e.columns,y=>(r(),c("div",{key:y.key,class:"w-full overflow-hidden whitespace-nowrap text-ellipsis"},[y.key==="default_priority"?(r(),c("div",yp,[d(t(Xe),{modelValue:e.row.default_priority,"onUpdate:modelValue":[v[0]||(v[0]=w=>e.row.default_priority=w),v[1]||(v[1]=w=>g(w))]},null,8,["modelValue"])])):y.key==="response_time"||y.key==="resolution_time"?(r(),c("div",hp,[d(t(De),null,{target:$(({togglePopover:w})=>[s("div",{onClick:I=>w(),class:"min-h-7 w-full cursor-pointer select-none leading-5 p-1 px-2 hover:bg-gray-200 rounded"},O(t(gl)(e.row[y.key])),9,_p)]),body:$(()=>[s("div",bp,[d(vl,{modelValue:e.row[y.key],"onUpdate:modelValue":w=>e.row[y.key]=w},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)])):(r(),c("div",xp,[d(t(At),{class:"w-full bg-transparent cursor-pointer border-0 focus-visible:!ring-0 bg-none",options:t(i),modelValue:e.row[y.key],"onUpdate:modelValue":w=>e.row[y.key]=w},null,8,["options","modelValue","onUpdate:modelValue"])]))]))),128)),s("div",wp,[d(_,{placement:"right",options:u},{default:$(()=>[d(t(Q),{icon:"more-horizontal",variant:"ghost",onClick:v[2]||(v[2]=y=>l.value=!1)})]),_:1})])],4),e.isLast?A("",!0):(r(),c("hr",kp)),d(gp,{modelValue:o.value,"onUpdate:modelValue":v[3]||(v[3]=y=>o.value=y),row:e.row},null,8,["modelValue","row"])],64)}}}),$p={class:"rounded-md border px-2 border-gray-300 text-sm"},Ap={key:0,class:"text-red-500"},Sp={key:1},Vp={key:2,class:"text-center p-4 text-gray-600"},Ep={key:0,class:"flex items-center justify-between mt-2.5"},Dp=N({__name:"SlaPriorityList",setup(a){fe({url:"frappe.client.get_list",params:{doctype:"HD Ticket Priority",fields:["name"],order_by:"integer_value desc"},auto:!0,onSuccess(i){e.push(...i.map(u=>({label:u.name,value:u.name}))),he.value.data||(j.value.priorities=e.map((u,m)=>({priority:u.value,resolution_time:60*60,response_time:60*60,default_priority:m===0})))}});const e=Pe([]);$t("priorityOptions",e);const l=()=>{const i=j.value.priorities.map(p=>p.priority),u=e.filter(p=>!i.includes(p.value));if(u.length===0){W.error("All available priorities have already been added");return}const m=u[0].value;j.value.priorities.push({priority:m,resolution_time:60*60,response_time:60*60,default_priority:j.value.priorities.length===0})},o=P(()=>[{label:"Priority",key:"priority",isRequired:!0},{label:"Default priority",key:"default_priority",isRequired:!0},{label:"First response time",key:"response_time",isRequired:!0},{label:"Resolution time",key:"resolution_time",isRequired:!0}]),n=P(()=>Nt(o.value));return $t("gridTemplateColumns",n),It(()=>[...j.value.priorities],()=>{ot("priorities")},{deep:!0,debounce:300}),(i,u)=>{var p,f,g;const m=J("ErrorMessage");return r(),c(q,null,[s("div",$p,[((p=t(j).priorities)==null?void 0:p.length)!==0?(r(),c("div",{key:0,class:"grid p-2 px-4 items-center",style:rt({gridTemplateColumns:n.value})},[(r(!0),c(q,null,G(o.value,h=>(r(),c("div",{key:h.key,class:se(["text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis",{"ml-2":h.key==="priority"||h.key==="response_time"||h.key==="resolution_time"}])},[le(O(h.label)+" ",1),h.isRequired?(r(),c("span",Ap,"*")):A("",!0)],2))),128))],4)):A("",!0),((f=t(j).priorities)==null?void 0:f.length)!==0?(r(),c("hr",Sp)):A("",!0),(r(!0),c(q,null,G(t(j).priorities,(h,v)=>(r(),D(Cp,{key:h.priority,row:h,columns:o.value,isLast:v===t(j).priorities.length-1},null,8,["row","columns","isLast"]))),128)),((g=t(j).priorities)==null?void 0:g.length)===0?(r(),c("div",Vp," No priorities in the list ")):A("",!0)]),t(j).priorities.length!==e.length||t(ee).default_priority||t(ee).priorities?(r(),c("div",Ep,[s("div",null,[t(j).priorities.length!==e.length?(r(),D(t(Q),{key:0,variant:"subtle",label:"Add row",onClick:l,"icon-left":"plus"})):A("",!0)]),d(m,{message:t(ee).default_priority||t(ee).priorities},null,8,["message"])])):A("",!0)],64)}}}),Ip={key:0},Lp={key:1},Bp={class:"flex justify-end"},Fp={key:0},Op={class:"flex flex-col gap-4"},Mp={class:"flex justify-between"},jp={class:"flex gap-2"},Rp=N({__name:"SlaStatusListItem",props:{columns:{type:Array,required:!0},row:{type:Object,required:!0},isLast:{type:Boolean,default:!1},statusList:{type:Array,required:!0}},setup(a){const e=a,l=V(!1),o=V(!1),n=V({status:e.row.status,sla_behavior:e.row.sla_behavior}),i=[{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}],u=[{label:"Fulfilled",value:"Fulfilled"},{label:"Paused",value:"Paused"}],m=[{label:"Edit",onClick:()=>f(),icon:"edit"},...lt({onConfirmDelete:()=>p(),isConfirmingDelete:o})],p=()=>{if(!o.value){o.value=!0;return}e.statusList.splice(e.statusList.indexOf(e.row),1)},f=()=>{n.value={status:e.row.status,sla_behavior:e.row.sla_behavior},l.value=!0};function g(){if(!n.value.status){W.error("Please select a status");return}if(!n.value.sla_behavior){W.error("Please select an SLA behavior");return}if(e.statusList.some(v=>v.status===n.value.status&&v!==e.row)){W.error("A status with this name already exists");return}e.row.status=n.value.status,e.row.sla_behavior=n.value.sla_behavior,n.value={status:"",sla_behavior:""},l.value=!1}return(h,v)=>{const _=st,y=J("FormControl");return r(),c(q,null,[s("div",{class:"grid gap-2 py-3.5 px-4 items-center",style:rt({gridTemplateColumns:t(Nt)(e.columns)})},[(r(!0),c(q,null,G(e.columns,w=>(r(),c("div",{key:w.key,class:"w-full overflow-hidden whitespace-nowrap text-ellipsis"},[w.key==="status"?(r(),c("div",Ip,[d(t(At),{class:"w-[160px] bg-transparent cursor-pointer border-0 focus-visible:!ring-0 bg-none",options:i,modelValue:e.row.status,"onUpdate:modelValue":v[0]||(v[0]=I=>e.row.status=I)},null,8,["modelValue"])])):w.key==="sla_behavior"?(r(),c("div",Lp,[d(t(At),{class:"w-[160px] bg-transparent cursor-pointer border-0 focus-visible:!ring-0 bg-none",options:u,modelValue:e.row.sla_behavior,"onUpdate:modelValue":v[1]||(v[1]=I=>e.row.sla_behavior=I)},null,8,["modelValue"])])):A("",!0)]))),128)),s("div",Bp,[d(_,{placement:"right",options:m},{default:$(()=>[d(t(Q),{icon:"more-horizontal",variant:"ghost",onClick:v[2]||(v[2]=w=>o.value=!1)})]),_:1})])],4),e.isLast?A("",!0):(r(),c("hr",Fp)),d(t(Le),{modelValue:l.value,"onUpdate:modelValue":v[6]||(v[6]=w=>l.value=w),onAfterLeave:v[7]||(v[7]=w=>o.value=!1),options:{title:"Edit Status"}},{"body-content":$(()=>[s("div",Op,[d(y,{type:"select",size:"sm",variant:"subtle",placeholder:"Select Status",label:"Status",modelValue:n.value.status,"onUpdate:modelValue":v[3]||(v[3]=w=>n.value.status=w),options:i,required:""},null,8,["modelValue"]),d(y,{type:"select",size:"sm",variant:"subtle",placeholder:"Select Status",label:"SLA behavior",modelValue:n.value.sla_behavior,"onUpdate:modelValue":v[4]||(v[4]=w=>n.value.sla_behavior=w),options:u,required:""},null,8,["modelValue"])])]),actions:$(()=>[s("div",Mp,[s("div",null,[d(t(Q),{variant:"subtle",theme:o.value?"red":"gray",label:o.value?"Confirm Delete":"Delete",onClick:p,"icon-left":"trash-2"},null,8,["theme","label"])]),s("div",jp,[d(t(Q),{variant:"subtle",theme:"gray",onClick:v[5]||(v[5]=w=>l.value=!1),label:"Cancel"}),d(t(Q),{variant:"solid",onClick:g,label:"Save"})])])]),_:1},8,["modelValue"])],64)}}}),qp={class:"rounded-md border px-2 border-gray-300 text-sm"},Tp={key:0,class:"text-red-500"},Np={key:1},Up={key:2,class:"text-center p-4 text-gray-600"},Pp={key:0,class:"flex items-center justify-between mt-2.5"},Hp=N({__name:"SlaStatusList",props:{statusList:{type:Array,required:!0}},setup(a){const e=a,l=["Open","Resolved","Closed","Replied"],o=()=>{const i=e.statusList.map(f=>f==null?void 0:f.status),u=l.filter(f=>!i.includes(f));if(u.length===0){W.error("All available statuses have already been added");return}const m=u[0];if(!m){W.error("No valid status available to add");return}const p={status:m,sla_behavior:"Fulfilled",id:Math.random().toString(36).substring(2,9)};e.statusList.push(p)},n=[{label:"When Status is",key:"status",isRequired:!0},{label:"SLA is",key:"sla_behavior",isRequired:!0}];return It(()=>[...e.statusList],()=>{ot("statuses")},{deep:!0,debounce:300}),(i,u)=>{var p,f,g;const m=J("ErrorMessage");return r(),c(q,null,[s("div",qp,[((p=a.statusList)==null?void 0:p.length)!==0?(r(),c("div",{key:0,class:"grid p-2 px-4 items-center",style:rt({gridTemplateColumns:t(Nt)(n)})},[(r(),c(q,null,G(n,h=>s("div",{key:h.key,class:"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis ml-2"},[le(O(h.label)+" ",1),h.isRequired?(r(),c("span",Tp,"*")):A("",!0)])),64))],4)):A("",!0),((f=a.statusList)==null?void 0:f.length)!==0?(r(),c("hr",Np)):A("",!0),(r(!0),c(q,null,G(a.statusList,(h,v)=>(r(),D(Rp,{key:v+h.status+h.id,row:h,columns:n,isLast:v===a.statusList.length-1,statusList:a.statusList},null,8,["row","isLast","statusList"]))),128)),((g=a.statusList)==null?void 0:g.length)===0?(r(),c("div",Up," No status in the list ")):A("",!0)]),t(j).statuses.length<4||t(ee).statuses||t(ee).statuses_conflict?(r(),c("div",Pp,[s("div",null,[t(j).statuses.length<4?(r(),D(t(Q),{key:0,variant:"subtle",label:"Add row",onClick:o,"icon-left":"plus"})):A("",!0)]),d(m,{message:t(ee).statuses||t(ee).statuses_conflict},null,8,["message"])])):A("",!0)],64)}}}),zp={key:0,class:"flex items-center h-full justify-center"},Qp={key:1,class:"sticky top-0 z-10 bg-white px-10 pt-8 pb-6"},Jp={class:"flex items-center justify-between w-full"},Wp={class:"flex items-center gap-2"},Gp={class:"flex gap-4 items-center"},Kp={key:2,class:"overflow-y-auto px-10 pb-10"},Zp={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},Yp={class:"mt-3"},Xp={class:"flex items-center justify-between"},em={key:0},tm={class:"text-sm text-ink-gray-6 flex gap-1 cursor-default"},lm={class:"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5"},sm={key:0,class:"mt-5"},nm={key:0,class:"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-gray-300 rounded-md p-3 py-4"},am={class:"mt-3.5 flex gap-5 flex-col md:flex-row"},om={class:"w-full space-y-1.5"},im={class:"w-full space-y-1.5"},rm={class:"mt-5"},um={class:"mt-5"},dm={class:"mt-5"},cm=N({__name:"SlaPolicyView",setup(a){var S,k;const{updateOnboardingStep:e}=gt("helpdesk"),l=V({show:!1,title:"",message:"",onConfirm:()=>{}}),o=V(!1),n=V(null),i=V(!0),u=V(!1),m=je("slaPolicyList"),p=`${window.location.origin}/app/hd-service-level-agreement/${(S=he.value.data)==null?void 0:S.name}`,f=fe({url:"helpdesk.api.sla.get_sla",params:{docname:(k=he.value.data)==null?void 0:k.name},onSuccess(L){var R,T,U,B;const b=((R=L.sla_fulfilled_on)==null?void 0:R.map(Z=>({...Z,sla_behavior:"Fulfilled"})))||[],x=((T=L.pause_sla_on)==null?void 0:T.map(Z=>({...Z,sla_behavior:"Paused"})))||[],E=JSON.parse(L.condition_json||"[]"),C={...L,statuses:[...x,...b],loading:!1,condition_json:E};j.value=C,j.value.apply_sla_for_resolution=!0,n.value=JSON.stringify(C);const F=((U=j.value.condition)==null?void 0:U.length)>0,M=((B=j.value.condition_json)==null?void 0:B.length)>0;F&&!M?(i.value=!1,u.value=!0):(i.value=!0,u.value=!1)}});he.value.data&&he.value.fetchData?(j.value.loading=!0,f.submit()):Ve.value=!0;const g=()=>{const L={show:!0,title:"Unsaved changes",message:"Are you sure you want to go back? Unsaved changes will be lost.",onConfirm:g};if(o.value&&!l.value.show){l.value=L;return}if(!he.value.data&&!l.value.show){l.value=L;return}setTimeout(()=>{he.value={screen:"list",data:null,fetchData:!0}},250),l.value.show=!1},h=()=>{const L=ot(void 0,!i.value);if(Object.values(L).some(b=>b)){W.error("Invalid fields, check if all are filled in and values are correct.");return}if(he.value.data){if(u.value&&i.value){l.value={show:!0,title:"Confirm overwrite",message:"Your old conditions will be overwritten. Are you sure you want to save?",onConfirm:()=>{_(),l.value.show=!1}};return}_()}else v()},v=()=>{const L=j.value.statuses.filter(x=>x.sla_behavior==="Fulfilled"),b=j.value.statuses.filter(x=>x.sla_behavior==="Paused");m.insert.submit({...j.value,sla_fulfilled_on:L,pause_sla_on:b,condition:Ct({conditions:j.value.condition_json,fieldPrefix:"doc"}),condition_json:JSON.stringify(j.value.condition_json)},{onSuccess(x){W.success("SLA policy created"),he.value.data=x,he.value.screen="view",f.submit({docname:x.name}),e("setup_sla",!0)}})},_=()=>{const L=j.value.statuses.filter(x=>x.sla_behavior==="Fulfilled"),b=j.value.statuses.filter(x=>x.sla_behavior==="Paused");m.setValue.submit({...j.value,name:he.value.data.name,sla_fulfilled_on:L,pause_sla_on:b,condition:i.value?Ct({conditions:j.value.condition_json,fieldPrefix:"doc"}):j.value.condition,condition_json:i.value?JSON.stringify(j.value.condition_json):null},{onSuccess(){f.submit(),W.success("SLA policy updated"),m.reload()}})},y=()=>{if(j.value.default_sla){W.error("SLA set as default cannot be disabled");return}j.value.enabled=!j.value.enabled},w=()=>{j.value.default_sla=!j.value.default_sla,j.value.default_sla&&(j.value.enabled=!0)};me(j,L=>{n.value&&(o.value=JSON.stringify(L)!=n.value,o.value?Ve.value=!0:Ve.value=!1)},{deep:!0});const I=L=>{o.value&&(L.preventDefault(),L.returnValue=!0)};return Ce(()=>{addEventListener("beforeunload",I)}),Je(()=>{removeEventListener("beforeunload",I),Fs(),Ve.value=!1}),(L,b)=>{const x=J("FormControl"),E=J("FeatherIcon"),C=ns;return r(),c(q,null,[t(j).loading?(r(),c("div",zp,[d(t(vt),{class:"w-4"})])):A("",!0),t(j).loading?A("",!0):(r(),c("div",Qp,[s("div",Jp,[s("div",null,[s("div",Wp,[d(t(Q),{variant:"ghost","icon-left":"chevron-left",label:t(j).service_level||"New SLA Policy",size:"md",onClick:b[0]||(b[0]=F=>g()),class:"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-ink-gray-7 text-xl hover:opacity-70 !pr-0"},null,8,["label"]),o.value?(r(),D(t(sl),{key:0,variant:"subtle",theme:"orange",size:"sm",label:"Unsaved changes"})):A("",!0)])]),s("div",Gp,[s("div",{class:"flex items-center justify-between gap-2 cursor-pointer",onClick:y},[d(t(tt),{size:"sm","model-value":t(j).enabled},null,8,["model-value"]),b[11]||(b[11]=s("span",{class:"text-sm text-ink-gray-7 font-medium"},"Enabled",-1))]),d(t(Q),{label:"Save",theme:"gray",variant:"solid",onClick:b[1]||(b[1]=F=>h()),disabled:!!(!o.value&&t(he).data),loading:t(j).loading||t(m).setValue.loading},null,8,["disabled","loading"])])])])),t(j).loading?A("",!0):(r(),c("div",Kp,[s("div",Zp,[s("div",null,[d(x,{type:"text",size:"sm",variant:"subtle",placeholder:"Name",label:"Name",modelValue:t(j).service_level,"onUpdate:modelValue":b[2]||(b[2]=F=>t(j).service_level=F),required:"",onChange:b[3]||(b[3]=F=>t(ot)("service_level")),disabled:!!t(he).data},null,8,["modelValue","disabled"]),d(t(Me),{message:t(ee).service_level,class:"mt-2"},null,8,["message"])]),d(x,{type:"textarea",size:"sm",variant:"subtle",placeholder:"Description",label:"Description",modelValue:t(j).description,"onUpdate:modelValue":b[4]||(b[4]=F=>t(j).description=F)},null,8,["modelValue"])]),b[19]||(b[19]=s("hr",{class:"my-8"},null,-1)),s("div",null,[b[15]||(b[15]=s("div",{class:"flex flex-col gap-1"},[s("span",{class:"text-lg font-semibold text-ink-gray-8"},"Assignment conditions"),s("span",{class:"text-p-sm text-ink-gray-6"}," Choose which tickets are affected by this policy. ")],-1)),s("div",Yp,[s("div",Xp,[d(t(Xe),{label:"Set as default SLA","model-value":t(j).default_sla,"onUpdate:modelValue":w,class:"text-ink-gray-6 text-base font-medium"},null,8,["model-value"]),u.value&&t(he).data&&!t(j).default_sla?(r(),c("div",em,[d(t(De),{trigger:"hover",hoverDelay:"0.25",placement:"top-end"},{target:$(()=>[s("div",tm,[b[12]||(b[12]=le(" Old Conditions ",-1)),d(E,{name:"info",class:"size-4"})])]),"body-main":$(()=>[s("div",lm,[s("code",null,O(t(j).condition),1)])]),_:1})])):A("",!0)]),t(j).default_sla?A("",!0):(r(),c("div",sm,[i.value?A("",!0):(r(),c("div",nm,[s("span",{class:"text-p-sm"},[b[13]||(b[13]=le(" Conditions for this SLA were created from ",-1)),s("a",{href:p,target:"_blank",class:"underline"},"desk"),b[14]||(b[14]=le(" which are not compatible with this UI, you will need to recreate the conditions here if you want to manage and add new conditions from this UI. ",-1))]),d(t(Q),{label:"I understand, add conditions",variant:"subtle",theme:"gray",onClick:b[5]||(b[5]=F=>i.value=!0)})])),i.value?(r(),D(vc,{key:1,conditions:t(j).condition_json},null,8,["conditions"])):A("",!0)]))])]),b[20]||(b[20]=s("hr",{class:"my-8"},null,-1)),s("div",null,[b[16]||(b[16]=s("div",{class:"flex flex-col gap-1"},[s("span",{class:"text-lg font-semibold text-ink-gray-8"},"Valid from"),s("span",{class:"text-p-sm text-ink-gray-6"}," Choose how long this SLA policy will be active. ")],-1)),s("div",am,[s("div",om,[d(t(We),{label:"From date",for:"from_date"}),d(t(St),{modelValue:t(j).start_date,"onUpdate:modelValue":b[6]||(b[6]=F=>t(j).start_date=F),variant:"subtle",placeholder:"11/01/2025",class:"w-full",id:"from_date",onChange:b[7]||(b[7]=F=>t(ot)("start_date")),formatter:F=>t(oe)(F)},{prefix:$(()=>[d(C,{class:"size-4"})]),_:1},8,["modelValue","formatter"]),d(t(Me),{message:t(ee).start_date},null,8,["message"])]),s("div",im,[d(t(We),{label:"To date",for:"to_date"}),d(t(St),{modelValue:t(j).end_date,"onUpdate:modelValue":b[8]||(b[8]=F=>t(j).end_date=F),variant:"subtle",placeholder:"25/12/2025",class:"w-full",id:"to_date",onChange:b[9]||(b[9]=F=>t(ot)("end_date")),formatter:F=>t(oe)(F)},{prefix:$(()=>[d(C,{class:"size-4"})]),_:1},8,["modelValue","formatter"]),d(t(Me),{message:t(ee).end_date},null,8,["message"])])])]),b[21]||(b[21]=s("hr",{class:"my-8"},null,-1)),s("div",null,[b[17]||(b[17]=s("div",{class:"flex flex-col gap-1"},[s("span",{class:"text-lg font-semibold text-ink-gray-8"},"Response and resolution"),s("span",{class:"text-p-sm text-ink-gray-6"}," Add time targets around support milestones like first reply and resolution times ")],-1)),s("div",rm,[s("div",um,[d(Dp)])])]),b[22]||(b[22]=s("hr",{class:"my-8"},null,-1)),s("div",null,[b[18]||(b[18]=s("div",{class:"flex flex-col gap-1"},[s("span",{class:"text-lg font-semibold text-ink-gray-8"},"Status details"),s("span",{class:"text-p-sm text-ink-gray-6"}," The SLA status updates with ticket progressfulfilled when conditions are met, paused when awaiting external action. ")],-1)),s("div",dm,[d(Hp,{statusList:t(j).statuses},null,8,["statusList"])])]),b[23]||(b[23]=s("hr",{class:"my-8"},null,-1)),d(zc)])),d(al,{modelValue:l.value.show,"onUpdate:modelValue":b[10]||(b[10]=F=>l.value.show=F),title:l.value.title,message:l.value.message,onConfirm:l.value.onConfirm,onCancel:()=>l.value.show=!1},null,8,["modelValue","title","message","onConfirm","onCancel"])],64)}}});const pm=Se(cm,[["__scopeId","data-v-48899fc9"]]),mm={class:"pb-8"},fm=N({__name:"Sla",setup(a){const e=ut({doctype:"HD Service Level Agreement",fields:["name","default_sla","enabled","description"],orderBy:"creation desc",start:0,pageLength:999,auto:!0});return $t("slaPolicyList",e),(l,o)=>(r(),c("div",mm,[t(he).screen=="list"?(r(),D(Qd,{key:0})):t(he).screen=="view"?(r(),D(pm,{key:1})):A("",!0)]))}}),vm={class:"flex items-center cursor-pointer hover:bg-gray-50 rounded"},gm={class:"text-base text-ink-gray-7 font-medium"},ym={key:0,class:"text-sm text-ink-gray-5 mt-1 whitespace-nowrap overflow-ellipsis overflow-hidden"},hm={class:"flex justify-between items-center pr-2"},_m={class:"flex flex-col gap-4"},bm={class:"flex gap-2 justify-end"},xm=N({__name:"HolidayListItem",props:{data:{type:Object,required:!0}},setup(a){const e=a,l=je("holidayList"),o=V({show:!1,name:""}),n=V(!1),i=[{label:"Duplicate",onClick:()=>{o.value.show=!0,o.value.name=e.data.name+" (Copy)"},icon:"copy"},...lt({onConfirmDelete:()=>m(),isConfirmingDelete:n})],u=()=>{fe({url:"helpdesk.api.holiday_list.duplicate_holiday_list",params:{docname:e.data.name,new_name:o.value.name},onSuccess:p=>{l.reload(),W.success("Holiday list duplicated"),o.value={show:!1,name:""},setTimeout(()=>{xe.value={screen:"view",data:p}},250)},auto:!0})},m=()=>{if(!n.value){n.value=!0;return}l.delete.submit(e.data.name,{onSuccess:()=>{W.success("Holiday list deleted")}})};return(p,f)=>{const g=st,h=J("FormControl"),v=J("Dialog");return r(),c(q,null,[s("div",vm,[s("div",{class:"w-full py-3 pl-2",onClick:f[0]||(f[0]=_=>xe.value={screen:"view",data:a.data})},[s("div",gm,O(a.data.name),1),a.data.description&&a.data.description.length>0?(r(),c("div",ym,O(a.data.description),1)):A("",!0)]),s("div",hm,[s("div",null,[d(g,{placement:"right",options:i},{default:$(()=>[d(t(Q),{icon:"more-horizontal",variant:"ghost",onClick:f[1]||(f[1]=_=>n.value=!1)})]),_:1})])])]),d(v,{options:{title:"Duplicate Holiday List"},modelValue:o.value.show,"onUpdate:modelValue":f[5]||(f[5]=_=>o.value.show=_)},{"body-content":$(()=>[s("div",_m,[d(h,{label:"New Holiday List Name",type:"text",modelValue:o.value.name,"onUpdate:modelValue":f[2]||(f[2]=_=>o.value.name=_)},null,8,["modelValue"])])]),actions:$(()=>[s("div",bm,[d(t(Q),{variant:"subtle",label:"Close",onClick:f[3]||(f[3]=_=>o.value.show=!1)}),d(t(Q),{variant:"solid",label:"Duplicate",onClick:f[4]||(f[4]=_=>u())})])]),_:1},8,["modelValue"])],64)}}}),wm={key:0,class:"flex items-center justify-center mt-12"},km={key:1},Cm={key:0,class:"flex items-center justify-center rounded-md border border-gray-200 p-4"},$m={key:1},Am=N({__name:"HolidayList",setup(a){const e=je("holidayList");return(l,o)=>{var n;return t(e).list.loading&&!t(e).list.data?(r(),c("div",wm,[d(t(vt),{class:"w-4"})])):(r(),c("div",km,[((n=t(e).list.data)==null?void 0:n.length)===0?(r(),c("div",Cm,[...o[0]||(o[0]=[s("div",{class:"text-sm text-ink-gray-7"},"No items in the list",-1)])])):(r(),c("div",$m,[o[2]||(o[2]=s("div",{class:"flex text-sm text-gray-600"},[s("div",{class:"ml-2"},"Schedule name")],-1)),o[3]||(o[3]=s("hr",{class:"mx-2 mt-2"},null,-1)),s("div",null,[(r(!0),c(q,null,G(t(e).list.data,i=>(r(),c("div",{key:i.name},[d(xm,{data:i},null,8,["data"]),o[1]||(o[1]=s("hr",{class:"mx-2"},null,-1))]))),128))])]))]))}}}),Sm={class:"px-10 py-8"},Vm={class:"overflow-y-auto pb-8 px-10"},Em=N({__name:"Holidays",setup(a){const e=()=>{Os(),xe.value={screen:"view",data:null}};return(l,o)=>{const n=J("Button");return r(),c(q,null,[s("div",Sm,[d(ct,{title:"Business Holidays",description:"Set your teams working days, hours, and holidays using a template or custom schedule."},{actions:$(()=>[d(n,{label:"New",theme:"gray",variant:"solid",onClick:o[0]||(o[0]=i=>e()),"icon-left":"plus"})]),_:1})]),s("div",Vm,[d(Am)])],64)}}}),Dm={class:"flex flex-col gap-4 mt-4"},Im={class:"flex flex-col gap-1.5"},Lm={class:"flex flex-col gap-1.5"},Bm={class:"flex justify-end gap-2"},$l=N({__name:"AddHolidayModal",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(a){const e=Re(a,"modelValue"),l=V({holiday_date:"",description:""}),o=()=>{e.value.holiday_date=null,e.value.description="",l.value={holiday_date:"",description:""}},n=()=>{var p;if(((p=e.value.description)==null?void 0:p.trim())===""&&(l.value.description="Please enter a description"),e.value.holiday_date||(l.value.holiday_date="Please enter a valid date"),l.value.holiday_date||l.value.description)return;const i=ie(e.value.holiday_date).startOf("day"),u=ie(z.value.from_date).startOf("day"),m=ie(z.value.to_date).startOf("day");if(i.isBefore(u)||i.isAfter(m)){W.error(`Holiday date must be between ${oe(z.value.from_date)} and ${oe(z.value.to_date)}`);return}if(e.value.editing){const f=z.value.holidays.find(h=>oe(h.holiday_date)===oe(e.value.holiday_date));if(f&&oe(f.holiday_date)!==oe(e.value.editing.holiday_date)){W.error("Holiday already exists");return}const g=z.value.holidays.indexOf(e.value.editing);z.value.holidays.splice(g,1,{...e.value,weekly_off:0})}else{if(z.value.holidays.findIndex(g=>oe(g.holiday_date)===oe(e.value.holiday_date))!==-1){W.error("Holiday already exists");return}z.value.holidays.push({...e.value,weekly_off:0})}e.value={show:!1,holiday_date:null,description:"",editing:null}};return(i,u)=>(r(),D(t(Le),{modelValue:e.value.show,"onUpdate:modelValue":u[5]||(u[5]=m=>e.value.show=m),options:{size:"sm",title:e.value.editing?"Edit Holiday":"Add Holiday"},onAfterLeave:o},{"body-content":$(()=>[s("div",Dm,[s("div",Im,[d(t(We),{label:"Date",required:""}),d(t(St),{value:t(ie)(e.value.holiday_date).format("MM-DD-YYYY"),"onUpdate:modelValue":u[0]||(u[0]=m=>e.value.holiday_date=m),formatter:m=>t(oe)(m),variant:"subtle",placeholder:"Date",class:"w-full",id:"holiday_date",required:"",onChange:u[1]||(u[1]=m=>l.value.holiday_date="")},null,8,["value","formatter"]),d(t(Me),{message:l.value.holiday_date},null,8,["message"])]),s("div",Lm,[d(t(ge),{type:"textarea",size:"sm",variant:"subtle",placeholder:"National holiday, etc.",label:"Description",modelValue:e.value.description,"onUpdate:modelValue":u[2]||(u[2]=m=>e.value.description=m),required:"",onChange:u[3]||(u[3]=m=>l.value.description="")},null,8,["modelValue"]),d(t(Me),{message:l.value.description},null,8,["message"])])])]),actions:$(()=>[s("div",Bm,[d(t(Q),{variant:"subtle",theme:"gray",label:"Cancel",onClick:u[4]||(u[4]=m=>e.value.show=!1)}),d(t(Q),{variant:"solid","icon-left":"plus",label:"Add Holiday",onClick:n})])]),_:1},8,["modelValue","options"]))}}),Fm={class:"rounded-md border px-2 border-gray-300 text-sm"},Om={class:"grid p-2 px-4 items-center gap-2",style:{gridTemplateColumns:"1fr 4fr 22px"}},Mm={class:"grid gap-2 py-3.5 px-4 items-center",style:{gridTemplateColumns:"1fr 4fr 22px"}},jm=["onUpdate:modelValue"],Rm={key:1},qm={class:"flex justify-end"},Tm={key:0},Nm={key:0,class:"text-center p-4 text-gray-600"},Um=N({__name:"HolidaysTableView",setup(a){const e=V(!1),l=p=>[{label:"Edit",onClick:()=>u(p),icon:"edit"},...lt({onConfirmDelete:()=>m(p),isConfirmingDelete:e})],o=V({show:!1,holiday_date:null,description:"",editing:null}),n=P(()=>z.value.holidays.filter(p=>p.weekly_off==0)),i=[{label:"Date",key:"holiday_date"},{label:"Description",key:"description"}],u=p=>{o.value={show:!0,holiday_date:p.holiday_date,description:p.description,editing:p}},m=p=>{if(!e.value){e.value=!0;return}const f=z.value.holidays.findIndex(g=>{const h=oe(g.holiday_date),v=oe(p==null?void 0:p.holiday_date);return h===v});z.value.holidays.splice(f,1),e.value=!1};return(p,f)=>{var v;const g=J("Button"),h=st;return r(),c(q,null,[s("div",Fm,[s("div",Om,[(r(),c(q,null,G(i,_=>s("div",{key:_.key,class:"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis"},O(_.label),1)),64))]),f[2]||(f[2]=s("hr",null,null,-1)),(r(!0),c(q,null,G(n.value,(_,y)=>(r(),c("div",{key:_.name},[s("div",Mm,[(r(),c(q,null,G(i,w=>s("div",{key:w.key,class:"w-full overflow-hidden whitespace-nowrap text-ellipsis"},[w.key==="description"?Ee((r(),c("input",{key:0,type:"text",placeholder:"Description","onUpdate:modelValue":I=>_[w.key]=I,class:"!bg-white w-full text-base px-0 focus:!ring-0 border-none hover:bg-white outline-none no-underline focus:!outline-none"},null,8,jm)),[[In,_[w.key]]]):(r(),c("div",Rm,O(t(ie)(_[w.key]).format("DD MMM YYYY")),1))])),64)),s("div",qm,[d(h,{placement:"right",options:l(_)},{default:$(()=>[d(g,{icon:"more-horizontal",variant:"ghost",onClick:f[0]||(f[0]=w=>e.value=!1)})]),_:2},1032,["options"])])]),y!==n.value.length-1?(r(),c("hr",Tm)):A("",!0)]))),128)),((v=n.value)==null?void 0:v.length)===0?(r(),c("div",Nm," No items in the list ")):A("",!0)]),d($l,{modelValue:o.value,"onUpdate:modelValue":f[1]||(f[1]=_=>o.value=_)},null,8,["modelValue"])],64)}}});var Ms={exports:{}};(function(a,e){(function(l,o){a.exports=o()})(Wl,function(){return function(l,o){o.prototype.isSameOrBefore=function(n,i){return this.isSame(n,i)||this.isBefore(n,i)}}})})(Ms);var Pm=Ms.exports;const Hm=Gl(Pm);var js={exports:{}};(function(a,e){(function(l,o){a.exports=o()})(Wl,function(){return function(l,o){o.prototype.weekday=function(n){var i=this.$locale().weekStart||0,u=this.$W,m=(u<i?u+7:u)-i;return this.$utils().u(n)?m:this.subtract(m,"day").add(n,"day")}}})})(js);var zm=js.exports;const Qm=Gl(zm),Jm=a=>{const e=[];if(a.all)e.push("week");else{if(a.first&&e.push("first"),a.second&&e.push("second"),a.third&&e.push("third"),a.fourth&&e.push("fourth"),a.fifth&&e.push("fifth"),e.length===0)return"";if(e.length>1){const l=e.pop();e[e.length-1]=`${e[e.length-1]} and ${l}`}return e[0]=e[0].charAt(0)+e[0].slice(1),`Every ${e.join(", ")} week`}return e[0]?`Every ${e[0]}`:""},Wm={class:"rounded-md border p-1 border-gray-300 text-sm"},Gm={key:0,class:"grid p-2 items-center",style:{gridTemplateColumns:"1fr 4fr 22px"}},Km={key:1,class:"my-0.5"},Zm={class:"grid gap-2 px-2 py-2 items-center",style:{gridTemplateColumns:"1fr 4fr 22px"}},Ym={key:0},Xm={key:1},ef={class:"flex justify-end"},tf={key:0,class:"my-0.5"},lf={key:2,class:"text-center p-4 text-gray-600"},sf={key:0},nf={key:1,class:"flex flex-col gap-4"},af={class:"flex flex-col gap-1.5"},of={class:"flex flex-col gap-1.5"},rf={class:"grid grid-cols-2 gap-2 mt-2"},uf=N({__name:"RecurringHolidaysList",props:{holidays:{type:Array,default:()=>[],required:!0},holidayData:{type:Object,default:()=>{},required:!0}},setup(a){ie.extend(Qm),ie.extend(Hm);const e=V(!1),l=V({day:null,repetition:{all:!1,first:!1,second:!1,third:!1,fourth:!1,fifth:!1},isEditing:!1,editIndex:-1}),o=a,n=[{label:"Day",key:"day"},{label:"Repetition",key:"repetition"}],i=V([{label:"Monday",value:"Monday"},{label:"Tuesday",value:"Tuesday"},{label:"Wednesday",value:"Wednesday"},{label:"Thursday",value:"Thursday"},{label:"Friday",value:"Friday"},{label:"Saturday",value:"Saturday"},{label:"Sunday",value:"Sunday"}]),u=_=>[{label:"Edit",onClick:()=>g(_),icon:"edit"},...lt({onConfirmDelete:()=>v(_),isConfirmingDelete:p})],m=P(()=>{const _=new Set(o.holidays.filter((y,w)=>!l.value.isEditing||w!==l.value.editIndex).map(y=>y.day));return l.value.isEditing&&l.value.day&&_.delete(l.value.day),i.value.filter(y=>!_.has(y.value))}),p=V(!1),f=()=>{l.value={day:null,repetition:{all:!1,first:!1,second:!1,third:!1,fourth:!1,fifth:!1},isEditing:!1,editIndex:-1},e.value=!0},g=_=>{const y=o.holidays.findIndex(w=>w.day===_.day);l.value={...JSON.parse(JSON.stringify(_)),isEditing:!0,editIndex:y},e.value=!0},h=()=>{if(!l.value.day){W.error("Please select a day of the week");return}const{all:_,first:y,second:w,third:I,fourth:S,fifth:k}=l.value.repetition;if(!_&&!y&&!w&&!I&&!S&&!k){W.error("Please select at least one repetition option");return}const L={...l.value};if(L.isEditing)if(L.editIndex!==void 0&&L.editIndex>=0)o.holidays[L.editIndex]={...L},Zt();else{W.error("Error: Unable to find the holiday to update");return}else{if(o.holidays.some(x=>x.day===L.day&&JSON.stringify(x.repetition)===JSON.stringify(L.repetition))){W.error("Holiday with the same day and repetition already exists");return}o.holidays.push({...L,isEditing:!1}),Zt()}e.value=!1},v=_=>{if(!p.value){p.value=!0;return}const y=o.holidays.findIndex(w=>w.day===_.day);o.holidays.splice(y,1),Zt(),e.value=!1,p.value=!1};return(_,y)=>{var k,L,b;const w=J("Button"),I=st,S=J("Dialog");return r(),c(q,null,[s("div",Wm,[((k=a.holidays)==null?void 0:k.length)!==0?(r(),c("div",Gm,[(r(),c(q,null,G(n,x=>s("div",{key:x.key,class:"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis"},O(x.label),1)),64))])):A("",!0),((L=a.holidays)==null?void 0:L.length)!==0?(r(),c("hr",Km)):A("",!0),(r(!0),c(q,null,G(a.holidays,(x,E)=>(r(),c("div",{key:x.day},[s("div",Zm,[(r(),c(q,null,G(n,C=>s("div",{key:C.key,class:"w-full py-2 overflow-hidden whitespace-nowrap text-ellipsis"},[C.key==="repetition"?(r(),c("div",Ym,O(t(Jm)(x[C.key])),1)):(r(),c("div",Xm,O(x[C.key]),1))])),64)),s("div",ef,[d(I,{placement:"right",options:u(x)},{default:$(()=>[d(w,{icon:"more-horizontal",variant:"ghost",onClick:y[0]||(y[0]=C=>p.value=!1)})]),_:2},1032,["options"])])]),E!==a.holidays.length-1?(r(),c("hr",tf)):A("",!0)]))),128)),((b=a.holidays)==null?void 0:b.length)===0?(r(),c("div",lf," No items in the list ")):A("",!0)]),d(w,{variant:"subtle",onClick:f,class:"mt-2.5",label:"Add Recurring Holiday","icon-left":"plus"}),d(S,{modelValue:e.value,"onUpdate:modelValue":y[8]||(y[8]=x=>e.value=x),options:{size:"md",title:l.value.isEditing?"Edit Recurring Holiday":"Add Recurring Holiday"}},{"body-content":$(()=>[!o.holidayData.from_date||!o.holidayData.to_date?(r(),c("div",sf,[...y[9]||(y[9]=[s("div",{class:"text-center p-4 text-gray-600"}," Please select start and end date first ",-1)])])):(r(),c("div",nf,[s("div",af,[d(t(We),{label:"Day",required:""}),d(t(At),{options:m.value,modelValue:l.value.day,"onUpdate:modelValue":y[1]||(y[1]=x=>l.value.day=x),disabled:m.value.length===0},null,8,["options","modelValue","disabled"])]),s("div",of,[d(t(We),{label:"Repetition",required:""}),s("div",rf,[d(t(Xe),{modelValue:l.value.repetition.all,"onUpdate:modelValue":y[2]||(y[2]=x=>l.value.repetition.all=x),label:"Every week",disabled:l.value.repetition.first||l.value.repetition.second||l.value.repetition.third||l.value.repetition.fourth},null,8,["modelValue","disabled"]),d(t(Xe),{modelValue:l.value.repetition.first,"onUpdate:modelValue":y[3]||(y[3]=x=>l.value.repetition.first=x),label:"Every first week",disabled:l.value.repetition.all},null,8,["modelValue","disabled"]),d(t(Xe),{modelValue:l.value.repetition.second,"onUpdate:modelValue":y[4]||(y[4]=x=>l.value.repetition.second=x),label:"Every second week",disabled:l.value.repetition.all},null,8,["modelValue","disabled"]),d(t(Xe),{modelValue:l.value.repetition.third,"onUpdate:modelValue":y[5]||(y[5]=x=>l.value.repetition.third=x),label:"Every third week",disabled:l.value.repetition.all},null,8,["modelValue","disabled"]),d(t(Xe),{modelValue:l.value.repetition.fourth,"onUpdate:modelValue":y[6]||(y[6]=x=>l.value.repetition.fourth=x),label:"Every fourth week",disabled:l.value.repetition.all},null,8,["modelValue","disabled"]),d(t(Xe),{modelValue:l.value.repetition.fifth,"onUpdate:modelValue":y[7]||(y[7]=x=>l.value.repetition.fifth=x),label:"Every fifth week",disabled:l.value.repetition.all},null,8,["modelValue","disabled"])])])]))]),actions:$(()=>[o.holidayData.from_date&&o.holidayData.to_date?(r(),D(w,{key:0,variant:"solid",onClick:h,class:"w-full",label:l.value.isEditing?"Update Holiday":"Add Holiday","icon-left":l.value.isEditing?"edit-2":"plus"},null,8,["label","icon-left"])):A("",!0)]),_:1},8,["modelValue","options"])],64)}}}),df={class:"w-max mx-auto"},cf={class:"text-base font-medium mb-2 text-gray-800 ml-2.5"},pf={class:"rounded-md text-sm"},mf={class:"flex items-center text-xs uppercase"},ff=["onMouseover","onMouseleave","onClick"],vf=["onMouseover","onMouseleave"],gf={class:"grow"},yf={class:"text-sm font-semibold"},hf={class:"text-xs mt-1"},_f=["onMouseover","onMouseleave"],bf=["onClick"],ql=N({__name:"HLCalender",props:{year:{type:Number,required:!0},month:{type:Number,required:!0},holidays:{type:Array,required:!0}},setup(a){const e=V({show:!1,holiday_date:null,description:"",editing:null}),{currentYear:l,currentMonth:o,today:n,datesAsWeeks:i,formattedMonth:u}=ma(),m=i,p=V(!1),f=V({}),g=a,h=V(oe(n.value)),v=(x,E)=>{f.value[x]&&clearTimeout(f.value[x]),f.value[x]=setTimeout(()=>{E()},350)},_=(x,E)=>{f.value[x]&&clearTimeout(f.value[x]),f.value[x]=setTimeout(()=>{E()},350)},y=x=>{e.value={holiday_date:x,description:"",show:!0,editing:null}},w=x=>{if(!z.value.from_date||!z.value.to_date)return!1;const E=ie(x).startOf("day"),C=ie(z.value.from_date).startOf("day"),F=ie(z.value.to_date).endOf("day");return(E.isAfter(C)||E.isSame(C,"day"))&&(E.isBefore(F)||E.isSame(F,"day"))},I=x=>{var C;if(!((C=g.holidays)!=null&&C.length))return!1;const E=ie(x).startOf("day");return g.holidays.some(F=>ie(F.holiday_date).startOf("day").isSame(E))},S=x=>{var C;if(!((C=g.holidays)!=null&&C.length))return!1;const E=ie(x).startOf("day");return g.holidays.some(F=>ie(F.holiday_date).startOf("day").isSame(E)&&F.weekly_off==1)},k=x=>{const E=g.holidays.find(C=>{const F=oe(C.holiday_date),M=oe(x);return F===M});e.value={show:!0,holiday_date:E.holiday_date,description:E.description,editing:E}},L=(x,E,C)=>{if(x.stopPropagation(),x.preventDefault(),!p.value){p.value=!0;return}const F=g.holidays.find(R=>{const T=oe(R.holiday_date),U=oe(E);return T===U}),M=g.holidays.findIndex(R=>{const T=oe(R.holiday_date),U=oe(F.holiday_date);return T===U});g.holidays.splice(M,1),e.value={show:!1,holiday_date:null,description:"",editing:null},p.value=!1,C()},b=x=>{const E=g.holidays.find(F=>{const M=oe(F.holiday_date),R=oe(x);return M===R});return E!=null&&E.weekly_off?`${pl((E==null?void 0:E.description)||"")}: Recurring holiday`:pl((E==null?void 0:E.description)||"")};return me(()=>[g.year,g.month],([x,E])=>{l.value=x,o.value=E},{immediate:!0}),(x,E)=>{const C=J("Button");return r(),c(q,null,[s("div",df,[s("div",cf,O(t(u)),1),s("div",pf,[s("div",mf,[(r(),c(q,null,G(["s","m","t","w","t","f","s"],(F,M)=>s("div",{class:"flex size-7.5 items-center justify-center text-center text-gray-600",key:M},O(F),1)),64))]),(r(!0),c(q,null,G(t(m),(F,M)=>(r(),c("div",{class:"flex items-center",key:M},[(r(!0),c(q,null,G(F,R=>(r(),c("div",{key:t(oe)(R)},[I(R)?(r(),D(t(De),{key:0},{target:$(({open:T,close:U})=>[s("div",{class:se(["flex size-7 cursor-pointer text-orange-700 bg-yellow-100 items-center justify-center rounded hover:bg-yellow-100 select-none m-[1px]",{"!text-ink-gray-4 !bg-gray-100":S(R)}]),onMouseover:B=>v(t(oe)(R),T),onMouseleave:B=>_(t(oe)(R),U),onClick:()=>{S(R)||(U(),k(R))}},O(R.getDate()),43,ff)]),"body-main":$(({close:T,open:U})=>[s("div",{class:"p-3 flex gap-2.5 text-ink-gray-9 w-80 border border-gray-100 rounded-md",onMouseover:B=>v(t(oe)(R),U),onMouseleave:B=>_(t(oe)(R),T)},[E[2]||(E[2]=s("div",{class:"w-[5%]"},[s("div",{class:"size-3.5 bg-orange-500 rounded-sm mt-1"})],-1)),s("div",gf,[s("div",yf,O(b(R)),1),s("div",hf,O(R.toLocaleDateString()),1)]),S(R)?A("",!0):(r(),D(t(De),{key:0,onClose:E[0]||(E[0]=B=>p.value=!1)},{target:$(({open:B,close:Z})=>[d(C,{icon:"more-horizontal",variant:"ghost",onClick:B,onMouseleave:X=>_(t(oe)(R)+"dropdown",Z)},null,8,["onClick","onMouseleave"])]),"body-main":$(({close:B,open:Z})=>[s("div",{class:"p-2 flex flex-col gap-1 w-40 text-ink-gray-9 border border-gray-100 rounded-md",onMouseover:X=>{v(t(oe)(R),U),v(t(oe)(R)+"dropdown",Z)},onMouseleave:X=>{_(t(oe)(R),T),_(t(oe)(R)+"dropdown",B)}},[d(C,{class:"w-full flex !justify-start","icon-left":"edit",variant:"ghost",label:"Edit",onClick:()=>{T(),B(),k(R)}},null,8,["onClick"]),d(C,{class:"w-full flex !justify-start","icon-left":"trash-2",variant:"ghost",label:p.value?"Confirm Delete":"Delete",theme:p.value?"red":"gray",onClick:X=>{L(X,R,()=>{T(),B()})}},null,8,["label","theme","onClick"])],40,_f)]),_:2},1024))],40,vf)]),_:2},1024)):(r(),c("div",{key:1,class:se(["flex size-7 items-center justify-center rounded m-[1px] select-none",{"cursor-pointer hover:bg-surface-gray-2":w(R),"text-ink-gray-3":R.getMonth()!==t(o)-1||!w(R),"bg-black text-ink-white hover:!bg-black/80 hover:text-ink-white":t(oe)(R)===h.value&&w(R),"opacity-50 cursor-not-allowed":!w(R)}]),onClick:T=>w(R)?y(R):null},O(R.getDate()),11,bf))]))),128))]))),128))])]),d($l,{modelValue:e.value,"onUpdate:modelValue":E[1]||(E[1]=F=>e.value=F)},null,8,["modelValue"])],64)}}}),xf={class:"p-6.5 px-5 rounded-xl border border-gray-300"},wf={class:"mb-6.5 flex justify-between items-center"},kf={class:"ml-1"},Cf={class:"w-24"},$f={ref:"yearsContainer",class:"max-h-60 overflow-y-auto py-1"},Af=["onClick"],Sf={key:1,class:"flex items-center gap-2 px-2 font-semibold text-xl select-none"},Vf={class:"flex gap-2 items-center"},Ef={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5"},Df={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 justify-between gap-5"},If={class:"flex gap-2 items-center w-full justify-center mt-8"},Lf=N({__name:"HolidaysCalendarView",setup(a){const e=V("first-half"),l=V([1,2,3,4,5,6,7,8,9,10,11,12]),o=V(ie().year()),n=V(ie(z.value.from_date||ie()).year()),i=V(ie(z.value.to_date||ie()).year()),u=P(()=>{const f=[];for(let g=n.value;g<=i.value;g++)f.push(g);return f}),m=(f,g)=>{o.value=g,g===ie(z.value.from_date).year()?ie(z.value.from_date).month()>=6&&(e.value="second-half"):g===ie(z.value.to_date).year()?ie(z.value.to_date).month()>=6&&(e.value="first-half"):e.value="first-half",f()},p=()=>{const f=ie();o.value=f.year(),e.value=f.month()>=6?"second-half":"first-half"};return me(()=>[z.value.from_date,z.value.to_date],([f,g])=>{f=ie(f),g=ie(g),n.value=f.year(),i.value=g.year(),o.value=f.year(),e.value=f.month()>=6?"second-half":"first-half"}),Ce(()=>{const f=ie(z.value.from_date||ie());e.value=f.month()>=6?"second-half":"first-half"}),(f,g)=>{const h=J("FeatherIcon");return r(),c("div",xf,[s("div",wf,[s("div",kf,[n.value!==i.value?(r(),D(t(De),{key:0},{target:$(({togglePopover:v})=>[d(t(Q),{class:"flex items-center gap-2 font-semibold text-xl cursor-pointer select-none",variant:"ghost",onClick:v,label:o.value+"","icon-right":"chevron-down"},null,8,["onClick","label"])]),"body-main":$(({togglePopover:v})=>[s("div",Cf,[s("div",$f,[(r(!0),c(q,null,G(u.value,_=>(r(),c("div",{key:_,ref_for:!0,ref:"yearItems",class:"cursor-pointer px-3 py-1.5 text-sm hover:bg-gray-100 flex items-center justify-between",onClick:y=>m(v,_)},[le(O(_)+" ",1),_===o.value?(r(),D(h,{key:0,name:"check",class:"size-4"})):A("",!0)],8,Af))),128))],512)])]),_:1})):(r(),c("div",Sf,O(n.value),1))]),s("div",Vf,[d(t(Q),{variant:"ghost",icon:"chevron-left",disabled:e.value==="first-half",onClick:g[0]||(g[0]=v=>e.value="first-half")},null,8,["disabled"]),d(t(Q),{variant:"ghost",label:"Today",onClick:g[1]||(g[1]=v=>p())}),d(t(Q),{variant:"ghost",icon:"chevron-right",disabled:e.value==="second-half",onClick:g[2]||(g[2]=v=>e.value="second-half")},null,8,["disabled"])])]),e.value==="first-half"?(r(),c("div",Ef,[(r(!0),c(q,null,G(l.value.slice(0,6),v=>(r(),D(ql,{key:v,year:o.value,month:v,holidays:t(z).holidays},null,8,["year","month","holidays"]))),128))])):(r(),c("div",Df,[(r(!0),c(q,null,G(l.value.slice(6,12),v=>(r(),D(ql,{key:v,year:o.value,month:v,holidays:t(z).holidays},null,8,["year","month","holidays"]))),128))])),s("div",If,[s("div",{class:se(["size-1.5 rounded-full cursor-pointer",{"bg-black":e.value==="first-half","bg-gray-400":e.value==="second-half"}]),onClick:g[3]||(g[3]=v=>e.value="first-half")},null,2),s("div",{class:se(["size-1.5 rounded-full cursor-pointer",{"bg-black":e.value==="second-half","bg-gray-400":e.value==="first-half"}]),onClick:g[4]||(g[4]=v=>e.value="second-half")},null,2)])])}}}),Bf={key:0,class:"flex items-center h-full justify-center"},Ff={key:1,class:"flex items-center justify-between sticky top-0 z-10 bg-white px-10 pt-8 pb-4"},Of={class:"flex items-center gap-2"},Mf={class:"flex gap-2 items-center"},jf={key:2,class:"px-10 pb-8 overflow-y-scroll h-full"},Rf={class:"flex items-center gap-2 mt-2"},qf={class:"text-sm"},Tf={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},Nf={class:"mt-3.5 flex gap-5 flex-col md:flex-row"},Uf={class:"w-full space-y-1.5"},Pf={class:"w-full space-y-1.5"},Hf={class:"mt-5"},zf={class:"flex justify-between items-center"},Qf={class:"mt-5"},Jf={class:"mt-2.5 flex justify-between items-center"},Wf={key:0,class:"flex gap-4"},Gf=N({__name:"HolidayView",setup(a){var w,I;const e=V({show:!1,holiday_date:null,description:"",editing:null}),l=V(!1),o=V(null),n=V("calendar"),i=V(!1),u=je("holidayList"),m=fe({url:"helpdesk.api.holiday_list.get_holiday_list",params:{docname:(w=xe.value.data)==null?void 0:w.name},onSuccess(S){z.value=S,o.value=JSON.stringify(S)},transform(S){for(let k of S.holidays)k.description=pl(k.description);return S.recurring_holidays=JSON.parse(S.recurring_holidays||"[]"),S}});(I=xe.value.data)!=null&&I.name?(z.value.loading=!0,m.fetch()):Ve.value=!0;const p=S=>{dl(S),(!we.value.dateRange||we.value.dateRange==="")&&Zt()},f=()=>{if(l.value&&!i.value){i.value=!0;return}if(!xe.value.data&&!i.value){i.value=!0;return}xe.value.previousScreen&&(Tt("SLA Policies"),he.value={screen:"view",data:{name:xe.value.previousScreen.data},fetchData:!1}),i.value=!1,setTimeout(()=>{xe.value={screen:"list",data:null}},250)},g=()=>{const S=dl();if(Object.values(S).some(k=>k)){W.error("Invalid fields, check if all are filled in and values are correct.");return}xe.value.data?_():h()},h=()=>{const S=z.value.holidays.map(k=>({...k,holiday_date:ie(k.holiday_date).format("YYYY-MM-DD")}));u.insert.submit({holiday_list_name:z.value.holiday_list_name,description:z.value.description,from_date:z.value.from_date,to_date:z.value.to_date,holidays:S,recurring_holidays:JSON.stringify(z.value.recurring_holidays)},{onSuccess(k){W.success("Holiday list created"),xe.value.data=k,xe.value.screen="view",m.submit({docname:k.name})}})},v=fe({url:"helpdesk.api.holiday_list.update_holiday_list",onSuccess(S){xe.value.data=S,m.submit({docname:S.name}),W.success("Holiday list updated")}}),_=()=>{const S=z.value.holidays.map(k=>({...k,holiday_date:ie(k.holiday_date).format("YYYY-MM-DD")}));v.submit({docname:xe.value.data.name,doc:{holiday_list_name:z.value.holiday_list_name,description:z.value.description,from_date:z.value.from_date,to_date:z.value.to_date,holidays:S,recurring_holidays:JSON.stringify(z.value.recurring_holidays)}})};me(z,S=>{o.value&&(l.value=JSON.stringify(S)!=o.value,l.value?Ve.value=!0:Ve.value=!1)},{deep:!0});const y=S=>{l.value&&(S.preventDefault(),S.returnValue=!0)};return Ce(()=>{addEventListener("beforeunload",y)}),Je(()=>{removeEventListener("beforeunload",y),we.value={holiday_list_name:"",from_date:"",to_date:""},Ve.value=!1}),(S,k)=>{var E;const L=J("Badge"),b=J("ErrorMessage"),x=ns;return r(),c(q,null,[t(z).loading?(r(),c("div",Bf,[d(t(vt),{class:"w-4"})])):A("",!0),t(z).loading?A("",!0):(r(),c("div",Ff,[s("div",null,[s("div",Of,[d(t(Q),{variant:"ghost","icon-left":"chevron-left",label:((E=t(z))==null?void 0:E.holiday_list_name)||"New Business Holiday",size:"md",onClick:k[0]||(k[0]=C=>f()),class:"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-ink-gray-7 text-xl hover:opacity-70 !pr-0"},null,8,["label"]),l.value?(r(),D(L,{key:0,variant:"subtle",theme:"orange",size:"sm",label:"Unsaved changes"})):A("",!0)])]),s("div",Mf,[d(t(Q),{label:"Save",theme:"gray",variant:"solid",onClick:k[1]||(k[1]=C=>g()),disabled:!!(!l.value&&t(xe).data),loading:t(u).loading||t(v).loading||t(m).loading},null,8,["disabled","loading"])])])),t(z).loading?A("",!0):(r(),c("div",jf,[s("div",Rf,[s("span",qf,[k[13]||(k[13]=le(" There are in total ",-1)),s("b",null,O(t(z).holidays.length),1),k[14]||(k[14]=le(" holidays in this list",-1))])]),k[19]||(k[19]=s("hr",{class:"mb-8 mt-2"},null,-1)),s("div",Tf,[s("div",null,[d(t(ge),{type:"text",size:"sm",variant:"subtle",placeholder:"Name",label:"Name",modelValue:t(z).holiday_list_name,"onUpdate:modelValue":k[2]||(k[2]=C=>t(z).holiday_list_name=C),required:"",onChange:k[3]||(k[3]=C=>t(dl)("holiday_list_name"))},null,8,["modelValue"]),d(b,{message:t(we).holiday_list_name,class:"mt-2"},null,8,["message"])]),d(t(ge),{type:"textarea",size:"sm",variant:"subtle",placeholder:"Description",label:"Description",modelValue:t(z).description,"onUpdate:modelValue":k[4]||(k[4]=C=>t(z).description=C)},null,8,["modelValue"])]),k[20]||(k[20]=s("hr",{class:"my-8"},null,-1)),s("div",null,[k[15]||(k[15]=s("div",{class:"flex flex-col gap-1"},[s("span",{class:"text-lg font-semibold text-ink-gray-8"},"Valid from"),s("span",{class:"text-p-sm text-ink-gray-6"}," Choose the duration of this holiday list. ")],-1)),s("div",Nf,[s("div",Uf,[d(We,{label:"From date",for:"from_date",required:""}),d(t(St),{modelValue:t(z).from_date,"onUpdate:modelValue":[k[5]||(k[5]=C=>t(z).from_date=C),k[6]||(k[6]=C=>p("from_date"))],variant:"subtle",placeholder:"11/01/2025",class:"w-full",id:"from_date",formatter:C=>t(oe)(C),debounce:300},{prefix:$(()=>[d(x,{class:"size-4"})]),_:1},8,["modelValue","formatter"]),d(b,{message:t(we).from_date||t(we).dateRange},null,8,["message"])]),s("div",Pf,[d(We,{label:"To date",for:"to_date",required:""}),d(t(St),{modelValue:t(z).to_date,"onUpdate:modelValue":[k[7]||(k[7]=C=>t(z).to_date=C),k[8]||(k[8]=C=>p("to_date"))],variant:"subtle",placeholder:"25/12/2025",class:"w-full",id:"to_date",formatter:C=>t(oe)(C),debounce:300},{prefix:$(()=>[d(x,{class:"size-4"})]),_:1},8,["modelValue","formatter"]),d(b,{message:t(we).to_date},null,8,["message"])])])]),k[21]||(k[21]=s("hr",{class:"my-8"},null,-1)),s("div",null,[k[16]||(k[16]=s("div",{class:"flex flex-col gap-1"},[s("div",{class:"text-lg font-semibold text-ink-gray-8"}," Recurring holidays "),s("div",{class:"text-p-sm text-ink-gray-6"}," Add recurring holidays such as weekends. ")],-1)),s("div",Hf,[d(uf,{holidayData:t(z),holidays:t(z).recurring_holidays},null,8,["holidayData","holidays"])])]),k[22]||(k[22]=s("hr",{class:"my-8"},null,-1)),s("div",null,[s("div",zf,[k[17]||(k[17]=s("div",{class:"flex justify-between flex-col gap-1"},[s("span",{class:"text-lg font-semibold text-ink-gray-8"},"Holidays"),s("div",{class:"text-p-sm text-ink-gray-6"}," Add holidays here to make sure theyre excluded from SLA calculations. ")],-1)),d(t(ca),{buttons:[{value:"calendar",icon:"calendar"},{value:"list",icon:"list"}],modelValue:n.value,"onUpdate:modelValue":k[9]||(k[9]=C=>n.value=C)},null,8,["modelValue"])]),s("div",Qf,[n.value==="list"?(r(),D(Um,{key:0})):(r(),D(Lf,{key:1}))]),s("div",Jf,[d(t(Q),{variant:"subtle",label:"Add Holiday",onClick:k[10]||(k[10]=C=>e.value.show=!0),"icon-left":"plus"}),n.value==="calendar"?(r(),c("div",Wf,[...k[18]||(k[18]=[ll('<div class="gap-1 flex items-center" data-v-ee1b21aa><span class="bg-yellow-100 size-4 rounded-sm" data-v-ee1b21aa></span><span class="text-sm text-ink-gray-6" data-v-ee1b21aa>Holidays</span></div><div class="gap-1 flex items-center" data-v-ee1b21aa><span class="bg-gray-100 size-4 rounded-sm" data-v-ee1b21aa></span><span class="text-sm text-ink-gray-6" data-v-ee1b21aa>Recurring holidays</span></div>',2)])])):A("",!0)])])])),d($l,{modelValue:e.value,"onUpdate:modelValue":k[11]||(k[11]=C=>e.value=C)},null,8,["modelValue"]),d(al,{modelValue:i.value,"onUpdate:modelValue":k[12]||(k[12]=C=>i.value=C),title:"Unsaved changes",message:"Are you sure you want to go back? Unsaved changes will be lost.",onConfirm:f,onCancel:()=>i.value=!1},null,8,["modelValue","onCancel"])],64)}}});const Kf=Se(Gf,[["__scopeId","data-v-ee1b21aa"]]),Zf={class:"pb-8"},Yf=N({__name:"Holiday",setup(a){const e=ut({doctype:"HD Service Holiday List",fields:["name","description"],orderBy:"creation desc",start:0,pageLength:999,auto:!0});return $t("holidayList",e),(l,o)=>(r(),c("div",Zf,[t(xe).screen=="list"?(r(),D(Em,{key:0})):t(xe).screen=="view"?(r(),D(Kf,{key:1})):A("",!0)]))}}),Fe=ut({doctype:"HD Form Script",filters:{is_standard:1,name:["like","%Field Dependency%"]},fields:["name","enabled","owner"],auto:!0,cache:["FD","List"],orderBy:"modified desc"}),Xf=P(()=>{var e;let a=[];return(e=Fe.data)==null||e.forEach(l=>{let[o,n,i]=l.name.split("-");n&&i&&(a.push(i),a.push(n))}),a}),xt=Pe({});async function ev(a){if(xt[a.value])return xt[a.value];if(a.type==="Select")return xt[a.value]=a.options.split(`
`),xt[a.value];if(a.type==="Link"){let e=await et("frappe.client.get_list",{doctype:a.options,fields:["name"],limit_page_length:999});return xt[a.value]=e.map(l=>l.name),xt[a.value]}}const tv={class:"lucide lucide-square-check-big",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function lv(a,e){return r(),c("svg",tv,[...e[0]||(e[0]=[s("path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5"},null,-1),s("path",{d:"m9 11 3 3L22 4"},null,-1)])])}const Rs=Y({name:"lucide-check-square",render:lv}),sv={class:"lucide lucide-square",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function nv(a,e){return r(),c("svg",sv,[...e[0]||(e[0]=[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"},null,-1)])])}const qs=Y({name:"lucide-square",render:nv}),av={name:"Autocomplete",props:["label","modelValue","options","placeholder","bodyClasses","multiple","loading","hideSearch","autoFocus","placement","showFooter","buttonClasses","disabled"],emits:["update:modelValue","update:query","change"],components:{Popover:De,Combobox:Kl,ComboboxInput:Zl,ComboboxOptions:Yl,ComboboxOption:Xl,ComboboxButton:Ln,LucideCheckSquare:Rs,LucideSquare:qs},expose:["togglePopover"],data(){return{query:"",showOptions:!1}},computed:{selectedValue:{get(){var e;let a;return this.multiple?(a=(e=this.modelValue)==null?void 0:e.map(l=>{const o=this.findOption(l);return o||this.sanitizeOption(l)}),this.modelValue&&!a.length&&(a=this.sanitizeOptions(this.modelValue)),a):(a=this.findOption(this.modelValue),this.modelValue&&!a&&(a=this.sanitizeOption(this.modelValue)),a)},set(a){this.query="",a&&!this.multiple&&(this.showOptions=!1),this.$emit("update:modelValue",a)}},groups(){var e;return!this.options||this.options.length==0?[]:((e=this.options[0])!=null&&e.group?this.options:[{group:"",items:this.sanitizeOptions(this.options)}]).map((l,o)=>({key:o,group:l.group,hideLabel:l.hideLabel||!1,items:this.filterOptions(this.sanitizeOptions(l.items))})).filter(l=>l.items.length>0)},allOptions(){return this.groups.flatMap(a=>a.items)},areAllOptionsSelected(){var a;return this.multiple?this.allOptions.length===((a=this.selectedValue)==null?void 0:a.length):!1}},watch:{query(a){this.$emit("update:query",a)},showOptions(a){a&&He(()=>{var e,l;return(l=(e=this.$refs.searchInput)==null?void 0:e.$el)==null?void 0:l.focus()})}},methods:{togglePopover(a){this.showOptions=a??!this.showOptions},findOption(a){return a&&this.allOptions.find(e=>e.value===(a.value||a))},filterOptions(a){return this.query?fuzzySearch(a,{term:this.query,keys:["label","value"]}):a},displayValue(a){if(!a)return"";if(!this.multiple){if(typeof a=="object")return this.getLabel(a);let e=this.allOptions.find(l=>l.value===a);return this.getLabel(e)}return!Array.isArray(a)||a.length===0?"":a.length===1?this.getLabel(a[0]):`${a.length} values`},getLabel(a){return typeof a!="object"?a:(a==null?void 0:a.label)||(a==null?void 0:a.value)||"No label"},sanitizeOptions(a){return a?a.map(e=>this.sanitizeOption(e)):[]},sanitizeOption(a){return typeof a=="string"?{label:a,value:a}:a},isOptionSelected(a){var e,l;return this.multiple?(l=this.selectedValue)==null?void 0:l.find(o=>o&&o.value===a.value):((e=this.selectedValue)==null?void 0:e.value)===a.value},selectAll(){this.selectedValue=this.allOptions},fuzzySearch(a,{term:e,keys:l}){const o=e.toLowerCase();return a.reduce((i,u)=>{const m=l.reduce((p,f)=>{const g=u[f];if(g){const h=g.toLowerCase().indexOf(o);if(h!==-1)return p+h+1}return p},0);return m&&i.push({item:u,score:m}),i},[]).sort((i,u)=>i.score-u.score).map(i=>i.item)}}},ov={class:"w-full space-y-1.5"},iv={key:0,class:"block text-xs text-gray-600"},rv=["onClick"],uv={class:"flex flex-1 items-center gap-2 overflow-hidden"},dv={key:0,class:"flex-1 truncate text-left text-base leading-5"},cv={key:1,class:"text-base leading-5 text-gray-600"},pv={key:0,class:"relative mb-1 w-full flex-shrink-0"},mv={class:"w-full flex-1 overflow-y-auto"},fv={key:0,class:"sticky top-0 truncate bg-white px-2.5 py-1.5 text-sm font-medium text-gray-600"},vv={class:"flex flex-1 items-center gap-2 overflow-hidden"},gv={key:0,class:"flex-shrink-0"},yv={class:"flex-1 truncate"},hv={key:0,class:"ml-2 flex-shrink-0"},_v={key:0,class:"text-sm text-gray-600"},bv={key:1,class:"rounded-md px-2.5 py-1.5 text-base text-gray-600"},xv={key:0,class:"border-t p-1"},wv={key:0,class:"flex items-center justify-end gap-1"},kv={key:1,class:"flex items-center justify-end"};function Cv(a,e,l,o,n,i){const u=J("FeatherIcon"),m=J("LoadingIndicator"),p=J("ComboboxInput"),f=qs,g=Rs,h=J("ComboboxOption"),v=J("ComboboxOptions"),_=J("Button"),y=J("Popover"),w=J("Combobox");return r(),D(w,{modelValue:i.selectedValue,"onUpdate:modelValue":e[4]||(e[4]=I=>i.selectedValue=I),multiple:l.multiple,nullable:""},{default:$(({open:I})=>[d(y,{class:"w-full",show:n.showOptions,"onUpdate:show":e[3]||(e[3]=S=>n.showOptions=S),placement:l.placement},{target:$(({open:S,togglePopover:k,close:L})=>[ue(a.$slots,"target",Rt(Yt({open:S,close:L,togglePopover:k,isOpen:I})),()=>[s("div",ov,[a.$props.label?(r(),c("label",iv,O(a.$props.label),1)):A("",!0),s("button",{class:se(["flex h-7 w-full items-center justify-between gap-2 rounded bg-gray-100 py-1 px-2 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-400",[I?"bg-gray-200":"",a.$props.buttonClasses,l.disabled?"cursor-not-allowed opacity-50":""]]),onClick:()=>{!l.disabled&&k()}},[s("div",uv,[ue(a.$slots,"prefix"),i.selectedValue?(r(),c("span",dv,O(i.displayValue(i.selectedValue)),1)):(r(),c("span",cv,O(l.placeholder||""),1)),ue(a.$slots,"suffix")]),Ee(d(u,{name:"chevron-down",class:"h-4 w-4 text-gray-600","aria-hidden":"true"},null,512),[[Ye,!l.loading]]),Ee(d(m,{class:"h-4 w-4 text-gray-600"},null,512),[[Ye,l.loading]])],10,rv)])])]),body:$(({isOpen:S,togglePopover:k})=>[Ee(s("div",null,[s("div",{class:se(["relative mt-1 overflow-hidden rounded-lg bg-white text-base shadow-2xl",l.bodyClasses])},[d(v,{class:"flex max-h-[15rem] flex-col overflow-hidden p-1.5",static:""},{default:$(()=>[l.hideSearch?A("",!0):(r(),c("div",pv,[d(p,{ref:"searchInput",class:"form-input w-full",type:"text",value:n.query,onChange:e[0]||(e[0]=L=>n.query=L.target.value),autocomplete:"off",placeholder:"Search"},null,8,["value"]),s("button",{class:"absolute right-0 inline-flex h-7 w-7 items-center justify-center",onClick:e[1]||(e[1]=L=>i.selectedValue=null)},[d(u,{name:"x",class:"w-4"})])])),s("div",mv,[(r(!0),c(q,null,G(i.groups,L=>Ee((r(),c("div",{key:L.key},[L.group&&!L.hideLabel?(r(),c("div",fv,O(L.group),1)):A("",!0),(r(!0),c(q,null,G(L.items.slice(0,50),(b,x)=>(r(),D(h,{as:"template",key:(b==null?void 0:b.value)||x,value:b},{default:$(({active:E,selected:C})=>[s("li",{class:se(["flex h-7 cursor-pointer items-center justify-between rounded px-2.5 text-base",{"bg-gray-100":E}])},[s("div",vv,[a.$slots["item-prefix"]||a.$props.multiple?(r(),c("div",gv,[ue(a.$slots,"item-prefix",ke({ref_for:!0},{active:E,selected:C,option:b}),()=>[Ee(d(f,{class:"h-4 w-4 text-gray-700"},null,512),[[Ye,!i.isOptionSelected(b)]]),Ee(d(g,{class:"h-4 w-4 text-gray-700"},null,512),[[Ye,i.isOptionSelected(b)]])])])):A("",!0),s("span",yv,O(i.getLabel(b)),1)]),a.$slots["item-suffix"]||b!=null&&b.description?(r(),c("div",hv,[ue(a.$slots,"item-suffix",ke({ref_for:!0},{active:E,selected:C,option:b}),()=>[b!=null&&b.description?(r(),c("div",_v,O(b.description),1)):A("",!0)])])):A("",!0)],2)]),_:2},1032,["value"]))),128))])),[[Ye,L.items.length>0]])),128))]),i.groups.length==0?(r(),c("li",bv," No results found ")):A("",!0)]),_:3}),a.$slots.footer||l.showFooter||l.multiple?(r(),c("div",xv,[ue(a.$slots,"footer",Rt(Yt({togglePopover:k})),()=>[l.multiple?(r(),c("div",wv,[i.areAllOptionsSelected?A("",!0):(r(),D(_,{key:0,label:"Select All",onClick:_e(i.selectAll,["stop"])},null,8,["onClick"]))])):(r(),c("div",kv,[d(_,{label:"Clear",onClick:e[2]||(e[2]=_e(L=>i.selectedValue=null,["stop"]))})]))])])):A("",!0)],2)],512),[[Ye,S]])]),_:2},1032,["show","placement"])]),_:3},8,["modelValue","multiple"])}const Tl=Se(av,[["render",Cv]]),$v=["href"],yl=N({__name:"DocumentationButton",props:{url:{},color:{}},setup(a){return(e,l)=>{const o=Bn,n=J("Tooltip");return r(),D(n,{text:"View documentation"},{default:$(()=>[s("a",{href:e.url,target:"_blank"},[d(o,{class:se(["h-4 w-4 text-ink-gray-6",e.color])},null,8,["class"])],8,$v)]),_:1})}}}),Av={class:"flex justify-between items-start flex-col gap-6"},Sv={class:"flex flex-col gap-4 w-full pb-2"},Vv={class:"flex items-center gap-3 justify-between"},Ev={class:"flex gap-3 items-center"},Dv={class:"flex items-center gap-1"},Iv={class:"flex items-center gap-3 justify-between w-full"},Lv={class:"flex gap-3 items-center"},Bv={class:"flex items-center gap-1"},Fv=N({__name:"FieldDependencyCriteria",props:Ue({parentFieldValues:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=a,l=P(()=>{const i=[{label:"Any",value:"Any"}];return e.parentFieldValues.forEach(u=>{i.some(m=>m.value===u)||i.push({label:u,value:u})}),i}),o=Re(a,"modelValue");function n(i,u){const m=i.map(p=>p.value);o.value[u].value=i,m.length===0?o.value[u].value=[{label:"Any",value:"Any"}]:m[0]==="Any"&&m.length>1?o.value[u].value=m.filter(p=>p!=="Any").map(p=>({label:p,value:p})):m.at(-1)==="Any"&&m.length>1&&(o.value[u].value=[{label:"Any",value:"Any"}])}return(i,u)=>(r(),c("div",Av,[u[6]||(u[6]=s("span",{class:"text-sm text-ink-gray-5 pt-4 w-full"},"Set visibility and mandatory criteria for child field:",-1)),s("div",Sv,[s("div",Vv,[s("div",Ev,[d(t(tt),{modelValue:o.value.display.enabled,"onUpdate:modelValue":u[0]||(u[0]=m=>o.value.display.enabled=m)},null,8,["modelValue"]),s("div",Dv,[u[4]||(u[4]=s("span",{class:"text-sm text-ink-gray-5"},"Show child if parent field is set to",-1)),d(yl,{url:"https://docs.frappe.io/helpdesk/field-dependency#handling-visibility-of-child-field",color:"!text-ink-gray-6"})])]),d(Tl,{disabled:!o.value.display.enabled,class:"min-w-[120px] max-w-[120px]",options:l.value,"model-value":o.value.display.value,"onUpdate:modelValue":u[1]||(u[1]=m=>n(m,"display")),multiple:!0,placeholder:"Select Child Field values",placement:"top"},null,8,["disabled","options","model-value"])]),s("div",Iv,[s("div",Lv,[d(t(tt),{modelValue:o.value.mandatory.enabled,"onUpdate:modelValue":u[2]||(u[2]=m=>o.value.mandatory.enabled=m)},null,8,["modelValue"]),s("div",Bv,[u[5]||(u[5]=s("span",{class:"text-sm text-ink-gray-5"},"Make child mandatory if parent field is set to",-1)),d(yl,{url:"https://docs.frappe.io/helpdesk/field-dependency#handling-if-the-child-field-is-mandatory",color:"!text-ink-gray-6"})])]),d(Tl,{disabled:!o.value.mandatory.enabled,class:"min-w-[120px] max-w-[120px]",options:l.value,"model-value":o.value.mandatory.value,"onUpdate:modelValue":u[3]||(u[3]=m=>n(m,"mandatory")),multiple:!0,placeholder:"Select Child Field values",placement:"top"},null,8,["disabled","options","model-value"])])])]))}}),Ov={class:"flex gap-3 w-full justify-between flex-1"},Mv={class:"flex-1 flex flex-col gap-1.5"},jv={class:"flex-1 flex flex-col gap-1.5"},Rv=N({__name:"FieldDependencyFieldsSelection",props:Ue({isNew:{type:Boolean},parentFields:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=Re(a,"modelValue");return(l,o)=>(r(),c("div",Ov,[s("div",Mv,[o[2]||(o[2]=s("span",{class:"block text-xs text-ink-gray-5"},[le("Parent Field "),s("span",{class:"text-ink-red-3 select-none"},"*")],-1)),d(t(Ml),{modelValue:e.value.selectedParentField,"onUpdate:modelValue":o[0]||(o[0]=n=>e.value.selectedParentField=n),options:l.parentFields,disabled:!l.isNew},null,8,["modelValue","options","disabled"])]),s("div",jv,[o[3]||(o[3]=s("span",{class:"block text-xs text-ink-gray-5"},[le("Child Field "),s("span",{class:"text-ink-red-3 select-none"},"*")],-1)),d(t(Ml),{modelValue:e.value.selectedChildField,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value.selectedChildField=n),options:e.value.childFields,disabled:!e.value.selectedParentField||!l.isNew},null,8,["modelValue","options","disabled"])])]))}}),qv={class:"flex w-full flex-1 justify-between h-full h-[420px] max-h-[420px] min-h-[420px]"},Tv={class:"flex-1 flex flex-col gap-1.5"},Nv={class:"border flex-1 border-r-0 rounded-l p-2 flex flex-col gap-2"},Uv={class:"flex-1 overflow-y-auto hide-scrollbar basis-0"},Pv={class:"max-w-[350px] overflow-y-auto"},Hv=["onClick"],zv={class:"text-base text-ink-gray-6 max-w-[90%] truncate"},Qv={key:1,class:"flex flex-col items-center mt-20 h-full text-ink-gray-4 text-sm"},Jv={class:"flex-1 flex flex-col gap-1.5"},Wv={class:"border flex-1 rounded-r p-2 flex flex-col gap-2"},Gv={class:"flex-1 overflow-y-auto hide-scrollbar basis-0"},Kv={class:"text-base text-ink-gray-8 font-medium"},Zv={class:"max-w-[350px] overflow-y-auto"},Yv=["onClick"],Xv={class:"text-base text-ink-gray-6"},eg={key:1,class:"flex flex-col items-center mt-20 h-full text-ink-gray-4 text-sm"},tg={key:2,class:"flex flex-col items-center mt-20 h-full text-ink-gray-4 text-sm"},lg=N({__name:"FieldDependencyValueSelection",props:Ue({isNew:{type:Boolean},parentFields:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=a,l=Re(a,"modelValue"),o=P(()=>l.value.parentSearch?l.value.parentFieldValues.filter(y=>y.toLowerCase().includes(l.value.parentSearch.toLowerCase())):l.value.parentFieldValues),n=P(()=>l.value.childSearch?l.value.childFieldValues.filter(y=>y.toLowerCase().includes(l.value.childSearch.toLowerCase())):l.value.childFieldValues),i=P(()=>{var w;return l.value.selectedParentField?`Search ${(w=e.parentFields.find(I=>I.value===l.value.selectedParentField))==null?void 0:w.label} values`:"Search values"}),u=P(()=>l.value.currentParentSelection?`Search ${l.value.currentParentSelection} values`:"Search values");function m(y){l.value.currentParentSelection=y}function p(y){const w=l.value.currentParentSelection;w&&(l.value.childSelections[w]instanceof Set||(l.value.childSelections[w]=new Set),l.value.childSelections[w].has(y)?l.value.childSelections[w].delete(y):l.value.childSelections[w].add(y))}function f(y){return l.value.childSelections[y]instanceof Set?l.value.childSelections[y].size:0}const g=P({get(){const y=l.value.currentParentSelection;return!y||!(l.value.childSelections[y]instanceof Set)?!1:l.value.childSelections[y].size===n.value.length},set(y){v(y)}}),h=P(()=>{const y=l.value.currentParentSelection;if(!y)return"Select All";const w=f(y);return w===0?"Select All":`${w} ${w===1?"value":"values"} selected`});function v(y){const w=l.value.currentParentSelection;w&&(l.value.childSelections[w]instanceof Set||(l.value.childSelections[w]=new Set),y?n.value.forEach(I=>{l.value.childSelections[w].add(I)}):l.value.childSelections[w].clear())}function _(y){const w=l.value.currentParentSelection;return l.value.childSelections[w]instanceof Set&&l.value.childSelections[w].has(y)}return(y,w)=>{const I=Ut,S=J("FormControl"),k=Fn,L=J("Badge");return r(),c("div",qv,[s("div",Tv,[w[3]||(w[3]=s("span",{class:"block text-xs text-ink-gray-5"}," Select parent field value ",-1)),s("div",Nv,[l.value.selectedParentField?(r(),c(q,{key:0},[d(S,{modelValue:l.value.parentSearch,"onUpdate:modelValue":w[0]||(w[0]=b=>l.value.parentSearch=b),placeholder:i.value,type:"text",class:"w-full"},{prefix:$(()=>[d(I,{class:"h-4 w-4 text-gray-500"})]),_:1},8,["modelValue","placeholder"]),s("div",Uv,[s("ul",Pv,[(r(!0),c(q,null,G(o.value,b=>(r(),c("li",{key:b,class:se(["py-2 mb-1 px-2.5 cursor-pointer rounded flex justify-between items-center hover:bg-surface-gray-1 overflow-hidden max-w-full",{"bg-surface-gray-2 hover:bg-surface-gray-3":l.value.currentParentSelection===b}]),onClick:x=>m(b)},[s("span",zv,O(b),1),f(b)===0||l.value.currentParentSelection===b?(r(),D(k,{key:0,class:"h-4 w-4 text-ink-gray-6"})):(r(),D(L,{key:1,label:f(b),theme:"gray",variant:"subtle",class:"!h-4"},null,8,["label"]))],10,Hv))),128))])])],64)):(r(),c("div",Qv," Please select a parent field first "))])]),s("div",Jv,[w[4]||(w[4]=s("span",{class:"block text-xs text-ink-gray-5 pl-1.5"}," Select child field value ",-1)),s("div",Wv,[l.value.selectedChildField&&l.value.currentParentSelection?(r(),c(q,{key:0},[d(S,{modelValue:l.value.childSearch,"onUpdate:modelValue":w[1]||(w[1]=b=>l.value.childSearch=b),placeholder:u.value,type:"text",class:"w-full"},{prefix:$(()=>[d(I,{class:"h-4 w-4 text-gray-500"})]),_:1},8,["modelValue","placeholder"]),s("div",Gv,[s("li",{class:"py-2 mb-1 px-2.5 cursor-pointer rounded flex items-center bg-surface-gray-1 hover:bg-surface-gray-2",onClick:w[2]||(w[2]=b=>v(!g.value))},[d(S,{type:"checkbox","model-value":g.value,class:"mr-2"},null,8,["model-value"]),s("span",Kv,O(h.value),1)]),s("ul",Zv,[(r(!0),c(q,null,G(n.value,b=>(r(),c("li",{key:b,class:"py-2 mb-1 px-2.5 cursor-pointer rounded flex items-center hover:bg-surface-gray-1 max-w-full truncate",onClick:x=>p(b)},[d(S,{type:"checkbox","model-value":_(b),class:"mr-2"},null,8,["model-value"]),s("span",Xv,O(b),1)],8,Yv))),128))])])],64)):l.value.selectedChildField?(r(),c("div",tg," Please select a parent value first ")):(r(),c("div",eg," Please select a child field first "))])])])}}}),sg={class:"flex flex-col py-8 gap-8 overflow-y-hidden"},ng={class:"flex items-center gap-2 pl-10"},ag={class:"flex gap-4 pr-10"},og={class:"flex gap-2 items-center"},ig={class:"flex gap-1"},rg={class:"w-full flex-1 flex flex-col gap-8 overflow-y-hidden px-10"},ug={class:"flex flex-col gap-8 overflow-y-scroll"},dg=N({__name:"FieldDependency",props:{fieldDependencyName:{type:String,default:""}},emits:["update:step"],setup(a,{emit:e}){const l=a,o=e,n=P(()=>!l.fieldDependencyName),i=P(()=>n.value?"New Field Dependency":es(l.fieldDependencyName)),{getFields:u}=On("HD Ticket"),m=P(()=>{let b=u();if(!b||b.length===0)return[];const x=["status","agreement_status"];return b=b.filter(E=>(E.fieldtype==="Select"||E.fieldtype==="Link")&&!x.includes(E.fieldname)),b.map(E=>({label:E.label,value:E.fieldname,options:E.options||[],type:E.fieldtype}))});let p=Pe({selectedParentField:"",selectedChildField:"",childFields:[],parentFieldValues:[],childFieldValues:[],currentParentSelection:"",childSelections:{},initialChildSelections:{},parentSearch:"",childSearch:"",enabled:!0}),f=Pe({display:{enabled:!0,value:[{label:"Any",value:"Any"}]},mandatory:{enabled:!0,value:[{label:"Any",value:"Any"}]}});const g=fe({url:"helpdesk.api.settings.field_dependency.create_update_field_dependency",auto:!1,makeParams:()=>({parent_field:p.selectedParentField,child_field:p.selectedChildField,parent_child_mapping:w(),enabled:p.enabled,fields_criteria:JSON.stringify(f)}),onSuccess:()=>{if(!n.value){h.reload();return}o("update:step","fd-list")}}),h=fe({url:"helpdesk.api.settings.field_dependency.get_field_dependency",params:{name:l.fieldDependencyName},auto:!n.value,onSuccess:b=>{p.selectedParentField=b.parent_field,p.selectedChildField=b.child_field,p.enabled=b.enabled,v(b.parent_child_mapping),_(b.fields_criteria)}});function v(b){const x=JSON.parse(b||"{}");let E={};Object.keys(x).forEach(C=>{E[C]=new Set(x[C])}),p.childSelections=E,p.initialChildSelections=structuredClone(E),p.currentParentSelection||(p.currentParentSelection=Object.keys(x)[0]||"")}function _(b){const x=JSON.parse(b||"{}");f.display=x.display||{enabled:!0,value:[{label:"Any",value:"Any"}]},f.mandatory=x.mandatory||{enabled:!0,value:[{label:"Any",value:"Any"}]}}const y=P(()=>{var b,x;return n.value?p.enabled!==!0||p.selectedParentField!=="":h.loading?!1:!!((b=h.data)!=null&&b.enabled)!=!!p.enabled||w(p.childSelections)!==w(p.initialChildSelections)||JSON.stringify(f)!==((x=h.data)==null?void 0:x.fields_criteria)});me(()=>y.value,b=>{Ve.value=b});function w(b=null){const x=b&&Object.keys(b).length>0?b:p.childSelections,E={};return Object.keys(x).forEach(C=>{Array.from(x[C]).length&&(E[C]=Array.from(x[C]))}),JSON.stringify(E)}async function I(b,x){if(!b)return[];if(x)if(n.value){p.selectedChildField="",p.childFieldValues=[],p.currentParentSelection="",p.childSelections={};let F=[b,...Xf.value];p.childFields=m.value.filter(M=>!F.includes(M.value))}else p.childFields=m.value.filter(F=>F.value===p.selectedChildField);const E=x?m.value.find(F=>F.value===b):p.childFields.find(F=>F.value===b);return E?await ev(E):[]}const S=V(!1);function k(){if(!g.loading){if(y.value){S.value=!0;return}o("update:step","fd-list")}}function L(){if(!y.value)return;g.submit();let b=n.value?"Field Dependency created successfully":"Field Dependency updated successfully";W.success(b)}return me(()=>p.selectedParentField,async b=>{p.parentFieldValues=await I(b,!0)}),me(()=>p.selectedChildField,async b=>{p.childFieldValues=await I(b,!1),n.value&&(p.childSelections={}),p.currentParentSelection=p.parentFieldValues[0]||""}),me(()=>p.currentParentSelection,()=>{p.childSearch=""}),(b,x)=>{const E=J("Button"),C=J("Badge");return r(),c(q,null,[s("div",sg,[d(ct,null,{title:$(()=>[s("div",ng,[d(E,{variant:"ghost","icon-left":"chevron-left",label:i.value,size:"md",onClick:k,class:"cursor-pointer hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 pl-0 -ml-[5px] pr-0"},null,8,["label"]),y.value?(r(),D(C,{key:0,theme:"orange"},{default:$(()=>[...x[5]||(x[5]=[le(" Unsaved ",-1)])]),_:1})):A("",!0)])]),actions:$(()=>[s("div",ag,[s("div",og,[d(t(tt),{modelValue:t(p).enabled,"onUpdate:modelValue":x[0]||(x[0]=F=>t(p).enabled=F),class:"!w-fit"},null,8,["modelValue"]),x[6]||(x[6]=s("span",{class:"text-p-base text-ink-gray-6"},"Enabled",-1))]),s("div",ig,[d(E,{label:"Save",variant:"solid",size:"sm",disabled:!t(p).selectedParentField||!t(p).selectedChildField||Object.keys(t(p).childSelections).length===0,loading:t(g).loading,onClick:L},null,8,["disabled","loading"])])])]),_:1}),s("div",rg,[d(Rv,{modelValue:t(p),"onUpdate:modelValue":x[1]||(x[1]=F=>mt(p)?p.value=F:p=F),"is-new":n.value,"parent-fields":m.value},null,8,["modelValue","is-new","parent-fields"]),s("div",ug,[d(lg,{modelValue:t(p),"onUpdate:modelValue":x[2]||(x[2]=F=>mt(p)?p.value=F:p=F),"is-new":n.value,"parent-fields":m.value},null,8,["modelValue","is-new","parent-fields"]),d(Fv,{"parent-field-values":t(p).parentFieldValues,modelValue:t(f),"onUpdate:modelValue":x[3]||(x[3]=F=>mt(f)?f.value=F:f=F)},null,8,["parent-field-values","modelValue"])])])]),d(al,{modelValue:S.value,"onUpdate:modelValue":x[4]||(x[4]=F=>S.value=F),title:"Unsaved changes",message:"Are you sure you want to go back? Unsaved changes will be lost.",onConfirm:()=>b.$emit("update:step","fd-list"),onCancel:()=>S.value=!1},null,8,["modelValue","onConfirm","onCancel"])],64)}}}),cg={class:"px-10 py-8"},pg={class:"flex items-center gap-2"},mg={class:"px-10 pb-8"},fg={key:0,class:"flex items-center justify-center py-4"},vg={key:1,class:"flex mt-28 justify-between w-full h-full"},gg={key:2,class:"w-full"},yg=["onClick"],hg={class:"w-full flex items-center p-2"},_g={class:"flex gap-2 w-7/12 text-base text-ink-gray-7 pr-3"},bg={class:"w-3/12 flex items-center gap-2 pr-3"},xg={class:"text-base text-ink-gray-7 truncate"},wg={class:"w-1/12 flex items-center"},kg={class:"w-1/12 flex items-center justify-end"},Cg={key:0,class:"h-px border-b mx-1 border-outline-gray-modals w-[99%]"},$g=N({__name:"FieldDependencyList",setup(a){Ce(()=>{Fe.reload()});const e=V(!1);function l(n){return lt({isConfirmingDelete:e,onConfirmDelete:()=>{console.log(`Deleting dependency: ${n}`),Fe.delete.submit(n,{onSuccess:()=>{W.success("Field dependency deleted successfully"),Fe.reload()}})}})}function o(n,i){Fe.setValue.submit({name:n,enabled:i},{onSuccess:()=>{W.success("Field dependency updated successfully.")}})}return(n,i)=>{var f,g;const u=J("Button"),m=kl,p=st;return r(),c(q,null,[s("div",cg,[d(ct,null,{title:$(()=>[s("div",pg,[i[3]||(i[3]=s("h1",{class:"text-lg font-semibold text-ink-gray-8"}," Field Dependencies ",-1)),d(yl,{url:"https://docs.frappe.io/helpdesk/field-dependency",color:"!text-ink-gray-6"})])]),description:$(()=>[...i[4]||(i[4]=[s("p",{class:"text-p-sm max-w-md text-ink-gray-6"}," Create dependencies between fields to dynamically control options based on user selections. ",-1)])]),actions:$(()=>[d(u,{label:"New",theme:"gray",variant:"solid",onClick:i[0]||(i[0]=h=>n.$emit("update:step","fd")),"icon-left":"plus"})]),_:1})]),s("div",mg,[t(Fe).loading?(r(),c("div",fg,[d(t(vt),{scale:5})])):A("",!0),!t(Fe).loading&&((f=t(Fe).data)==null?void 0:f.length)===0?(r(),c("div",vg,[...i[5]||(i[5]=[s("p",{class:"text-sm text-gray-500 w-full flex justify-center"}," No field dependencies found. ",-1)])])):A("",!0),!t(Fe).loading&&((g=t(Fe).data)==null?void 0:g.length)>0?(r(),c("div",gg,[i[6]||(i[6]=ll('<div class="flex w-full p-2"><p class="w-7/12 text-p-sm text-ink-gray-5">Name</p><p class="w-3/12 text-p-sm text-ink-gray-5">Created By</p><p class="w-1/12 text-p-sm text-ink-gray-5">Enabled</p><p class="w-1/12 text-p-sm text-ink-gray-5"></p></div><div class="h-px border-t mx-1 border-outline-gray-modals"></div>',2)),s("ul",null,[(r(!0),c(q,null,G(t(Fe).data,(h,v)=>{var _;return r(),c("li",{class:"w-full flex flex-col items-center cursor-pointer hover:bg-surface-menu-bar rounded",onClick:_e(y=>n.$emit("update:step","fd",h.name),["stop"]),key:h.name},[s("div",hg,[s("div",_g,[s("span",null,O(t(es)(h.name)),1)]),s("p",bg,[d(t(ht),{size:"sm",image:h.owner,label:h.owner},null,8,["image","label"]),s("span",xg,O(h.owner),1)]),s("p",wg,[d(t(tt),{"model-value":h.enabled,"onUpdate:modelValue":y=>o(h.name,y),onClick:i[1]||(i[1]=_e(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"])]),s("p",kg,[d(p,{placement:"right",options:l(h.name)},{default:$(()=>[d(u,{variant:"ghost",onClick:i[2]||(i[2]=_e(()=>{e.value=!1},["stop"]))},{icon:$(()=>[d(m,{class:"h-4 w-4"})]),_:1})]),_:2},1032,["options"])])]),v<((_=t(Fe).data)==null?void 0:_.length)-1?(r(),c("div",Cg)):A("",!0)],8,yg)}),128))])])):A("",!0)])],64)}}}),Ag={key:0,class:"h-full"},Sg={key:1,class:"h-full"},Vg=N({__name:"FieldDependencyConfig",setup(a){const e=V("fd-list"),l=V("");function o(n,i){e.value=n,l.value=i}return(n,i)=>e.value==="fd-list"?(r(),c("div",Ag,[d($g,{"onUpdate:step":o})])):e.value==="fd"?(r(),c("div",Sg,[d(dg,{"onUpdate:step":o,"field-dependency-name":l.value},null,8,["field-dependency-name"])])):A("",!0)}}),Eg={class:"grid grid-cols-11 items-center gap-4 cursor-pointer hover:bg-gray-50 rounded"},Dg={class:"text-base text-ink-gray-7 font-medium"},Ig={key:0,class:"text-sm w-full text-ink-gray-5 mt-1 whitespace-nowrap overflow-ellipsis overflow-hidden"},Lg={class:"col-span-2"},Bg={class:"flex justify-between items-center w-full pr-2 col-span-2"},Fg={class:"flex flex-col gap-4"},Og={class:"flex gap-2 justify-end"},Mg=N({__name:"AssignmentRuleListItem",props:{data:{type:Object,required:!0}},setup(a){const e=je("assignmentRulesList"),l=a,o=[{label:"Low",value:"0"},{label:"Low-Medium",value:"1"},{label:"Medium",value:"2"},{label:"Medium-High",value:"3"},{label:"High",value:"4"}],n=V({show:!1,name:""}),i=V(!1),m=[{label:"Duplicate",onClick:()=>{n.value={show:!0,name:l.data.name+" (Copy)"}},icon:"copy"},...lt({isConfirmingDelete:i,onConfirmDelete:()=>{fe({url:"frappe.client.delete",params:{doctype:"Assignment Rule",name:l.data.name},onSuccess:()=>{e.reload(),i.value=!1,W.success("Assignment rule deleted")},auto:!0})}})],p=()=>{fe({url:"helpdesk.api.assignment_rule.duplicate_assignment_rule",params:{docname:l.data.name,new_name:n.value.name},onSuccess:v=>{e.reload(),W.success("Assignment rule duplicated"),n.value.show=!1,n.value.name="",Ae.value={screen:"view",data:{name:v.name}}},auto:!0})},f=()=>{h("priority",l.data.priority)},g=()=>{if(!l.data.users_exists&&l.data.disabled){W.error("Cannot enable rule without adding users in it");return}h("disabled",!l.data.disabled,"status")},h=(v,_,y=void 0)=>{fe({url:"frappe.client.set_value",params:{doctype:"Assignment Rule",name:l.data.name,fieldname:v,value:_},onSuccess:()=>{e.reload(),W.success(`Assignment rule ${y||v} updated`)},auto:!0})};return(v,_)=>(r(),c(q,null,[s("div",Eg,[s("div",{onClick:_[0]||(_[0]=y=>Ae.value={screen:"view",data:a.data}),class:"w-full py-3 pl-2 col-span-7"},[s("div",Dg,O(a.data.name),1),a.data.description&&a.data.description.length>0?(r(),c("div",Ig,O(a.data.description),1)):A("",!0)]),s("div",Lg,[d(t(At),{class:"w-max bg-transparent -ml-2 border-0 text-ink-gray-6 focus-visible:!ring-0 bg-none",options:o,modelValue:a.data.priority,"onUpdate:modelValue":[_[1]||(_[1]=y=>a.data.priority=y),f]},null,8,["modelValue"])]),s("div",Bg,[s("div",null,[d(t(tt),{size:"sm",modelValue:!a.data.disabled,"onUpdate:modelValue":g},null,8,["modelValue"])]),s("div",null,[d(t(yt),{placement:"right",options:m},{default:$(()=>[d(t(Q),{icon:"more-horizontal",variant:"ghost",onClick:_[2]||(_[2]=y=>i.value=!1)})]),_:1})])])]),d(t(Le),{options:{title:v.__("Duplicate Assignment Rule")},modelValue:n.value.show,"onUpdate:modelValue":_[6]||(_[6]=y=>n.value.show=y)},{"body-content":$(()=>[s("div",Fg,[d(t(ge),{label:v.__("New Assignment Rule Name"),type:"text",modelValue:n.value.name,"onUpdate:modelValue":_[3]||(_[3]=y=>n.value.name=y)},null,8,["label","modelValue"])])]),actions:$(()=>[s("div",Og,[d(t(Q),{variant:"subtle",label:v.__("Close"),onClick:_[4]||(_[4]=y=>n.value.show=!1)},null,8,["label"]),d(t(Q),{variant:"solid",label:v.__("Duplicate"),onClick:_[5]||(_[5]=y=>p())},null,8,["label"])])]),_:1},8,["options","modelValue"])],64))}}),jg={key:0,class:"flex items-center justify-center mt-12"},Rg={key:1},qg={key:0,class:"flex items-center justify-center rounded-md border border-gray-200 p-4"},Tg={class:"text-sm text-ink-gray-7"},Ng={key:1},Ug={class:"grid grid-cols-11 items-center gap-4 text-sm text-gray-600"},Pg={class:"col-span-7 ml-2"},Hg={class:"col-span-2"},zg={class:"col-span-2"},Qg=N({__name:"AssignmentRulesListView",setup(a){const e=je("assignmentRulesList");return(l,o)=>{var n;return t(e).loading&&!t(e).data?(r(),c("div",jg,[d(t(vt),{class:"w-4"})])):(r(),c("div",Rg,[((n=t(e).data)==null?void 0:n.length)===0?(r(),c("div",qg,[s("div",Tg,O(l.__("No items in the list")),1)])):(r(),c("div",Ng,[s("div",Ug,[s("div",Pg,O(l.__("Assignment rule")),1),s("div",Hg,O(l.__("Priority")),1),s("div",zg,O(l.__("Enabled")),1)]),o[1]||(o[1]=s("hr",{class:"mt-2 mx-2"},null,-1)),(r(!0),c(q,null,G(t(e).data,i=>(r(),c("div",{key:i.name},[d(Mg,{data:i},null,8,["data"]),o[0]||(o[0]=s("hr",{class:"mx-2"},null,-1))]))),128))]))]))}}}),Jg={class:"px-10 py-8 sticky top-0"},Wg={class:"flex items-start justify-between"},Gg={class:"flex flex-col gap-1"},Kg={class:"text-lg font-semibold text-ink-gray-8"},Zg={class:"text-p-sm text-ink-gray-6 max-w-md"},Yg={class:"overflow-y-auto px-10 pb-8"},Xg=N({__name:"AssignmentRulesList",setup(a){const e=fe({url:"helpdesk.api.assignment_rule.get_assignment_rules_list",cache:["assignmentRules","get_assignment_rules_list"],auto:!0});$t("assignmentRulesList",e);const l=()=>{Is(),Ae.value={screen:"view",data:null}};return(o,n)=>(r(),c(q,null,[s("div",Jg,[s("div",Wg,[s("div",Gg,[s("h1",Kg,O(o.__("Assignment rules")),1),s("p",Zg,O(o.__("Assignment Rules automatically route tickets to the right team members based on predefined conditions.")),1)]),d(t(Q),{label:o.__("Create new"),theme:"gray",variant:"solid",onClick:n[0]||(n[0]=i=>l()),"icon-left":"plus"},null,8,["label"])])]),s("div",Yg,[d(Qg)])],64))}}),ey={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl w-60"},ty={class:"relative px-1.5 pt-0.5"},ly={class:"flex gap-2 items-center w-full select-none"},sy={class:"flex flex-col gap-1"},ny={class:"font-semibold text-ink-gray-7"},ay={class:"text-ink-gray-6"},oy={key:0,class:"mt-1.5 rounded-md p-1.5 text-base text-gray-600"},iy={class:"border-t p-1.5 pb-0.5"},ry=N({__name:"AssigneeSearch",emits:["addAssignee"],setup(a,{emit:e}){const l=e,o=V(""),n=V(!1);It(()=>o.value,f=>{const g={full_name:void 0,email:void 0};f.includes("@")||f.includes(".")?g.email=["like",`%${f}%`]:g.full_name=["like",`%${f}%`],i.update({filters:g}),i.reload()},{debounce:500});const i=ut({doctype:"User",fields:["name","email","full_name","user_image"],start:0,pageLength:5,auto:!0,transform:f=>f.map(g=>g.full_name=="Administrator"?{...g,email:"Administrator",user:"Administrator"}:{...g,user:g.email}).filter(g=>g.full_name!="Guest")}),u=P(()=>{var f;return((f=i.data)==null?void 0:f.filter(g=>!H.value.users.some(h=>h.user===g.email)))||[]}),m=f=>{f.forEach(g=>{p({user:g})})},p=f=>{H.value.users.some(h=>h.user===f.user)||(H.value.users.push({full_name:f.full_name,email:f.email,user_image:f.user_image,user:f.email}),l("addAssignee",f))};return(f,g)=>{const h=J("Button"),v=J("FeatherIcon");return r(),c(q,null,[d(t(Kl),{multiple:!0},{default:$(()=>[d(t(De),{placement:"bottom-end"},{target:$(({togglePopover:_})=>[d(h,{variant:"subtle","icon-left":"plus",onClick:y=>_(),label:f.__("Add Assignee")},null,8,["onClick","label"])]),body:$(({togglePopover:_})=>[s("div",ey,[s("div",ty,[d(t(Zl),{ref:"search",class:"form-input w-full",type:"text",onChange:g[0]||(g[0]=y=>{o.value=y.target.value}),value:o.value,autocomplete:"off",placeholder:f.__("Search")},null,8,["value","placeholder"]),s("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:g[1]||(g[1]=y=>o.value="")},[d(v,{name:"x",class:"w-4"})])]),d(t(Yl),{class:"my-2 max-h-64 overflow-y-auto px-1.5",static:""},{default:$(()=>[(r(!0),c(q,null,G(u.value,y=>Ee((r(),D(t(Xl),{key:y.username,value:y,as:"template",onClick:w=>{w.stopPropagation(),p(y)}},{default:$(({active:w})=>[s("li",{class:se(["flex items-center rounded p-1.5 w-full text-base",{"bg-gray-100":w}])},[s("div",ly,[d(t(ht),{shape:"circle",image:y.user_image,label:y.full_name,size:"lg"},null,8,["image","label"]),s("div",sy,[s("div",ny,O(y.full_name),1),s("div",ay,O(y.email),1)])])],2)]),_:2},1032,["value","onClick"])),[[Ye,u.value.length>0]])),128)),u.value.length==0?(r(),c("li",oy,O(f.__("No results found")),1)):A("",!0)]),_:1}),s("div",iy,[d(h,{variant:"ghost",class:"w-full","icon-left":"plus",label:f.__("Invite agent"),onClick:()=>{n.value=!0,_()}},null,8,["label","onClick"])])])]),_:1})]),_:1}),d(ms,{title:f.__("Add Agents"),onClose:g[2]||(g[2]=_=>n.value=!1),modelValue:n.value,show:n.value,"onUpdate:modelValue":g[3]||(g[3]=_=>n.value=_),onOnAgentsInvited:m},null,8,["title","modelValue","show"])],64)}}}),uy={class:"flex flex-col gap-1"},dy={class:"text-lg font-semibold text-ink-gray-8"},cy={class:"text-p-sm text-ink-gray-6"},py={class:"mt-8 flex items-center justify-between gap-2"},my={class:"text-base font-medium text-ink-gray-8"},fy={class:"text-p-sm text-ink-gray-6 mt-1"},vy=["onClick"],gy={class:"p-1 text-ink-gray-7 mt-1 w-48 bg-white shadow-xl rounded"},yy=["onClick"],hy={class:"mt-7 flex items-center justify-between gap-2"},_y={class:"text-base font-medium text-ink-gray-8"},by={class:"text-p-sm text-ink-gray-6 mt-1"},xy={class:"mt-4 flex flex-wrap gap-2"},wy={class:"text-ink-gray-7"},ky={class:"text-xs rounded-full select-none bg-blue-600 text-white p-0.5 px-2"},Cy=N({__name:"AssigneeRules",setup(a){const{getUser:e}=wl(),l=[{label:"Auto-rotate",value:"Round Robin"},{label:"Assign by workload",value:"Load Balancing"}],o=i=>{H.value.users=H.value.users.filter(u=>u.user!==i.name),ft("users")},n=P(()=>{const i=[];return H.value.users.forEach(u=>{i.push(e(u.user))}),i});return(i,u)=>{const m=J("FeatherIcon");return r(),c("div",null,[s("div",uy,[s("span",dy,O(i.__("Assignee Rules")),1),s("span",cy,O(i.__("Define who receives the tickets and how theyre distributed among agents.")),1)]),s("div",py,[s("div",null,[s("div",my,O(i.__("Ticket Routing")),1),s("div",fy,O(i.__("Choose how tickets are distributed among selected assignees.")),1)]),s("div",null,[d(t(De),{placement:"bottom-end"},{target:$(({togglePopover:p})=>{var f;return[s("div",{class:"flex items-center justify-between text-base rounded h-7 py-1.5 pl-2 pr-2 border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full dark:[color-scheme:dark] select-none min-w-40",onClick:g=>p()},[s("div",null,O((f=l.find(g=>g.value==t(H).rule))==null?void 0:f.label),1),d(m,{name:"chevron-down",class:"size-4"})],8,vy)]}),body:$(({togglePopover:p})=>[s("div",gy,[(r(),c(q,null,G(l,f=>s("div",{key:f.value,class:"p-2 cursor-pointer hover:bg-gray-50 text-sm flex items-center justify-between rounded",onClick:()=>{t(H).rule=f.value,p()}},[s("span",null,O(f.label),1),t(H).rule==f.value?(r(),D(m,{key:0,name:"check",class:"size-4"})):A("",!0)],8,yy)),64))])]),_:1})])]),s("div",hy,[s("div",null,[s("div",_y,O(i.__("Assignees")),1),s("div",by,O(i.__("Choose who receives the tickets.")),1)]),d(ry,{onAddAssignee:u[0]||(u[0]=p=>t(ft)("users"))})]),s("div",xy,[(r(!0),c(q,null,G(n.value,p=>(r(),c("div",{key:p.name,class:"flex items-center gap-2 text-sm bg-surface-gray-2 rounded-md p-1 w-max px-2 select-none"},[d(t(ht),{image:p.user_image,label:p.full_name,size:"sm"},null,8,["image","label"]),s("div",wy,O(p.full_name),1),p.email==t(H).lastUser?(r(),D(t(bl),{key:0,text:i.__("Last user assigned by this rule"),"hover-delay":.35,placement:"top"},{default:$(()=>[s("div",ky,O(i.__("Last")),1)]),_:1},8,["text"])):A("",!0),d(t(Q),{variant:"ghost",icon:"x",onClick:f=>o(p)},null,8,["onClick"])]))),128))]),d(t(Me),{message:t(ve).users},null,8,["message"])])}}}),$y={class:"flex items-center justify-between"},Nl=N({__name:"AssignmentRulesSection",props:{conditions:Array,name:String,errors:String},setup(a){const e=a,l=()=>{let i="and";return e.conditions.forEach(u=>{typeof u=="string"&&(i=u)}),i},o=[{label:"Add condition",onClick:()=>{n()}},{label:"Add condition group",onClick:()=>{const i=l();e.conditions.push(i,[[]])}}],n=()=>{if(!qt(e.conditions))return;const u=l();e.conditions.push(u,["","",""])};return It(()=>[...e.conditions],()=>{ft(e.name)},{deep:!0,debounce:300}),(i,u)=>(r(),c(q,null,[e.conditions.length>0?(r(),D(Xt,{key:0,conditions:e.conditions,level:0,disableAddCondition:e.errors!==""},null,8,["conditions","disableAddCondition"])):A("",!0),e.conditions.length==0?(r(),c("div",{key:1,class:"flex p-4 items-center cursor-pointer justify-center gap-2 text-sm border border-gray-300 text-gray-600 rounded-md",onClick:u[0]||(u[0]=m=>{e.conditions.push(["","",""]),t(ft)(e.name)})},[d(t(Oe),{name:"plus",class:"h-4"}),le(" "+O(i.__("Add a condition")),1)])):A("",!0),s("div",$y,[e.conditions.length>0?(r(),D(t(yt),{key:0,class:"mt-2",options:o},{default:$(({open:m})=>[d(t(Q),{disabled:e.errors!=="","icon-right":m?"chevron-up":"chevron-down",label:i.__("Add condition")},null,8,["disabled","icon-right","label"])]),_:1})):A("",!0),e.conditions.length>0?(r(),D(t(Me),{key:1,message:e.errors,class:"mt-2"},null,8,["message"])):A("",!0)])],64))}}),Ay={class:"grid py-3.5 px-4 items-center",style:{"grid-template-columns":"3fr 1fr"}},Sy={class:"text-ink-gray-7 font-medium"},Vy={class:"flex justify-start"},Ey={key:0},Dy=N({__name:"AssignmentScheduleItem",props:{data:{type:Object,required:!0},isLast:{type:Boolean,default:!1}},setup(a){const e=a,l=o=>{const n=H.value.assignmentDays.findIndex(i=>i===e.data.day);o&&n===-1?H.value.assignmentDays.push(e.data.day):H.value.assignmentDays.splice(n,1)};return(o,n)=>(r(),c(q,null,[s("div",Ay,[s("div",Sy,O(a.data.day),1),s("div",Vy,[d(t(tt),{modelValue:a.data.active,"onUpdate:modelValue":[n[0]||(n[0]=i=>a.data.active=i),l]},null,8,["modelValue"])])]),a.isLast?A("",!0):(r(),c("hr",Ey))],64))}}),Iy={class:"rounded-md border px-2 border-gray-300 text-sm"},Ly={class:"grid p-2 px-4 items-center",style:{"grid-template-columns":"3fr 1fr"}},By=N({__name:"AssignmentSchedule",setup(a){const e=[{label:"Days",key:"day"},{label:"Active",key:"active"}],l=V([{day:"Monday",active:!1},{day:"Tuesday",active:!1},{day:"Wednesday",active:!1},{day:"Thursday",active:!1},{day:"Friday",active:!1},{day:"Saturday",active:!1},{day:"Sunday",active:!1}]);return Ce(()=>{H.value.assignmentDays.forEach(o=>{const n=l.value.find(i=>i.day===o);n&&(n.active=!0)})}),(o,n)=>(r(),c(q,null,[s("div",Iy,[s("div",Ly,[(r(),c(q,null,G(e,i=>s("div",{key:i.key,class:"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis"},O(i.label),1)),64))]),n[0]||(n[0]=s("hr",null,null,-1)),(r(!0),c(q,null,G(l.value,(i,u)=>(r(),D(Dy,{key:i.day,data:i,isLast:u===l.value.length-1},null,8,["data","isLast"]))),128))]),d(t(Me),{message:t(ve).assignmentDays,class:"mt-2"},null,8,["message"])],64))}}),Fy={key:0,class:"flex items-center h-full justify-center"},Oy={key:1,class:"sticky top-0 z-10 bg-white pb-6 px-10 py-8"},My={class:"flex items-center justify-between w-full"},jy={class:"flex items-center gap-2"},Ry={class:"flex items-center gap-4"},qy={class:"text-sm text-ink-gray-7"},Ty={key:2,class:"overflow-y-auto px-10 pb-8"},Ny={class:"grid grid-cols-2 gap-5"},Uy={class:"flex flex-col gap-1.5"},Py=["onClick"],Hy={class:"p-1 text-ink-gray-6 top-1 absolute w-full bg-white shadow-2xl rounded"},zy=["onClick"],Qy={class:"flex flex-col gap-1"},Jy={class:"text-lg font-semibold text-ink-gray-8"},Wy={class:"flex items-center justify-between gap-6"},Gy={class:"text-p-sm text-ink-gray-6"},Ky={class:"font-medium underline",href:"https://docs.frappe.io/helpdesk/assignment-rule",target:"_blank"},Zy={key:0},Yy={class:"text-sm text-ink-gray-6 flex gap-1 cursor-default text-nowrap flex items-center"},Xy={class:"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5"},eh={class:"mt-5"},th={key:0,class:"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-gray-300 rounded-md p-3 py-4"},lh={class:"flex flex-col gap-1"},sh={class:"text-lg font-semibold text-ink-gray-8"},nh={class:"flex items-center justify-between gap-6"},ah={class:"text-p-sm text-ink-gray-6"},oh={class:"font-medium underline",href:"https://docs.frappe.io/helpdesk/assignment-rule",target:"_blank"},ih={key:0},rh={class:"text-sm text-ink-gray-6 flex gap-1 cursor-default text-nowrap flex items-center"},uh={class:"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5"},dh={class:"mt-5"},ch={key:0,class:"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-gray-300 rounded-md p-3 py-4"},ph={class:"flex flex-col gap-1"},mh={class:"text-lg font-semibold text-ink-gray-8"},fh={class:"text-p-sm text-ink-gray-6"},vh={class:"mt-6"},gh=N({__name:"AssignmentRuleView",setup(a){var w,I;const e=V(!1),l=V(null),o=V(!1),n=V({show:!1,title:"",message:"",onConfirm:()=>{}}),i=V(!0),u=V(!1),m=`${window.location.origin}/app/assignment-rule/${(w=Ae.value.data)==null?void 0:w.name}`,p=fe({url:"frappe.client.get",params:{doctype:"Assignment Rule",name:(I=Ae.value.data)==null?void 0:I.name},auto:!!Ae.value.data,onSuccess(S){var b,x;H.value={loading:!1,assignCondition:S.assign_condition,unassignCondition:S.unassign_condition,assignConditionJson:JSON.parse(S.assign_condition_json||"[]"),unassignConditionJson:JSON.parse(S.unassign_condition_json||"[]"),rule:S.rule,priority:S.priority,users:S.users,disabled:S.disabled,description:S.description,name:S.name,assignmentRuleName:S.name,assignmentDays:S.assignment_days.map(E=>E.day)},l.value=JSON.stringify(H.value);const k=((b=H.value.assignCondition)==null?void 0:b.length)>0,L=((x=H.value.assignConditionJson)==null?void 0:x.length)>0;k&&!L?(i.value=!1,u.value=!0):(i.value=!0,u.value=!1)}});Ae.value.data||(Ve.value=!0);const f=()=>{const S={show:!0,title:"Unsaved changes",message:"Are you sure you want to go back? Unsaved changes will be lost.",onConfirm:f};if(e.value&&!n.value.show){n.value=S;return}if(!Ae.value.data&&!n.value.show){n.value=S;return}setTimeout(()=>{Ae.value={screen:"list",data:null}},250),n.value.show=!1},g=()=>{const S=ft(void 0,!i.value);if(Object.values(S).some(k=>k)){W.error("Invalid fields, check if all are filled in and values are correct.");return}if(Ae.value.data){if(u.value&&i.value){n.value={show:!0,title:"Confirm overwrite",message:"Your old condition will be overwritten. Are you sure you want to save?",onConfirm:()=>{_(),n.value.show=!1}};return}_()}else h()},h=()=>{o.value=!0,fe({url:"frappe.client.insert",params:{doc:{doctype:"Assignment Rule",document_type:"HD Ticket",rule:H.value.rule,priority:H.value.priority,users:H.value.users,disabled:H.value.disabled,description:H.value.description,assignment_days:H.value.assignmentDays.map(S=>({day:S})),name:H.value.assignmentRuleName,assignment_rule_name:H.value.assignmentRuleName,assign_condition:Ct({conditions:H.value.assignConditionJson}),unassign_condition:Ct({conditions:H.value.unassignConditionJson}),assign_condition_json:JSON.stringify(H.value.assignConditionJson),unassign_condition_json:JSON.stringify(H.value.unassignConditionJson)}},auto:!0,onSuccess(S){p.submit({doctype:"Assignment Rule",name:S.name}).then(()=>{o.value=!1,W.success("Assignment rule created")}),Ae.value={screen:"view",data:S}},onError:()=>{o.value=!1}})},v=[{label:"Low",value:"0"},{label:"Low-Medium",value:"1"},{label:"Medium",value:"2"},{label:"Medium-High",value:"3"},{label:"High",value:"4"}],_=async()=>{o.value=!0,await et("frappe.client.set_value",{doctype:"Assignment Rule",document_type:"HD Ticket",name:H.value.name,fieldname:{rule:H.value.rule,priority:H.value.priority,users:H.value.users,disabled:H.value.disabled,description:H.value.description,assignment_days:H.value.assignmentDays.map(S=>({day:S})),assign_condition:i.value?Ct({conditions:H.value.assignConditionJson}):H.value.assignCondition,unassign_condition:i.value?Ct({conditions:H.value.unassignConditionJson}):H.value.unassignCondition,assign_condition_json:i.value?JSON.stringify(H.value.assignConditionJson):null,unassign_condition_json:i.value?JSON.stringify(H.value.unassignConditionJson):null}}).catch(S=>{var L;const k=((L=S==null?void 0:S.messages)==null?void 0:L[0])||"Some error occurred while updating assignment rule";W.error(k),o.value=!1}),H.value.name!==H.value.assignmentRuleName?(await et("frappe.client.rename_doc",{doctype:"Assignment Rule",old_name:H.value.name,new_name:H.value.assignmentRuleName}).catch(async S=>{var L;const k=((L=S==null?void 0:S.messages)==null?void 0:L[0])||"Some error occurred while renaming assignment rule";W.error(k),await p.reload(),o.value=!1}),await p.submit({doctype:"Assignment Rule",name:H.value.assignmentRuleName})):p.reload(),o.value=!1,W.success("Assignment rule updated")};me(H,S=>{l.value&&(e.value=JSON.stringify(S)!=l.value,e.value?Ve.value=!0:Ve.value=!1)},{deep:!0});const y=S=>{e.value&&(S.preventDefault(),S.returnValue=!0)};return Ce(()=>{addEventListener("beforeunload",y)}),Je(()=>{rd(),Is(),removeEventListener("beforeunload",y),Ve.value=!1}),(S,k)=>{const L=J("FeatherIcon");return r(),c(q,null,[t(p).loading?(r(),c("div",Fy,[d(t(vt),{class:"w-4"})])):A("",!0),t(p).loading?A("",!0):(r(),c("div",Oy,[s("div",My,[s("div",jy,[d(t(Q),{variant:"ghost","icon-left":"chevron-left",label:t(H).assignmentRuleName||"New Assignment Rule",size:"md",onClick:k[0]||(k[0]=b=>f()),class:"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-xl hover:opacity-70 !pr-0 !max-w-96 !justify-start"},null,8,["label"]),e.value?(r(),D(t(sl),{key:0,variant:"subtle",theme:"orange",size:"sm",label:S.__("Unsaved")},null,8,["label"])):A("",!0)]),s("div",Ry,[s("div",{class:"flex items-center justify-between gap-2",onClick:k[1]||(k[1]=b=>t(H).disabled=!t(H).disabled)},[d(t(tt),{size:"sm","model-value":!t(H).disabled},null,8,["model-value"]),s("span",qy,O(S.__("Enabled")),1)]),d(t(Q),{disabled:!!(!e.value&&t(Ae).data),label:S.__("Save"),theme:"gray",variant:"solid",onClick:k[2]||(k[2]=b=>g()),loading:o.value||t(p).loading},null,8,["disabled","label","loading"])])])])),t(p).loading?A("",!0):(r(),c("div",Ty,[s("div",Ny,[s("div",null,[d(t(ge),{type:"text",size:"sm",variant:"subtle",placeholder:"Name",label:"Name",modelValue:t(H).assignmentRuleName,"onUpdate:modelValue":k[3]||(k[3]=b=>t(H).assignmentRuleName=b),required:"",maxlength:"50",onChange:k[4]||(k[4]=b=>t(ft)("assignmentRuleName"))},null,8,["modelValue"]),d(t(Me),{message:t(ve).assignmentRuleName,class:"mt-2"},null,8,["message"])]),s("div",Uy,[d(t(We),{label:"Priority"}),d(t(De),null,{target:$(({togglePopover:b})=>{var x;return[s("div",{class:"flex items-center justify-between text-base rounded h-7 py-1.5 pl-2 pr-2 border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full dark:[color-scheme:dark] cursor-default",onClick:E=>b()},[s("div",null,O((x=v.find(E=>E.value==t(H).priority))==null?void 0:x.label),1),d(L,{name:"chevron-down",class:"size-4"})],8,Py)]}),body:$(({togglePopover:b})=>[s("div",Hy,[(r(),c(q,null,G(v,x=>s("div",{key:x.value,class:"p-2 cursor-pointer hover:bg-gray-50 text-base flex items-center justify-between rounded",onClick:E=>{t(H).priority=x.value,b()}},[le(O(x.label)+" ",1),t(H).priority==x.value?(r(),D(L,{key:0,name:"check",class:"size-4"})):A("",!0)],8,zy)),64))])]),_:1})]),s("div",null,[d(t(ge),{type:"textarea",size:"sm",variant:"subtle",placeholder:"Description",label:"Description",required:"",maxlength:"250",onChange:k[5]||(k[5]=b=>t(ft)("description")),modelValue:t(H).description,"onUpdate:modelValue":k[6]||(k[6]=b=>t(H).description=b)},null,8,["modelValue"]),d(t(Me),{message:t(ve).description,class:"mt-2"},null,8,["message"])])]),k[14]||(k[14]=s("hr",{class:"my-8"},null,-1)),s("div",null,[s("div",Qy,[s("span",Jy,O(S.__("Assignment condition")),1),s("div",Wy,[s("span",Gy,[le(O(S.__("Choose which tickets are affected by this assignment rule."))+" ",1),s("a",Ky,O(S.__("Learn about conditions")),1)]),u.value&&t(Ae).data?(r(),c("div",Zy,[d(t(De),{trigger:"hover",hoverDelay:.25,placement:"top-end"},{target:$(()=>[s("div",Yy,[s("span",null,O(S.__("Old Condition")),1),d(L,{name:"info",class:"size-4"})])]),"body-main":$(()=>[s("div",Xy,[s("code",null,O(t(H).assignCondition),1)])]),_:1})])):A("",!0)])]),s("div",eh,[!i.value&&t(H).assignCondition?(r(),c("div",th,[s("span",{class:"text-p-sm"},[k[10]||(k[10]=le(" Conditions for this rule were created from ",-1)),s("a",{href:m,target:"_blank",class:"underline"},"desk"),k[11]||(k[11]=le(" which are not compatible with this UI, you will need to recreate the conditions here if you want to manage and add new conditions from this UI. ",-1))]),d(t(Q),{label:"I understand, add conditions",variant:"subtle",theme:"gray",onClick:k[7]||(k[7]=b=>i.value=!0)})])):(r(),D(Nl,{key:1,conditions:t(H).assignConditionJson,name:"assignCondition",errors:t(ve).assignConditionError},null,8,["conditions","errors"])),d(t(Me),{message:t(ve).assignCondition,class:"mt-2"},null,8,["message"])])]),k[15]||(k[15]=s("hr",{class:"my-8"},null,-1)),s("div",null,[s("div",lh,[s("span",sh,O(S.__("Unassignment condition")),1),s("div",nh,[s("span",ah,[le(O(S.__("Choose which tickets are affected by this un-assignment rule."))+" ",1),s("a",oh,O(S.__("Learn about conditions")),1)]),u.value&&t(Ae).data&&t(H).unassignCondition?(r(),c("div",ih,[d(t(De),{trigger:"hover",hoverDelay:.25,placement:"top-end"},{target:$(()=>[s("div",rh,[s("span",null,O(S.__("Old Condition")),1),d(L,{name:"info",class:"size-4"})])]),"body-main":$(()=>[s("div",uh,[s("code",null,O(t(H).unassignCondition),1)])]),_:1})])):A("",!0)])]),s("div",dh,[!i.value&&t(H).unassignCondition?(r(),c("div",ch,[s("span",{class:"text-p-sm"},[k[12]||(k[12]=le(" Conditions for this rule were created from ",-1)),s("a",{href:m,target:"_blank",class:"underline"},"desk"),k[13]||(k[13]=le(" which are not compatible with this UI, you will need to recreate the conditions here if you want to manage and add new conditions from this UI. ",-1))]),d(t(Q),{label:"I understand, add conditions",variant:"subtle",theme:"gray",onClick:k[8]||(k[8]=b=>i.value=!0)})])):(r(),D(Nl,{key:1,conditions:t(H).unassignConditionJson,name:"unassignCondition",errors:t(ve).unassignConditionError},null,8,["conditions","errors"]))])]),k[16]||(k[16]=s("hr",{class:"my-8"},null,-1)),s("div",null,[s("div",ph,[s("span",mh,O(S.__("Assignment Schedule")),1),s("span",fh,O(S.__("Choose the days of the week when this rule should be active.")),1)]),s("div",vh,[d(By)])]),k[17]||(k[17]=s("hr",{class:"my-8"},null,-1)),d(Cy)])),d(al,{modelValue:n.value.show,"onUpdate:modelValue":k[9]||(k[9]=b=>n.value.show=b),title:n.value.title,message:n.value.message,onConfirm:n.value.onConfirm,onCancel:()=>n.value.show=!1},null,8,["modelValue","title","message","onConfirm","onCancel"])],64)}}}),yh={class:"pb-8"},hh=N({__name:"AssignmentRules",setup(a){return(e,l)=>(r(),c("div",yh,[t(Ae).screen==="list"?(r(),D(Xg,{key:0})):A("",!0),t(Ae).screen==="view"?(r(),D(gh,{key:1})):A("",!0)]))}}),el=[{label:"Email Accounts",icon:Y(ps),component:Y(Xu)},{label:"Branding",icon:Y(Vr),component:Y(mu)},{label:"Agents",icon:Y(na),component:Y(iu)},{label:"Teams",icon:Y(aa),component:Y(Dd)},{label:"SLA Policies",icon:Y(Br),component:Y(fm)},{label:"Business Holidays",icon:Y(Mr),component:Y(Yf)},{label:"Field Dependencies",icon:Y(ii),component:Y(Vg)},{label:"Assignment Rules",icon:Y(ce(Es,{class:"rotate-90"})),component:Y(hh)}],kt=V(el[0]),Ve=V(!1),Tt=a=>{kt.value=el.find(e=>e.label===a)},_h={class:"flex",style:{height:"calc(100vh - 8rem)"}},bh={class:"flex w-52 shrink-0 flex-col bg-gray-50 p-2"},xh={class:"mt-3 space-y-1"},wh=["onClick"],kh={class:"text-base text-gray-800"},Ch={class:"flex flex-1 flex-col bg-surface-modal"},$h=N({__name:"SettingsModal",props:Ue({defaultTab:{default:0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=a,l=Re(a,"modelValue");return me(()=>e.defaultTab,o=>{kt.value=el[o]}),(o,n)=>(r(),D(t(Le),{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=i=>l.value=i),options:{size:"5xl"},disableOutsideClickToClose:t(Ve)},{body:$(()=>[s("div",_h,[s("div",bh,[n[1]||(n[1]=s("h1",{class:"px-2 pt-2 text-lg font-semibold"},"Settings",-1)),s("div",xh,[(r(!0),c(q,null,G(t(el),i=>{var u;return r(),c("button",{key:i.label,class:se(["flex h-7 w-full items-center gap-2 rounded px-2 py-1",[((u=t(kt))==null?void 0:u.label)==i.label?"bg-white shadow-sm":"hover:bg-gray-100"]]),onClick:m=>kt.value=i},[(r(),D(Qe(i.icon),{class:"h-4 w-4 text-gray-700"})),s("span",kh,O(i.label),1)],10,wh)}),128))])]),s("div",Ch,[t(kt)?(r(),D(Qe(t(kt).component),{key:0,class:"h-full flex flex-col w-full"})):A("",!0)])])]),_:1},8,["modelValue","disableOutsideClickToClose"]))}}),Ts=V("https://frappecloud.com"),Ns=V(""),Ah=fe({url:"frappe.integrations.frappe_providers.frappecloud_billing.current_site_info",cache:"currentSiteInfo",onSuccess:a=>{Ts.value=a.base_url,Ns.value=a.site_name}}),Sh=()=>{Ah.fetch();const{$dialog:a}=ss();a({title:"Login to Frappe Cloud?",message:"Are you sure you want to login to your Frappe Cloud dashboard?",actions:[{label:"Confirm",variant:"solid",onClick(e){Vh(),e()}}]})},Vh=()=>{window.open(`${Ts.value}/dashboard/sites/${Ns.value}`,"_blank")},Eh={class:"lucide lucide-arrow-left-from-line",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Dh(a,e){return r(),c("svg",Eh,[...e[0]||(e[0]=[s("path",{d:"m9 6-6 6 6 6"},null,-1),s("path",{d:"M3 12h14"},null,-1),s("path",{d:"M21 19V5"},null,-1)])])}const Ih=Y({name:"lucide-arrow-left-from-line",render:Dh}),Lh={class:"lucide lucide-arrow-right-from-line",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Bh(a,e){return r(),c("svg",Lh,[...e[0]||(e[0]=[s("path",{d:"M3 5v14"},null,-1),s("path",{d:"M21 12H7"},null,-1),s("path",{d:"m15 18 6-6-6-6"},null,-1)])])}const Fh=Y({name:"lucide-arrow-right-from-line",render:Bh}),Oh={class:"lucide lucide-globe",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Mh(a,e){return r(),c("svg",Oh,[...e[0]||(e[0]=[s("circle",{cx:"12",cy:"12",r:"10"},null,-1),s("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"},null,-1),s("path",{d:"M2 12h20"},null,-1)])])}const jh=Y({name:"lucide-globe",render:Mh}),Rh={class:"lucide lucide-mail-open",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function qh(a,e){return r(),c("svg",Rh,[...e[0]||(e[0]=[s("path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z"},null,-1),s("path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10"},null,-1)])])}const Th=Y({name:"lucide-mail-open",render:qh}),Nh={class:"lucide lucide-message-circle",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Uh(a,e){return r(),c("svg",Nh,[...e[0]||(e[0]=[s("path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},null,-1)])])}const Ph=Y({name:"lucide-message-circle",render:Uh}),Hh={class:"lucide lucide-timer",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function zh(a,e){return r(),c("svg",Hh,[...e[0]||(e[0]=[s("line",{x1:"10",x2:"14",y1:"2",y2:"2"},null,-1),s("line",{x1:"12",x2:"15",y1:"14",y2:"11"},null,-1),s("circle",{cx:"12",cy:"14",r:"8"},null,-1)])])}const Qh=Y({name:"lucide-timer",render:zh}),Jh={class:"lucide lucide-user-pen",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Wh(a,e){return r(),c("svg",Jh,[...e[0]||(e[0]=[s("path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2"},null,-1),s("path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"},null,-1),s("circle",{cx:"10",cy:"7",r:"4"},null,-1)])])}const Gh=Y({name:"lucide-user-pen",render:Wh}),Kh={class:"lucide lucide-user-plus",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Zh(a,e){return r(),c("svg",Kh,[...e[0]||(e[0]=[s("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},null,-1),s("circle",{cx:"9",cy:"7",r:"4"},null,-1),s("line",{x1:"19",x2:"19",y1:"8",y2:"14"},null,-1),s("line",{x1:"22",x2:"16",y1:"11",y2:"11"},null,-1)])])}const Yh=Y({name:"lucide-user-plus",render:Zh}),Xh={class:"flex items-center gap-0.5 font-medium text-gray-600"},e1={key:2,class:"mb-4"},t1={key:0,class:"absolute z-20 h-1.5 w-1.5 translate-x-6 translate-y-1 rounded-full bg-blue-400 left-1",theme:"gray",variant:"solid"},l1={class:"overflow-y-auto overflow-x-hidden"},s1={key:0,class:"mx-2 my-2 h-1 border-b"},n1=["onClick"],a1={class:"flex flex-col"},o1={class:"flex flex-col gap-1"},i1=N({__name:"Sidebar",setup(a){const{isMobileView:e}=Mn(),l=jn(),o=Rn(),n=xl(),i=ls(),{isExpanded:u,width:m}=qn(ts()),p=Tn();ss();const f=V(!1),{pinnedViews:g,publicViews:h}=Un(),v=V(window.is_fc_site),_=P(()=>{var Ge,qe;const te=[{label:"All Views",hideLabel:!0,opened:!0,views:Ne.value?Gn:Kn}];return(Ge=h.value)!=null&&Ge.length&&!Ne.value&&te.push({label:"Public Views",opened:!0,hideLabel:!1,views:y(h.value)}),(qe=g.value)!=null&&qe.length&&te.push({label:"Private Views",opened:!0,hideLabel:!1,views:y(g.value)}),te});function y(ne){return ne.map(te=>({label:te.label,icon:te.icon,to:{name:te.route_name,query:{view:te.name}},onClick:()=>{Pn.value={label:te.label,icon:te.icon}}}))}const w=P(()=>[{label:"Log out",icon:"log-out",onClick:()=>n.logout()}]),I=P(()=>[{component:Y(Zn)},{label:"Customer portal",icon:"users",onClick:()=>{const ne=o.resolve({name:"TicketsCustomer"});window.open(ne.href)}},{icon:"life-buoy",label:"Support",onClick:()=>window.open("https://t.me/frappedesk")},{icon:"book-open",label:"Docs",onClick:()=>window.open("https://docs.frappe.io/helpdesk")},{label:"Login to Frappe Cloud",icon:si,onClick:()=>Sh(),condition:()=>!e.value&&window.is_fc_site},{label:"Settings",icon:"settings",onClick:()=>f.value=!0,condition:()=>n.isAdmin||n.isManager},{group:"Danger",hideLabel:!0,items:[{label:"Log out",icon:"log-out",onClick:()=>n.logout()}]}]),S=P(()=>Ne.value?w.value:I.value);function k(ne){var te;return l.query.view?l.query.view==((te=ne==null?void 0:ne.query)==null?void 0:te.view):l.name===ne}function L(){window.dispatchEvent(new KeyboardEvent("keydown",{key:"k",metaKey:!0}))}const b=ce(Yn,{class:"h-12 w-12"},null),x=V(0),E=P(()=>!Ne.value&&!T.value&&n.isManager),C=[{name:"setup_email_account",title:"Connect your support email",completed:!1,icon:Y(ps),onClick:()=>{$e.value=!0,f.value=!0,x.value=0}},{name:"invite_agents",title:"Invite agents",completed:!1,icon:Y(Yh),onClick:()=>{$e.value=!0,f.value=!0,x.value=2,setTimeout(()=>{pt.value=!0},300)}},{name:"setup_sla",title:"Setup SLA",completed:!1,icon:Y(Qh),onClick:()=>{Tt("SLA Policies"),f.value=!0,$e.value=!0}},{name:"create_first_ticket",title:"Create a ticket",completed:!1,icon:Y(Hn),onClick:()=>{o.push({name:"TicketAgentNew"}),$e.value=!0}},{name:"assign_to_agent",title:"Assign a ticket to an agent",completed:!1,icon:Y(Gh),onClick:async()=>{await Z(),zn.value=!0,$e.value=!0}},{name:"reply_on_ticket",title:"Reply on a ticket",completed:!1,icon:Y(Th),onClick:async()=>{await Z(),Dl.value=!0,Il.value=!1,$e.value=!0}},{name:"comment_on_ticket",title:"Add a comment on a ticket",completed:!1,icon:Y(Ph),onClick:async()=>{await Z(),Il.value=!0,Dl.value=!1,$e.value=!0}},{name:"first_article",title:"Create an article",completed:!1,icon:Y(Qn),onClick:async()=>{const ne=await nt();o.push({name:"NewArticle",query:{title:"General"},params:{id:ne}}),$e.value=!0}},{name:"add_invite_contact",title:"Create & invite a contact",completed:!1,icon:Y(ci),onClick:()=>{console.log("clicked"),$e.value=!0,R.value={title:"Create & invite a contact",buttonLabel:"Create",videoURL:"/assets/helpdesk/desk/videos/createInviteContact.mp4",onClick:async()=>{M.value=!1,o.push({name:"ContactList"}),va.value=!0}},M.value=!0}},{name:"explore_customer_portal",title:"Explore customer portal",completed:!1,icon:Y(jh),onClick:()=>{window.open("/helpdesk/my-tickets","_blank"),B("explore_customer_portal"),$e.value=!0}}],F=V([{title:"Introduction",opened:!1,subArticles:[{name:"introduction",title:"Introduction"},{name:"setting-up",title:"Setting up"}]},{title:"Getting Started",opened:!1,subArticles:[{name:"lesson-1-your-first-ticket",title:"Creating a ticket"},{name:"lesson-2understanding-ticket-view",title:"Understanding ticket view"},{name:"lesson-3-agents-teams",title:"Agents & Teams"},{name:"customers-contacts",title:"Customers & Contacts"},{name:"lesson-4-knowledge-base",title:"Knowledge Base"},{name:"customer-portal",title:"Customer Portal"}]},{title:"Masters",opened:!1,subArticles:[{name:"ticket",title:"Ticket"},{name:"agent",title:"Agent"},{name:"team",title:"Team"},{name:"contact",title:"Contact"},{name:"customer",title:"Customer"},{name:"knowledge-base",title:"Knowledge Base"},{name:"canned-response",title:"Canned Responses"},{name:"service-level-agreement",title:"Service Level Agreement"},{name:"ticket-type",title:"Ticket Type"},{name:"ticket-priority",title:"Ticket Priority"}]},{title:"Customizations",opened:!1,subArticles:[{name:"custom-actions",title:"Custom Actions"},{name:"field-dependency",title:"Field Dependency"},{name:"custom-views",title:"Custom Views"},{name:"settings",title:"Settings"}]},{title:"Frappe Helpdesk Mobile",opened:!1,subArticles:[{name:"pwa-installation",title:"Mobile App Installation"}]}]),M=V(!1),R=V({}),{isOnboardingStepsCompleted:T,setUp:U,updateOnboardingStep:B}=gt("helpdesk");async function Z(){const ne=await X();ne?o.push({name:"TicketAgent",params:{ticketId:ne}}):o.push({name:"TicketAgentNew"})}async function X(){let ne=localStorage.getItem("firstTicket");return ne||await et("helpdesk.api.onboarding.get_first_ticket")}async function nt(){let ne=localStorage.getItem("generalCategoryId");if(!ne){if(ne=await et("helpdesk.api.onboarding.get_general_category_id"),!ne)return;localStorage.setItem("generalCategoryId",ne)}return ne}function de(){n.isManager&&U(C)}return Ce(()=>{de()}),(ne,te)=>{const Ge=J("Badge"),qe=J("FeatherIcon");return r(),c("div",{class:"flex select-none flex-col border-r border-gray-200 bg-gray-50 p-2 text-base duration-300 ease-in-out",style:rt({"min-width":t(m),"max-width":t(m)})},[d(Xn,{class:"mb-2",options:S.value},null,8,["options"]),t(Ne)?A("",!0):(r(),D(t(_t),{key:0,label:"Search",class:"my-0.5",icon:t(Ut),"on-click":()=>L(),"is-expanded":t(u)},{right:$(()=>[s("span",Xh,[(r(),D(Qe(t(p).modifierIcon),{class:"h-3 w-3"})),te[5]||(te[5]=s("span",null,"K",-1))])]),_:1},8,["icon","on-click","is-expanded"])),t(Ne)?A("",!0):(r(),D(t(_t),{key:1,class:"relative my-0.5 min-h-7",label:"Dashboard",icon:t(ea),to:"Dashboard","is-active":k("Dashboard"),"is-expanded":t(u)},null,8,["icon","is-active","is-expanded"])),t(Ne)?A("",!0):(r(),c("div",e1,[t(i).unread?(r(),c("div",t1)):A("",!0),d(t(_t),{class:"relative my-0.5",label:"Notifications",icon:t(la),"on-click":()=>t(i).toggle(),"is-expanded":t(u)},{right:$(()=>[t(u)&&t(i).unread?(r(),D(Ge,{key:0,label:t(i).unread>9?"9+":t(i).unread,theme:"gray",variant:"subtle"},null,8,["label"])):A("",!0)]),_:1},8,["icon","on-click","is-expanded"])])),s("div",l1,[(r(!0),c(q,null,G(_.value,pe=>{var Ke;return r(),c("div",{key:pe.label},[!pe.hideLabel&&!t(u)&&((Ke=pe.views)!=null&&Ke.length)?(r(),c("div",s1)):A("",!0),d(t(ta),{label:pe.label,hideLabel:pe.hideLabel,opened:pe.opened},{header:$(({opened:Te,hide:ol,toggle:Pt})=>[ol?A("",!0):(r(),c("div",{key:0,class:se(["flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out",t(u)?"mt-4 h-7 w-auto opacity-100":"ml-0 h-0 overflow-hidden opacity-0"]),onClick:K=>Pt()},[d(qe,{name:"chevron-right",class:se(["h-4 text-ink-gray-9 transition-all duration-300 ease-in-out",{"rotate-90":Te}])},null,8,["class"]),s("span",null,O(pe.label),1)],10,n1))]),default:$(()=>[s("nav",a1,[(r(!0),c(q,null,G(pe.views,Te=>(r(),D(t(_t),{icon:Te.icon,label:Te.label,to:Te.to,key:Te.label,"is-expanded":t(u),"is-active":k(Te.to),class:"my-0.5 emoji",onClick:Te.onClick},null,8,["icon","label","to","is-expanded","is-active","onClick"]))),128))])]),_:2},1032,["label","hideLabel","opened"])])}),128))]),te[6]||(te[6]=s("div",{class:"grow"},null,-1)),s("div",o1,[v.value&&!t(Ne)?(r(),D(t(Rl),{key:0,isSidebarCollapsed:!t(u)},null,8,["isSidebarCollapsed"])):A("",!0),E.value?(r(),D(t(rr),{key:1,isSidebarCollapsed:!t(u),appName:"helpdesk"},null,8,["isSidebarCollapsed"])):A("",!0),t(T)&&!t(Ne)?(r(),D(t(_t),{key:2,icon:cs,label:"Help","is-expanded":t(u),onClick:te[0]||(te[0]=()=>{at.value=t($e)?!0:!t(at),$e.value=!t(at)})},null,8,["is-expanded"])):A("",!0),d(t(_t),{icon:t(u)?t(Ih):t(Fh),"is-active":!1,"is-expanded":t(u),label:t(u)?"Collapse":"Expand","on-click":()=>u.value=!t(u)},null,8,["icon","is-expanded","label","on-click"])]),v.value&&!t(Ne)?(r(),D(t(Rl),{key:3,isSidebarCollapsed:!t(u)},null,8,["isSidebarCollapsed"])):A("",!0),d($h,{modelValue:f.value,"onUpdate:modelValue":te[1]||(te[1]=pe=>f.value=pe),"default-tab":x.value},null,8,["modelValue","default-tab"]),t(at)?(r(),D(t(er),{key:4,modelValue:t(at),"onUpdate:modelValue":te[2]||(te[2]=pe=>mt(at)?at.value=pe:null),articles:F.value,"onUpdate:articles":te[3]||(te[3]=pe=>F.value=pe),appName:"helpdesk",title:"Frappe Helpdesk",logo:t(b),docsLink:"https://docs.frappe.io/helpdesk",afterSkip:pe=>t(zt)("onboarding_step_skipped_"+pe),afterSkipAll:()=>t(zt)("onboarding_steps_skipped"),afterReset:pe=>t(zt)("onboarding_step_reset_"+pe),afterResetAll:()=>t(zt)("onboarding_steps_reset")},null,8,["modelValue","articles","logo","afterSkip","afterSkipAll","afterReset","afterResetAll"])):A("",!0),d(t(mr),{modelValue:M.value,"onUpdate:modelValue":te[4]||(te[4]=pe=>M.value=pe),currentStep:R.value},null,8,["modelValue","currentStep"])],4)}}}),r1={class:"flex h-screen w-screen"},u1={class:"flex-1 flex flex-col h-full overflow-auto"},I1={__name:"DesktopLayout",setup(a){return(e,l)=>(r(),c("div",r1,[d(i1),s("div",u1,[d(Cr),ue(e.$slots,"default")]),d(t(Xo)),d(t(Jn))]))}};export{I1 as default};
//# sourceMappingURL=DesktopLayout-de295e72.js.map
