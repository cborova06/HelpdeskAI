import{d as $,A as k,c as y,a as _,ao as B,r as C,e as u,k as g,g as r,w as n,l,h as o,C as i,a1 as V,at as F,f as b,t as S,G as H,z as T,av as E,F as I,Q as M}from"./index-62a62e6e.js";import{_ as N}from"./AttachmentItem.vue_vue_type_script_setup_true_lang-cb2930a7.js";import{P,I as v}from"./more-horizontal-44c34a82.js";import"./dayjs-23c9994e.js";import{F as L}from"./FileUploader-08f99e92.js";import{T as A,_ as j}from"./TextEditor.vue_vue_type_script_setup_true_lang-3540b034.js";import{_ as w}from"./UserAvatar.vue_vue_type_script_setup_true_lang-3c21d3f7.js";import"./knowledgeBase-e21cae7f.js";const z={class:"rounded p-3 shadow w-full"},D={class:"text-base"},U={class:"flex items-center justify-between"},q={class:"flex flex-col gap-2"},G={class:"flex flex-col space-y-1.5 overflow-auto sm:flex-row sm:justify-between"},O={class:"flex items-center gap-1"},Q={class:"flex items-center gap-2"},J=$({__name:"TextEditor",props:{modelValue:{},autofocus:{type:Boolean,default:!1}},emits:["clear","update:modelValue"],setup(h,{expose:c}){const p=h,m=k(null),d=y(()=>m.value.editor),e=_(),s=["Paragraph",["Heading 2","Heading 3","Heading 4","Heading 5"],"Bullet List","Numbered List","Image","Video","Link","Blockquote","Code"];return c({editor:d}),p.autofocus&&B(()=>m.value.editor.commands.focus()),(a,t)=>{const f=C("Button");return u(),g("div",z,[r(o(j),V({ref_key:"e",ref:m,extensions:[o(P)]},a.$attrs,{"editor-class":["prose-f max-h-64 max-w-none  overflow-auto my-4 min-h-[5rem]",o(F)(a.modelValue)],"bubble-menu":"",content:a.modelValue,onChange:t[1]||(t[1]=x=>a.$emit("update:modelValue",x))}),{top:n(()=>[l("span",D,[l("span",U,[r(o(w),{name:o(e).userName,image:o(e).userImage,expand:"",strong:""},null,8,["name","image"]),i(a.$slots,"top-right")]),i(a.$slots,"top-bottom")])]),bottom:n(()=>[l("div",q,[i(a.$slots,"bottom-top"),l("div",G,[l("div",O,[r(o(A),{buttons:s}),i(a.$slots,"bottom-left")]),l("div",Q,[r(f,{label:"Discard",theme:"gray",variant:"subtle",onClick:t[0]||(t[0]=()=>{d.value.commands.clearContent(!0),a.$emit("clear")})}),i(a.$slots,"bottom-right")])])])]),_:3},16,["extensions","editor-class","content"])])}}}),K={class:"flex flex-wrap gap-2"},R={class:"flex"},W={class:"text-base text-gray-700"},ne=$({__name:"TicketTextEditor",props:{content:{},placeholder:{},attachments:{},expand:{type:Boolean,default:!1}},emits:["update:content","update:attachments","update:expand"],setup(h,{expose:c}){const p=k(null),m=y(()=>p.value.editor),d=_();return c({editor:m}),(e,s)=>{const a=C("Button");return e.expand?(u(),b(o(J),{key:0,ref_key:"e",ref:p,"model-value":e.content,placeholder:e.placeholder,"onUpdate:modelValue":s[2]||(s[2]=t=>e.$emit("update:content",t)),onClear:s[3]||(s[3]=()=>e.$emit("update:attachments",[]))},{"bottom-top":n(()=>[l("div",K,[(u(!0),g(I,null,H(e.attachments,t=>(u(),b(o(N),{key:t.file_url,label:t.file_name,url:["MOV","MP4"].includes(t.file_type)?null:t.file_url},{suffix:n(()=>[r(o(v),{icon:"lucide:x",onClick:T(()=>{e.$emit("update:attachments",e.attachments.filter(f=>f.file_url!==t.file_url)),o(E)(t.name)},["stop"])},null,8,["onClick"])]),_:2},1032,["label","url"]))),128))])]),"bottom-left":n(()=>[l("span",R,[i(e.$slots,"bottom-left"),r(o(L),{"upload-args":{folder:"Home/Helpdesk",private:!0},onSuccess:s[0]||(s[0]=t=>e.$emit("update:attachments",[...e.attachments,t])),onFailure:s[1]||(s[1]=()=>o(M).error("Error uploading file"))},{default:n(({openFileSelector:t})=>[r(a,{theme:"gray",variant:"ghost",onClick:f=>t()},{icon:n(()=>[r(o(v),{icon:"lucide:paperclip"})]),_:2},1032,["onClick"])]),_:1})])]),"top-right":n(()=>[i(e.$slots,"top-right")]),"top-bottom":n(()=>[i(e.$slots,"top-bottom")]),"bottom-right":n(()=>[i(e.$slots,"bottom-right")]),_:3},8,["model-value","placeholder"])):(u(),g("div",{key:1,class:"flex w-full cursor-pointer items-center gap-2 rounded bg-gray-100 px-3.5 py-2 hover:bg-gray-200",onClick:s[4]||(s[4]=()=>e.$emit("update:expand",!e.expand))},[r(o(w),{name:o(d).userName,image:o(d).userImage,size:"sm"},null,8,["name","image"]),l("span",W,S(e.placeholder),1)]))}}});export{ne as _};
//# sourceMappingURL=TicketTextEditor.vue_vue_type_script_setup_true_lang-7ec8927e.js.map
